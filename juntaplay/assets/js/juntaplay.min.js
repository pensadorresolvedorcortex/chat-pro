!function(t){"use strict";window.JP=window.JP||{};var a=window.wp&&window.wp.i18n?window.wp.i18n:null;function e(t,e){return a&&"function"==typeof a.__?a.__.apply(a,arguments):t}function n(t,e,n,i){return a&&"function"==typeof a._n?a._n.apply(a,arguments):1===n?t:e}function i(a){var e=[];return a.find(".juntaplay-grid__item.is-selected").each(function(){e.push(t(this).data("number"))}),e}function o(t,a,e){var n=isFinite(t)?t:0;try{return new Intl.NumberFormat(e||"pt-BR",{style:"currency",currency:a||"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}catch(t){return(a||"R$")+" "+n.toFixed(2)}}function r(t){return String(null==t?"":t).replace(/[&<>"']/g,function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#039;";default:return t}})}var l=null;function s(){t("body").hasClass("woocommerce-checkout")&&(l&&clearTimeout(l),l=window.setTimeout(function(){l=null,t(document.body).trigger("update_checkout")},180))}var d=window.JuntaPlay&&window.JuntaPlay.assets&&window.JuntaPlay.assets.groupCoverPlaceholder?window.JuntaPlay.assets.groupCoverPlaceholder.toString():"";if(!d){var p=document.querySelector("[data-cover-placeholder]");if(p){var c=p.getAttribute("data-cover-placeholder")||"";c&&(d=c.toString())}}function u(t){var a=i(t),e=t.find(".juntaplay-selected__numbers"),n=t.find(".juntaplay-selected__count"),r=t.find(".juntaplay-selected__total-value"),l=t.find(".juntaplay-quota-form"),s=e.data("empty")||"",d=r.data("empty")||"",p=l.data("currency"),c=l.data("locale"),u=parseFloat(l.data("price"))||0;if(a.length){var f=a.map(function(t){return'<span class="juntaplay-chip">'+t+"</span>"});e.html(f.join("")),n.text(a.length),r.text(o(a.length*u,p,c))}else e.html('<span class="juntaplay-selected__empty">'+s+"</span>"),n.text("0"),r.text(d)}function f(t,a){var n=t.status||"available",i=["juntaplay-grid__item"];"available"!==n&&(i.push("is-disabled"),i.push("status-"+n)),a&&i.push("is-selected");var o="";return"available"!==n&&(o='<span class="juntaplay-grid__badge">'+function(t){switch(t){case"reserved":return e("Reservada","juntaplay");case"paid":return e("Paga","juntaplay");case"canceled":return e("Cancelada","juntaplay");case"expired":return e("Expirada","juntaplay");default:return e("Disponível","juntaplay")}}(n)+"</span>"),'<button type="button" class="'+i.join(" ")+'" data-number="'+t.number+'" data-status="'+n+'"><span class="juntaplay-grid__number">'+t.number+"</span>"+o+"</button>"}function g(t){var a=t.is_featured?'<span class="juntaplay-pool-card__badge">'+e("Destaque","juntaplay")+"</span>":"",n=t.categoryLabel?'<span class="juntaplay-badge">'+t.categoryLabel+"</span>":"",i='<div class="juntaplay-progress"><span class="juntaplay-progress__bar" style="width:'+(t.progress||0)+'%"></span></div>',o='<div class="juntaplay-pool-card__meta"><span>'+e("Disponíveis","juntaplay")+": "+t.quotasFree+"</span><span>"+e("Vendidas","juntaplay")+": "+t.quotasPaid+"</span></div>";return'<article class="juntaplay-pool-card">'+(t.thumbnail?'<div class="juntaplay-pool-card__cover"><img src="'+t.thumbnail+'" alt="'+t.title+'" /></div>':'<div class="juntaplay-pool-card__cover is-placeholder"><span>'+e("Grupo","juntaplay")+"</span></div>")+'<div class="juntaplay-pool-card__body">'+a+'<h3 class="juntaplay-pool-card__title"><a href="'+t.permalink+'">'+t.title+"</a></h3>"+n+'<p class="juntaplay-pool-card__excerpt">'+t.excerpt+'</p><div class="juntaplay-pool-card__price">'+e("Rifa a partir de","juntaplay")+" <strong>"+t.priceLabel+"</strong></div>"+i+o+'<a class="juntaplay-button juntaplay-button--primary" href="'+t.permalink+'">'+e("Assinar agora","juntaplay")+"</a></div></article>"}function h(a){var n={page:1,perPage:parseInt(a.data("perPage"),10)||12,category:(a.data("category")||"").toString(),orderby:(a.data("orderby")||"created_at").toString(),order:(a.data("order")||"desc").toString(),featured:(a.data("featured")||"").toString(),minPrice:"",maxPrice:"",search:"",loading:!1,hasMore:!0},i=a.find("[data-pool-results]"),o=a.find("[data-pool-meta]"),r=a.find("[data-pool-empty]"),l=a.find("[data-pools-load]"),s=a.find("form.juntaplay-pool-filters");function d(t){n.loading=t,a.toggleClass("is-loading",t),t?l.prop("disabled",!0).text(e("Carregando...","juntaplay")):n.hasMore?l.prop("disabled",!1).removeAttr("hidden").text(e("Carregar mais campanhas","juntaplay")):l.prop("disabled",!0).attr("hidden","hidden")}function p(a){n.loading||(d(!0),a&&(n.page=1,n.hasMore=!0,l.length&&l.removeAttr("hidden")),t.ajax({url:JuntaPlay.ajax,dataType:"json",method:"GET",data:{action:"juntaplay_pools",nonce:JuntaPlay.nonce,page:n.page,per_page:n.perPage,category:n.category,search:n.search,min_price:n.minPrice,max_price:n.maxPrice,orderby:n.orderby,order:n.order,featured:n.featured}}).done(function(t){if(t&&t.success){var s,d=t.data||{},p=d.items||[];if(a&&i.empty(),!p.length&&a?r.text(e("Nenhum grupo encontrado com os filtros selecionados.","juntaplay")).addClass("is-visible"):r.removeClass("is-visible").text(""),p.length){var c=p.map(g);i.append(c.join(""))}n.page=(d.page||1)+1,n.hasMore=(d.page||1)<(d.pages||1),n.hasMore?l.attr("disabled",!1).removeAttr("hidden").text(e("Carregar mais campanhas","juntaplay")):l.attr("disabled",!0).attr("hidden","hidden"),s=d.total||0,o.length&&o.text(s?e("Exibindo","juntaplay")+" "+s:"")}else r.text(t&&t.data&&t.data.message?t.data.message:e("Não foi possível carregar os grupos.","juntaplay")).addClass("is-visible")}).fail(function(){r.text(e("Não foi possível carregar os grupos.","juntaplay")).addClass("is-visible")}).always(function(){d(!1)}))}s.on("submit",function(t){t.preventDefault(),n.category=(s.find('[name="category"]').val()||"").toString(),n.search=(s.find('[name="search"]').val()||"").toString(),n.orderby=(s.find('[name="orderby"]').val()||"created_at").toString(),n.order=(s.find('[name="order"]').val()||"desc").toString(),n.minPrice=(s.find('[name="min_price"]').val()||"").toString(),n.maxPrice=(s.find('[name="max_price"]').val()||"").toString(),p(!0)}),l.on("click",function(t){t.preventDefault(),n.hasMore&&!n.loading&&p(!1)}),p(!0)}function m(a){var e=a.find("[data-group-list]"),n=e.find("[data-group-item]"),i=(a.data("role-filter")||"all").toString(),o=(a.data("status-filter")||"all").toString(),r=0;n.each(function(){var a=t(this),e=(a.data("group-role")||"").toString(),n=(a.data("group-status")||"").toString(),l=!1;"owned"===i&&"owner"!==e&&"manager"!==e?l=!0:"member"!==i||"owner"!==e&&"manager"!==e||(l=!0),l||"all"===o||n===o||(l=!0),a.toggleClass("is-hidden",l),l||r++});var l=e.find("[data-group-empty]");l.length&&(0===r?l.removeClass("is-hidden"):l.addClass("is-hidden"))}function v(t){if(null==t)return 0;var a=t.toString().trim();if(!a)return 0;if(!(a=a.replace(/[^0-9,\.\-]/g,""))||"-"===a)return 0;-1!==a.indexOf(",")&&-1!==a.indexOf(".")?a=a.replace(/\./g,"").replace(",","."):-1!==a.indexOf(",")&&(a=a.replace(",","."));var e=parseFloat(a);return isNaN(e)?0:e}function y(t){if(!isFinite(t)||t<=0)return"";try{return t.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}catch(a){return t.toFixed(2)}}function j(a){if(a.length){var e=a.find("[data-group-share]");if(e.length){var n=function(a){var e=a.find('[name="jp_profile_group_category"]'),n=t.trim((e.val()||"").toString()),i=t.trim((e.find("option:selected").text()||"").toString());return{name:t.trim((a.find('[name="jp_profile_group_name"]').val()||"").toString()),service:t.trim((a.find('[name="jp_profile_group_service"]').val()||"").toString()),serviceUrl:t.trim((a.find('[name="jp_profile_group_service_url"]').val()||"").toString()),rules:t.trim((a.find('[name="jp_profile_group_rules"]').val()||"").toString()),description:t.trim((a.find('[name="jp_profile_group_description"]').val()||"").toString()),price:v(a.find('[name="jp_profile_group_price"]').val()),promoEnabled:a.find("[data-group-promo-toggle]").is(":checked"),promo:v(a.find('[name="jp_profile_group_price_promo"]').val()),slotsTotal:parseInt((a.find('[name="jp_profile_group_slots_total"]').val()||"0").toString(),10)||0,slotsReserved:parseInt((a.find('[name="jp_profile_group_slots_reserved"]').val()||"0").toString(),10)||0,memberPrice:v(a.find('[name="jp_profile_group_member_price"]').val()),support:t.trim((a.find('[name="jp_profile_group_support"]').val()||"").toString()),delivery:t.trim((a.find('[name="jp_profile_group_delivery"]').val()||"").toString()),access:t.trim((a.find('[name="jp_profile_group_access"]').val()||"").toString()),category:n,categoryLabel:i,instantAccess:a.find('[name="jp_profile_group_instant"]').is(":checked")}}(a),i=((e.data("domain")||"").toString(),(e.find('[data-group-share-field="promo"]').data("fallback")||"").toString()),r=(e.find('[data-group-share-field="category"]').data("empty")||"").toString(),l=(e.find('[data-group-share-field="instant_access"]').data("fallback")||"").toString(),s=n.price>0?o(n.price,"BRL","pt-BR"):"",d=n.promoEnabled&&n.promo>0?o(n.promo,"BRL","pt-BR"):"",p=n.memberPrice>0?o(n.memberPrice,"BRL","pt-BR"):"",c=n.slotsReserved>0?n.slotsReserved.toString():"",u=d||i||"Não",f=n.promoEnabled&&n.promo>0?"Sim":"Não",g=n.categoryLabel||r,h=n.instantAccess?"Ativado":l||"Desativado",m={service:n.service,name:n.name,category:g,service_url:n.serviceUrl,rules:n.rules,description:n.description,price:s,promo_flag:f,promo:u,slots_total:n.slotsTotal>0?n.slotsTotal.toString():"",slots_reserved:c||"0",member_price:p,support:n.support,delivery:n.delivery,access:n.access,instant_access:h};t.each(m,function(t,a){var n=e.find('[data-group-share-field="'+t+'"]');if(n.length){var i=(n.data("empty")||n.data("fallback")||"").toString(),o=a;"string"==typeof o&&(o=o.trim()),o?n.text(o):i?n.text(i):n.text("—")}});var y=[];n.service&&y.push("Serviço: "+n.service),n.name&&y.push("Nome do grupo: "+n.name),y.push("Tipo: Público"),g&&y.push("Categoria: "+g),n.serviceUrl&&y.push("Site: "+n.serviceUrl),n.rules&&y.push("Regras: "+n.rules),n.description&&y.push("Descrição: "+n.description),s&&y.push("Valor do serviço: "+s),y.push("É valor promocional?: "+f),y.push("Valor promocional: "+u),n.slotsTotal>0&&y.push("Vagas totais: "+n.slotsTotal),n.slotsReserved>0&&y.push("Reservadas para você: "+n.slotsReserved),p&&y.push("Os membros vão pagar: "+p),n.support&&y.push("Suporte a membros: "+n.support),n.delivery&&y.push("Envio de acesso: "+n.delivery),n.access&&y.push("Forma de acesso: "+n.access),y.push("Acesso instantâneo: "+h);var j=y.join("\n");j||(j=(e.data("empty")||"").toString());var _=e.find("[data-group-share-snippet]");_.length&&_.text(j);var w=e.find("[data-group-share-text]");w.length&&w.val(j)}}}function _(t){if(t.length){var a=v(t.find('[name="jp_profile_group_price"]').val()),e=t.find("[data-group-promo-toggle]").is(":checked")?v(t.find('[name="jp_profile_group_price_promo"]').val()):0,n=parseInt(t.find('[name="jp_profile_group_slots_total"]').val(),10)||0,i=parseInt(t.find('[name="jp_profile_group_slots_reserved"]').val(),10)||0,r=Math.max(1,n-i),l=e>0?e:a,s=l>0?l/r:0,d=t.find("[data-group-member-input]"),p=t.find("[data-group-price-preview]"),c=!0===d.data("jpDirty"),u="yes"===d.data("group-member-generated");if(d.length)if(!c&&s>0){var f=y(s);f&&(d.val(f),d.data("group-member-generated","yes"))}else!c&&s<=0&&u&&d.val("");if(p.length){var g=v(d.val());if(g<=0&&s>0&&(g=s),g>0){var h=(p.data("suffix")||"").toString().trim(),m=o(g,"BRL","pt-BR");h&&(m+=" "+h),p.text(m).removeClass("is-hidden")}else{var _=(p.data("empty")||"").toString();_?p.text(_).removeClass("is-hidden"):p.addClass("is-hidden")}}j(t)}}function w(t){var a=t.closest("form"),e=a.find("[data-group-promo-field]");t.is(":checked")?e.removeClass("is-hidden"):(e.addClass("is-hidden"),e.find("input").val("")),_(a)}function b(a,e){e&&(a.attr("data-active-view",e),a.find(".juntaplay-auth__switch-btn").each(function(){var a=t(this),n=a.data("target")===e;a.toggleClass("is-active",n),a.attr("aria-selected",n?"true":"false")}),a.find(".juntaplay-auth__pane").each(function(){var a=t(this),n=a.data("pane")===e;a.toggleClass("is-active",n),a.attr("aria-hidden",n?"false":"true")}))}d||(d="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDUiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIHNsaWNlIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImpwQ292ZXIiIHgxPSIwIiB4Mj0iMSIgeTE9IjAiIHkyPSIxIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRERFM0VBIiAvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0YxRjNGNiIgLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNiIgaGVpZ2h0PSI1IiBmaWxsPSJ1cmwoI2pwQ292ZXIpIiAvPjxnIGZpbGw9IiM5MEE0QjgiIG9wYWNpdHk9IjAuOCI+PHBhdGggZD0iTTEgMy4yIDIuNCAxLjZsLjguOS44LS43TDUgMy40di44SDF6IiAvPjxjaXJjbGUgY3g9IjEuNCIgY3k9IjEuMyIgcj0iMC41IiAvPjwvZz48L3N2Zz4="),t(document).on("click",".juntaplay-grid__item",function(){var a=t(this),e=a.closest(".juntaplay-quota-selector");!function(t){t.hasClass("is-disabled")||t.toggleClass("is-selected")}(a),e.data("selectedNumbers",i(e)),u(e)}),t(document).on("submit",".juntaplay-quota-form",function(a){var e=t(this),n=i(e.closest(".juntaplay-quota-selector"));return n.length?(e.find('input[name="jp_numbers[]"]').remove(),n.forEach(function(a){t("<input />",{type:"hidden",name:"jp_numbers[]",value:a}).appendTo(e)}),!0):(a.preventDefault(),alert(e.data("message-empty")),!1)}),t(function(){t(".juntaplay-quota-selector").each(function(){!function(a){var n={poolId:parseInt(a.data("pool"),10)||0,perPage:parseInt(a.data("perPage"),10)||120,page:1,status:(a.data("status")||"available").toString(),search:"",sort:(a.data("sort")||"ASC").toString(),loading:!1,hasMore:!0},o=a.find(".juntaplay-grid"),r=a.find("[data-quota-load]"),l=a.find("[data-quota-feedback]"),s=a.find(".juntaplay-quota-filter");function d(t){n.loading=t,a.toggleClass("is-loading",t),t?r.prop("disabled",!0).text(e("Carregando...","juntaplay")):r.prop("disabled",!1).text(n.hasMore?e("Ver mais números","juntaplay"):e("Todos os números carregados","juntaplay"))}function p(i){!n.loading&&n.poolId&&(d(!0),i&&(n.page=1,n.hasMore=!0),t.ajax({url:JuntaPlay.ajax,dataType:"json",method:"GET",data:{action:"juntaplay_pool_numbers",nonce:JuntaPlay.nonce,pool_id:n.poolId,page:n.page,per_page:n.perPage,status:n.status,search:n.search,sort:n.sort}}).done(function(t){if(t&&t.success){var s=t.data||{},d=s.items||[];i&&o.empty(),!d.length&&i?l.text(e("Nenhum número encontrado para os filtros selecionados.","juntaplay")).addClass("is-visible"):l.removeClass("is-visible").text("");var p=a.data("selectedNumbers")||[];if(d.length){var c=d.map(function(t){return f(t,-1!==p.indexOf(t.number))});o.append(c.join(""))}n.page=(s.page||1)+1,n.hasMore=(s.page||1)<(s.pages||1),n.hasMore?r.attr("disabled",!1).text(e("Ver mais números","juntaplay")):r.attr("disabled",!0).text(e("Todos os números carregados","juntaplay")),u(a)}else l.text(t&&t.data&&t.data.message?t.data.message:e("Não foi possível carregar as cotas agora.","juntaplay")).addClass("is-visible")}).fail(function(){l.text(e("Não foi possível carregar as cotas agora.","juntaplay")).addClass("is-visible")}).always(function(){d(!1)}))}a.data("selectedNumbers",i(a)),s.on("submit",function(t){t.preventDefault(),n.status=(s.find('[name="status"]').val()||"available").toString(),n.search=(s.find('[name="search"]').val()||"").toString(),n.sort=(s.find('[name="sort"]').val()||"ASC").toString(),p(!0)}),r.on("click",function(t){t.preventDefault(),n.hasMore&&!n.loading&&p(!1)}),p(!0)}(t(this))}),t(".juntaplay-pool-catalog").each(function(){h(t(this))}),t("[data-jp-two-factor]").each(function(){!function(t){if(!t.length)return;var a,n=parseInt(t.data("remaining"),10)||0,i=parseInt(t.data("cooldown"),10)||45,o=t.find("[data-jp-two-factor-timer]"),r=t.find("[data-jp-two-factor-resend-button]"),l=t.find("[data-jp-two-factor-input]");l.length&&setTimeout(function(){l.trigger("focus")},150);if(o.length&&n>0)var s=setInterval(function(){if((n-=1)<=0)return clearInterval(s),void o.attr("hidden","hidden");var t=Math.floor(n/60),a=n%60,i=String(t).padStart(2,"0")+":"+String(a).padStart(2,"0");o.removeAttr("hidden").text(e("O código expira em %s.","juntaplay").replace("%s",i))},1e3);r.length&&i>0&&t.on("submit","[data-jp-two-factor-resend]",function(){if(!r.prop("disabled")){r.prop("disabled",!0).text(e("Enviando...","juntaplay")),a&&clearInterval(a);var t=i;a=setInterval(function(){(t-=1)<=0?(clearInterval(a),r.prop("disabled",!1).text(e("Enviar novo código","juntaplay"))):r.text(e("Tente novamente em %s s","juntaplay").replace("%s",t))},1e3)}})}(t(this))}),t(".juntaplay-groups[data-jp-groups]").each(function(){!function(a){if(!a.length||void 0===window.JuntaPlay)return;var i={page:1,currentPage:1,totalPages:1,perPage:parseInt(a.data("perPage"),10)||16,loading:!1,orderby:"created",order:"desc",category:"",search:"",instant:""},o=a.data("defaultSearch"),r=a.data("defaultCategory"),l=a.data("defaultOrderby"),s=a.data("defaultOrder"),d=a.data("defaultInstant");"string"==typeof o&&o.length&&(i.search=o);"string"==typeof r&&r.length&&(i.category=r);"string"==typeof l&&l.length&&(i.orderby=l);"string"==typeof s&&s.length&&(i.order=s);"string"==typeof d&&d.length&&(i.instant=d);var p=(a.data("cardVariant")||"spotlight").toString();"compact"!==p&&(p="spotlight");var c=a.find("[data-jp-groups-list]"),u=a.find("[data-jp-groups-empty]"),f=a.find("[data-jp-groups-total]"),g=a.find("[data-jp-groups-filters]"),h=a.find("[data-jp-groups-pagination]");function m(t){i.loading=t,a.toggleClass("is-loading",t)}function v(t){f.length&&(t=parseInt(t,10)||0,f.text(t?n("%d grupo encontrado","%d grupos encontrados",t,"juntaplay").replace("%d",t):e("Nenhum grupo encontrado","juntaplay")))}function y(t){if(c.empty(),t&&t.length){var a=t.map(function(t){return R(t,p)}).join("");c.html(a),u.attr("hidden","hidden")}else u.removeAttr("hidden")}function j(t,a){var e=[],n=Math.max(1,t-2),i=Math.min(a,t+2);n>1&&(e.push(1),n>2&&e.push("ellipsis"));for(var o=n;o<=i;o+=1)e.push(o);return i<a&&(i<a-1&&e.push("ellipsis"),e.push(a)),e}function _(){if(h.length){var t=i.totalPages,a=i.currentPage;if(t<=1)h.empty().attr("hidden","hidden");else{var n=j(a,t),o=a<=1,r=a>=t,l=[];l.push('<button type="button" class="juntaplay-pagination__nav'+(o?" is-disabled":"")+'" data-page="'+(a-1)+'"'+(o?' aria-disabled="true" disabled':"")+">"+e("Anterior","juntaplay")+"</button>"),n.forEach(function(t){if("ellipsis"!==t){var e=t===a;l.push('<button type="button" class="juntaplay-pagination__page'+(e?" is-active":"")+'" data-page="'+t+'"'+(e?' aria-current="page"':"")+">"+t+"</button>")}else l.push('<span class="juntaplay-pagination__ellipsis" aria-hidden="true">…</span>')}),l.push('<button type="button" class="juntaplay-pagination__nav'+(r?" is-disabled":"")+'" data-page="'+(a+1)+'"'+(r?' aria-disabled="true" disabled':"")+">"+e("Próxima","juntaplay")+"</button>"),h.html(l.join("")).removeAttr("hidden")}}}function w(a){i.loading||("number"!=typeof a||Number.isNaN(a)||(i.page=Math.max(1,a)),m(!0),t.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_groups_directory",nonce:window.JuntaPlay.nonce,page:i.page,per_page:i.perPage,search:i.search,category:i.category,orderby:i.orderby,order:i.order,instant_access:i.instant}).done(function(t){if(t&&t.success&&t.data){var a=t.data,e=parseInt(a.page,10)||i.page,n=parseInt(a.pages,10)||1;i.currentPage=e,i.totalPages=n,y(a.items||[]),v(a.total||0),_()}}).fail(function(){c.empty(),u.removeAttr("hidden").text(e("Não foi possível carregar os grupos agora.","juntaplay")),i.totalPages=1,_()}).always(function(){m(!1)}))}if(g.length){if(i.search&&g.find('input[name="search"]').val(i.search),i.category&&g.find('select[name="category"]').val(i.category),"1"===i.instant&&g.find('input[name="instant"]').prop("checked",!0),i.orderby){var b=g.find('select[name="orderby"]');if(b.length){var x=b.find("option").filter(function(){var a=t(this),e=(a.val()||"").toString(),n=(a.data("order")||"").toString();return e===i.orderby&&(!i.order||n===i.order)}).first();if(x.length)b.val(x.val()),b.find("option").prop("selected",!1),x.prop("selected",!0),i.order=(x.data("order")||i.order||"desc").toString();else{b.val(i.orderby);var C=b.find(":selected");C.length&&(i.order=(C.data("order")||i.order||"desc").toString())}}}g.on("submit",function(t){t.preventDefault(),i.search=g.find('input[name="search"]').val()||"",w(1)}),g.on("change",'select[name="category"]',function(){i.category=t(this).val()||"",w(1)}),g.on("change",'select[name="orderby"]',function(){var a=t(this).find(":selected");i.orderby=t(this).val()||"created",i.order=(a.data("order")||"desc").toString(),w(1)}),g.on("change",'input[name="instant"]',function(){i.instant=t(this).is(":checked")?"1":"",w(1)}),g.on("click","[data-jp-groups-clear]",function(){g.find('input[name="search"]').val(""),g.find('select[name="category"]').prop("selectedIndex",0);var t=g.find('select[name="orderby"]');t.prop("selectedIndex",0),i.orderby=t.val()||"created",i.order=(t.find(":selected").data("order")||"desc").toString(),g.find('input[name="instant"]').prop("checked",!1),i.search="",i.category="",i.instant="",w(1)})}h.length&&h.on("click","[data-page]",function(e){e.preventDefault();var n=parseInt(t(this).attr("data-page"),10);Number.isNaN(n)||n<1||n>i.totalPages||n===i.currentPage||(w(n),window.requestAnimationFrame(function(){var e=a.offset();e&&t("html, body").animate({scrollTop:Math.max(0,e.top-120)},240)}))});w(1)}(t(this))}),t("[data-group-cover]").each(function(){O(t(this))}),t(".juntaplay-group-rotator").each(function(){!function(a){if(!a.length||void 0===window.JuntaPlay)return;var e=parseInt(a.data("limit"),10)||12,n={category:(a.data("defaultCategory")||"").toString(),loading:!1},i=a.find("[data-rotator-grid]"),o=a.find("[data-rotator-track]"),r=a.find("[data-rotator-empty]"),l=a.find('[data-rotator-nav="prev"]'),s=a.find('[data-rotator-nav="next"]');function d(t){n.loading=t,a.toggleClass("is-loading",t)}function p(){if(o.length){var t=o.get(0);if(t){var a=Math.max(0,t.scrollWidth-t.clientWidth),e=t.scrollLeft,n=4,i=e<=n,r=e>=a-n;l.length&&l.toggleClass("is-disabled",i).prop("disabled",i).attr("aria-disabled",i?"true":"false"),s.length&&s.toggleClass("is-disabled",r).prop("disabled",r).attr("aria-disabled",r?"true":"false")}}}function c(t){if(i.empty(),t&&t.length){var a=t.map(function(t){return R(t,"spotlight")}).join("");i.html(a),r.length&&r.attr("hidden","hidden")}else r.length&&r.removeAttr("hidden")}function u(){n.loading||(d(!0),t.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_groups_directory",nonce:window.JuntaPlay.nonce,page:1,per_page:e,orderby:"updated",order:"desc",category:n.category}).done(function(t){t&&t.success&&t.data?c(t.data.items||[]):c([])}).fail(function(){c([])}).always(function(){d(!1)}))}o.length&&(o.on("click","[data-rotator-filter]",function(a){a.preventDefault();var e=t(this),i=(e.data("rotatorFilter")||"").toString();if(i!==n.category){n.category=i,e.addClass("is-active").attr("aria-selected","true"),e.siblings("[data-rotator-filter]").removeClass("is-active").attr("aria-selected","false");var o=e.get(0);if(o&&"function"==typeof o.scrollIntoView)try{o.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}catch(t){}u()}}),o.on("scroll",function(){p()}));if(l.length||s.length){var f=function(t){if(o.length){var a=o.get(0);if(a){var e=.6*a.clientWidth,n=Math.max(0,Math.min(a.scrollLeft+t*e,a.scrollWidth-a.clientWidth));o.stop().animate({scrollLeft:n},260,"swing",p)}}};l.length&&l.on("click",function(a){a.preventDefault(),t(this).hasClass("is-disabled")||f(-1)}),s.length&&s.on("click",function(a){a.preventDefault(),t(this).hasClass("is-disabled")||f(1)}),t(window).on("resize",function(){p()})}u(),p()}(t(this))}),t(".juntaplay-dashboard[data-dashboard]").each(function(){!function(a){if(a&&a.length){var e=a.find("[data-dashboard-tab]"),n=a.find("[data-dashboard-panel]");if(e.length&&n.length){var i=null;e.on("click",function(a){a.preventDefault();var e=(t(this).data("dashboardTab")||"").toString();e&&e!==i&&d(e)});var o=(e.filter(".is-active").first().data("dashboardTab")||"").toString();try{var r=(new URL(window.location.href).searchParams.get("jp_tab")||"").toString();r&&e.filter('[data-dashboard-tab="'+r+'"]').length&&(o=r)}catch(t){}if(!o&&window.location.hash){var l=window.location.hash.replace("#","");if(0===l.indexOf("jp_tab=")){var s=l.split("=")[1]||"";s&&e.filter('[data-dashboard-tab="'+s+'"]').length&&(o=s)}}!o&&e.length&&(o=(e.first().data("dashboardTab")||"").toString()),d(o)}}function d(a){if(a&&(i=a,e.each(function(){var e=t(this),n=(e.data("dashboardTab")||"").toString()===a;e.toggleClass("is-active",n),e.attr("aria-selected",n?"true":"false")}),n.each(function(){var e=t(this),n=(e.data("dashboardPanel")||"").toString()===a;e.toggleClass("is-active",n),e.attr("aria-hidden",n?"false":"true")}),window.history&&window.history.replaceState))try{var o=new URL(window.location.href);o.searchParams.set("jp_tab",a),window.history.replaceState({},document.title,o.toString())}catch(t){}}}(t(this))});var a=t("#jp-group-create-template");a.length&&parseInt(a.data("autoOpen"),10)&&U()}),t(document).on("click","[data-group-filter]",function(a){a.preventDefault();var e=t(this),n=(e.data("group-filter")||"all").toString(),i=e.closest("[data-groups]");i.length&&(e.addClass("is-active").attr("aria-selected","true"),e.siblings("[data-group-filter]").removeClass("is-active").attr("aria-selected","false"),i.data("role-filter",n),m(i))}),t(document).on("change","[data-group-status-filter]",function(){var a=t(this),e=(a.val()||"all").toString(),n=a.closest("[data-groups]");n.length&&(n.data("status-filter",e),m(n))}),t(document).on("click","[data-group-card-toggle]",function(a){a.preventDefault();var e=t(this),n="true"===e.attr("aria-expanded");n=!n,e.attr("aria-expanded",n?"true":"false");var i=e.data("labelExpand")||e.data("label-expand")||"",o=e.data("labelCollapse")||e.data("label-collapse")||"",r=e.find(".juntaplay-group-card__toggle-label");r.length&&(n&&o?r.text(o):!n&&i&&r.text(i));var l=e.closest(".juntaplay-group-card"),s=l.find("[data-group-card-details]").first();s.length&&(n?s.removeAttr("hidden"):s.attr("hidden","hidden")),l.length&&l.toggleClass("is-expanded",n)}),t(document).on("click","[data-group-detail-trigger]",function(a){a.preventDefault();var e=(t(this).data("detailTarget")||t(this).data("target")||"").toString();e&&("#"!==e.charAt(0)&&(e="#"+e),function(a){if(!a)return;var e=t("[data-group-modal]");if(!e.length)return;var n=B(a);if(!n||!n.length)return;F(e,n)}(e))}),t(document).on("click","[data-jp-group-open]",function(a){if(!(a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||2===a.which)){var e=t(this),n=parseInt(e.data("groupId"),10);if(!n){var i=e.closest("[data-group-id]");i.length&&(n=parseInt(i.data("groupId"),10)||0)}n&&(a.preventDefault(),a.stopPropagation(),void 0!==z&&z&&"function"==typeof z.loadDetail&&z.loadDetail(n))}}),t(document).on("click","[data-group-create-trigger]",function(t){t.preventDefault(),U()}),t(document).on("click","[data-modal-close]",function(a){a.preventDefault(),G(t(this).closest(".juntaplay-modal"))}),t(document).on("click",".juntaplay-modal__overlay",function(a){a.preventDefault(),G(t(this).closest(".juntaplay-modal"))}),t(document).on("keyup",function(a){"Escape"===a.key&&t(".juntaplay-modal.is-open").each(function(){G(t(this))})}),t(document).on("click","[data-jp-share-network]",function(a){a.preventDefault();var e=t(this),n=function(t,a,e){var n=(a||"").toString();if(!n)return"";var i=encodeURIComponent(n),o=encodeURIComponent((e||"").toString());switch((t||"").toString().toLowerCase()){case"whatsapp":return"https://wa.me/?text="+o+(o?"%20":"")+i;case"telegram":return"https://t.me/share/url?url="+i+"&text="+o;case"facebook":return"https://www.facebook.com/sharer/sharer.php?u="+i;case"twitter":case"x":return"https://twitter.com/intent/tweet?url="+i+"&text="+o;default:return""}}((e.data("jpShareNetwork")||"").toString(),(e.data("jpShareUrl")||"").toString(),(e.data("jpShareText")||document.title||"").toString());n&&function(t){if(!t)return;var a=640,e=520,n=window.screenX+Math.max(0,(window.outerWidth-a)/2),i=window.screenY+Math.max(0,(window.outerHeight-e)/2);window.open(t,"_blank","noopener,noreferrer,width="+a+",height="+e+",left="+n+",top="+i)}(n)}),t(document).on("click","[data-jp-share-copy]",function(a){a.preventDefault();var n=t(this),i=(n.data("jpShareUrl")||"").toString();if(i){var o=(n.data("jpShareLabel")||n.text()).toString(),r=(n.data("jpShareCopied")||e("Link copiado!","juntaplay")).toString();(function(t){var a=(t||"").toString();if(!a)return Promise.reject();if(navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)return navigator.clipboard.writeText(a);return new Promise(function(t,e){try{var n=document.createElement("textarea");n.value=a,n.setAttribute("readonly","readonly"),n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select();var i=document.execCommand("copy");document.body.removeChild(n),i?t():e()}catch(t){e(t)}})})(i).then(function(){n.addClass("is-success").text(r),window.setTimeout(function(){n.removeClass("is-success").text(o)},2200)}).catch(function(){n.addClass("is-error"),window.setTimeout(function(){n.removeClass("is-error").text(o)},1800)})}}),t(document).on("change","[data-group-promo-toggle]",function(){w(t(this))}),t(document).on("input change","[data-group-price-input], [data-group-slot-input]",function(){_(t(this).closest("form"))}),t(document).on("change","#jp-group-instant",function(){var a=t(this),e=a.closest(".juntaplay-toggle").find(".juntaplay-toggle__caption");if(e.length){var n=(e.data("toggle-caption-active")||"Ativado").toString(),i=(e.data("toggle-caption-inactive")||"Desativado").toString();e.text(a.is(":checked")?n:i)}j(a.closest("form"))}),t(document).on("input","[data-group-member-input]",function(){var a=t(this);a.data("jpDirty",!0),a.data("group-member-generated","no"),_(a.closest("form"))}),t(document).on("blur","[data-group-member-input]",function(){var a=t(this),e=v(a.val());e>0&&a.val(y(e))}),t(document).on("input change","[data-group-share-watch]",function(){j(t(this).closest("form"))}),t(document).on("click","[data-group-share-copy]",function(a){a.preventDefault();var e=t(this),n=e.closest("[data-group-share]").find("[data-group-share-text]");if(!n.length){var i=e.closest("form");i.length&&(n=i.find("[data-group-share-text]"))}if(n.length){var o=(n.val()||"").toString();if(o){var r=(e.data("default-label")||e.text()||"").toString(),l=(e.data("success-label")||r).toString(),s=function(){e.text(l).addClass("is-success"),setTimeout(function(){e.text(r).removeClass("is-success")},2e3)},d=function(){alert(e.data("error-label")||"Não foi possível copiar agora. Copie manualmente.")};if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(o).then(s).catch(d);else{var p=n[0],c=p.hasAttribute("hidden");try{p.removeAttribute("hidden"),p.select(),document.execCommand("copy")?s():d()}catch(t){d()}finally{if(c&&p.setAttribute("hidden","hidden"),window.getSelection)try{window.getSelection().removeAllRanges()}catch(t){}}}}}}),t(document).on("click","[data-group-suggestion-apply]",function(a){a.preventDefault();var e=t(this),n=e.closest("[data-group-suggestion]"),i=e.closest(".juntaplay-groups__create-modal, .juntaplay-groups__create-card").find("form").first();if(n.length&&i.length){var o=(n.data("title")||"").toString(),r=parseFloat((n.data("amount")||"").toString().replace(",",".")),l=(n.data("category")||"").toString(),s=(n.data("description")||"").toString();o&&i.find('[name="jp_profile_group_service"]').val(o).trigger("input");var d=i.find('[name="jp_profile_group_name"]');if(d.length&&!t.trim((d.val()||"").toString())&&d.val("Grupo "+o).trigger("input"),s){var p=i.find('[name="jp_profile_group_description"]');p.length&&!t.trim((p.val()||"").toString())&&p.val(s).trigger("input")}Number.isFinite(r)&&r>0&&i.find('[name="jp_profile_group_price"]').val(y(r)).trigger("input"),l&&i.find('[name="jp_profile_group_category"]').val(l).trigger("change");var c=i.find("[data-group-promo-toggle]");c.length&&(c.prop("checked",!1),w(c));var u=i.find('[name="jp_profile_group_price_promo"]');u.length&&u.val("");var f=i.find('[name="jp_profile_group_member_price"]');f.length&&f.val("").data("group-member-generated","yes"),_(i),j(i)}}),t(document.body).on("updated_wc_div updated_cart_totals wc_fragments_refreshed",function(){t(".juntaplay-quota-selector").each(function(){u(t(this))})}),t(function(){t("[data-groups]").each(function(){m(t(this))}),t("[data-group-member-input]").each(function(){var a=t(this);"yes"===a.data("group-member-generated")?a.removeData("jpDirty"):a.val()&&a.data("jpDirty",!0),_(a.closest("form"))}),t("[data-group-promo-toggle]").each(function(){var a=t(this);a.is(":checked")&&a.closest("form").find("[data-group-promo-field]").removeClass("is-hidden")}),t("[data-group-share]").each(function(){j(t(this).closest("form"))})}),t(document).on("click",".juntaplay-auth__switch-btn",function(a){a.preventDefault();var e=t(this);if(!e.is(":disabled")){var n=e.data("target");b(e.closest(".juntaplay-auth"),n)}}),t(function(){t(".juntaplay-auth").each(function(){var a=t(this);b(a,a.data("active-view"))})});var x=null,C=null;function S(a,e,n){var i=n&&n.length?n:null,o=i&&i.length?i.closest(".juntaplay-auth"):t(".juntaplay-auth").first();if(o.length)if("success"!==a&&e){i&&i.length||(i=o.find(".juntaplay-auth__pane.is-active").first()).length||(i=o.find(".juntaplay-auth__pane--login").first());var r=i.find(".juntaplay-auth__form").first(),l=i.find("[data-jp-auth-social-error]").first();if(r.length){l.length||(l=t('<div class="juntaplay-auth__alert" role="alert" data-jp-auth-social-error><ul></ul></div>'),r.prepend(l));var s=l.find("ul").first();s.length||(s=t("<ul></ul>"),l.empty().append(s)),s.empty().append(t("<li></li>").text(e))}else window.alert(e)}else o.find("[data-jp-auth-social-error]").remove();else"error"===a&&e&&window.alert(e)}function k(t){if(t&&t.length){t.removeClass("is-open");var a=t.find("[data-guest-menu-toggle]").first();a.length&&a.attr("aria-expanded","false");var e=t.find("[data-guest-menu-panel]").first();e.length&&e.attr("aria-hidden","true")}}function P(){return window.matchMedia?window.matchMedia("(max-width: 768px)").matches:!!window.innerWidth&&window.innerWidth<=768}function I(t){if(t&&t.length){t.removeClass("is-menu-open");var a=t.find("[data-profile-menu-toggle]").first(),e=a.length>0;e&&a.attr("aria-expanded","false");var n=t.find("[data-profile-menu]").first();n.length&&(e?n.attr("aria-hidden",P()?"true":"false"):n.attr("aria-hidden","false"));var i=t.find("[data-profile-menu-overlay]").first();i.length&&i.attr("aria-hidden","true")}}function D(a,e,n){if(a&&e){var i=a.find("[data-profile-category-toggle]"),o=a.find("[data-profile-category-panel]");i.each(function(){var a=t(this),n=a.data("profileCategoryToggle")===e||a.attr("data-profile-category-toggle")===e;a.toggleClass("is-active",n),a.attr("aria-pressed",n?"true":"false")}),o.each(function(){var a=t(this),n=a.data("profileCategoryPanel")===e;a.toggleClass("is-active",n),a.attr("aria-hidden",n?"false":"true")});var r=o.filter('[data-profile-category-panel="'+e+'"]');if(r.length){if(!n){var l=r.find("[data-profile-tab-toggle].is-active").first();l.length&&(n=l.data("profileTabToggle")||"")}if(!n){var s=r.find("[data-profile-tab-panel]").first();s.length&&(n=s.data("profileTabPanel")||"")}!function(a,e,n){if(a&&e){var i=a.find('[data-profile-category-panel="'+e+'"]');if(i.length){var o=i.find("[data-profile-tab-panel]"),r=i.find("[data-profile-tab-toggle]");!n&&o.length&&(n=o.first().data("profileTabPanel")||""),r.each(function(){var a=t(this),e=a.data("profileTabToggle")===n;a.toggleClass("is-active",e),a.attr("aria-selected",e?"true":"false")}),o.each(function(){var a=t(this),e=a.data("profileTabPanel")===n;a.toggleClass("is-active",e),a.attr("aria-hidden",e?"false":"true")})}}}(a,e,n)}}}t(document).on("click","[data-jp-auth-popup]",function(a){var e=t(this),n=(e.attr("href")||"").toString(),i=e.closest(".juntaplay-auth__pane");if(n&&"#"!==n){a.preventDefault(),C=i.length&&i.data("pane")||null,S("success","",i);var o=n,r=(e.data("jpAuthContext")||"").toString();try{var l=new URL(n,window.location.origin);l.searchParams.set("popup","1"),r&&l.searchParams.set("context",r),o=l.toString()}catch(t){o=n+(-1===n.indexOf("?")?"?popup=1":"&popup=1"),r&&(o+="&context="+encodeURIComponent(r))}var s=void 0!==window.screenLeft?window.screenLeft:window.screenX,d=void 0!==window.screenTop?window.screenTop:window.screenY,p=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=Math.max(s+(p-520)/2,0),f=Math.max(d+(c-640)/2,0);if((x=window.open(o,"juntaplaySocialLogin","width=520,height=640,left="+u+",top="+f+",status=0,toolbar=0,menubar=0,location=0,resizable=1,scrollbars=1"))&&!x.closed)try{x.focus()}catch(t){}else window.location.href=o}}),t(window).on("message",function(a){var e=(a.originalEvent||a).data;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=null}if(e&&"object"==typeof e&&"juntaplay-social"===e.source){if(x&&!x.closed)try{x.close()}catch(t){}if(x=null,"success"===e.status){S("success",""),C=null;var n="string"==typeof e.redirect?e.redirect:"",i=t("[data-auth-modal]");return i.length&&G(i),void(n?window.location.href=n:window.location.reload())}if("error"===e.status&&"string"==typeof e.message&&e.message){var o=null,r=t(".juntaplay-auth").first(),l="";"string"==typeof e.context&&e.context?l=e.context:C&&(l=C),r.length&&l&&(o=r.find('.juntaplay-auth__pane[data-pane="'+l+'"]').first()),S("error",e.message,o),C=null}}}),t(document).on("click","[data-jp-auth-open]",function(a){var e=t(this),n=t("#jp-auth-modal-template"),i=t("[data-auth-modal]");if(a.preventDefault(),n.length&&i.length){var o=(e.data("jpAuthOpen")||"login").toString(),r=B("#jp-auth-modal-template");if(r&&r.length){F(i,r);var l=i.find(".juntaplay-auth").first();l.length&&o&&b(l,o)}}else{var s=e.attr("href");s&&(window.location.href=s)}}),t(document).on("click","[data-guest-menu-toggle]",function(a){a.preventDefault();var e=t(this),n=e.closest("[data-guest-menu]");if(n.length){var i=n.hasClass("is-open");if(t("[data-guest-menu].is-open").each(function(){k(t(this))}),!i){n.addClass("is-open"),e.attr("aria-expanded","true");var o=n.find("[data-guest-menu-panel]").first();o.length&&o.attr("aria-hidden","false")}}}),t(document).on("click","[data-guest-menu-panel] a, [data-guest-menu-panel] button",function(){k(t(this).closest("[data-guest-menu]"))}),t(document).on("click",function(a){t(a.target).closest("[data-guest-menu]").length||t("[data-guest-menu].is-open").each(function(){k(t(this))})}),t(function(){var a=t("#jp-auth-modal-template");if(a.length){var e=(a.data("autoOpen")||"").toString();e&&window.requestAnimationFrame(function(){var a=t('[data-jp-auth-open="'+e+'"]').first();if(a.length)a.trigger("click");else{var n=t("[data-auth-modal]");if(n.length){var i=B("#jp-auth-modal-template");if(i&&i.length){F(n,i);var o=n.find(".juntaplay-auth").first();o.length&&b(o,e)}}}})}}),t(function(){t("[data-guest-menu-panel]").attr("aria-hidden","true")}),t(document).on("click","[data-profile-category-toggle]",function(a){a.preventDefault();var e=t(this),n=e.attr("data-profile-category-toggle")||"",i=e.closest("[data-profile]");D(i,n),I(i)}),t(document).on("click","[data-profile-quick]",function(a){a.preventDefault();var e=t(this),n=e.attr("data-profile-quick-category")||"",i=e.attr("data-profile-quick-tab")||"",o=e.closest("[data-profile]");n&&(D(o,n,i),I(o))}),t(document).on("click","[data-profile-tab-toggle]",function(a){a.preventDefault();var e=t(this),n=e.attr("data-profile-tab-toggle")||"",i=e.attr("data-profile-tab-category")||"",o=e.closest("[data-profile]");i||(i=o.find("[data-profile-category-toggle].is-active").first().attr("data-profile-category-toggle")||"");D(o,i,n),I(o)}),t(document).on("click","[data-profile-menu-toggle]",function(a){a.preventDefault();var e=t(this),n=e.closest("[data-profile]");if(n.length){var i=n.hasClass("is-menu-open");n.toggleClass("is-menu-open",!i),e.attr("aria-expanded",i?"false":"true");var o=n.find("[data-profile-menu]").first();if(o.length){var r=P();!i&&r?o.attr("aria-hidden","false"):r?o.attr("aria-hidden","true"):o.attr("aria-hidden","false")}var l=n.find("[data-profile-menu-overlay]").first();l.length&&(!i&&P()?l.attr("aria-hidden","false"):l.attr("aria-hidden","true"))}}),t(document).on("click","[data-profile-menu-close]",function(a){a.preventDefault(),I(t(this).closest("[data-profile]"))}),t(document).on("click","[data-profile-menu-overlay]",function(a){a.preventDefault(),I(t(this).closest("[data-profile]"))}),t(document).on("click","[data-profile-menu-link]",function(){I(t(this).closest("[data-profile]"))}),t(document).on("keydown",function(a){if(a.key&&"escape"===a.key.toLowerCase()||27===a.keyCode){var e=t("[data-guest-menu].is-open").first();if(e.length)return void k(e);var n=t("[data-profile].is-menu-open").first();n.length&&I(n)}}),t(function(){if(t("[data-profile-menu-overlay]").attr("aria-hidden","true"),t("[data-profile]").each(function(){var a=t(this),e=a.find("[data-profile-menu]").first();e.length&&(a.find("[data-profile-menu-toggle]").length>0?e.attr("aria-hidden",P()?"true":"false"):e.attr("aria-hidden","false"));var n=a.find("[data-profile-category-toggle].is-active").first().attr("data-profile-category-toggle")||"";if(!n&&a.find("[data-profile-category-toggle]").length&&(n=a.find("[data-profile-category-toggle]").first().attr("data-profile-category-toggle")||""),n){var i=a.find('[data-profile-category-panel="'+n+'"] [data-profile-tab-toggle].is-active').first();D(a,n,i.attr("data-profile-tab-toggle")||"")}}),window.matchMedia){var a=window.matchMedia("(max-width: 768px)"),e=function(e){var n=e;n&&"boolean"==typeof n.matches||(n=a);var i=!(!n||"boolean"!=typeof n.matches||!n.matches);t("[data-profile]").each(function(){var a=t(this),e=a.find("[data-profile-menu]").first(),n=a.find("[data-profile-menu-toggle]").length>0;if(e.length)if(n){var o=i&&!a.hasClass("is-menu-open");e.attr("aria-hidden",o?"true":"false")}else e.attr("aria-hidden","false");var r=a.find("[data-profile-menu-overlay]").first();if(r.length)if(n){var l=!a.hasClass("is-menu-open")||!i;r.attr("aria-hidden",l?"true":"false")}else r.attr("aria-hidden","true")})};"function"==typeof a.addEventListener?a.addEventListener("change",e):"function"==typeof a.addListener&&a.addListener(e),e(a)}}),t(document).on("click",".juntaplay-profile__edit",function(a){a.preventDefault();var e=t(this),n=e.closest(".juntaplay-profile__row"),i=e.closest(".juntaplay-profile"),o=n.hasClass("is-editing");if(o||(i.find(".juntaplay-profile__row").removeClass("is-editing"),i.find(".juntaplay-profile__form").attr("aria-hidden","true"),i.find(".juntaplay-profile__edit").attr("aria-expanded","false")),n.toggleClass("is-editing",!o),n.find(".juntaplay-profile__form").attr("aria-hidden",o?"true":"false"),e.attr("aria-expanded",o?"false":"true"),!o){var r=n.find(".juntaplay-form__input").first();r.length&&setTimeout(function(){r.trigger("focus")},20)}}),t(document).on("click",".juntaplay-profile__cancel",function(a){a.preventDefault();var e=t(this).closest(".juntaplay-profile__row");e.removeClass("is-editing"),e.find(".juntaplay-profile__form").attr("aria-hidden","true"),e.find(".juntaplay-profile__edit").attr("aria-expanded","false")});var A={};function N(t){return(t||"").toString().replace(/\D+/g,"").slice(0,8)}function J(t){var a=N(t);return 8===a.length?a.replace(/(\d{5})(\d{3})/,"$1-$2"):t||""}function L(t){t.length&&t[0].setCustomValidity&&t[0].setCustomValidity(""),t.removeAttr("data-jp-cep-error")}function T(t,a){t.length&&t[0].setCustomValidity&&(t[0].setCustomValidity(a),"function"==typeof t[0].reportValidity&&t[0].reportValidity()),t.attr("data-jp-cep-error","1")}function E(a,e){var n=a.closest("form");if(n.length){var i=[];e.logradouro&&i.push(e.logradouro),e.complemento&&i.push(e.complemento),e.bairro&&i.push(e.bairro);var o=i.join(" - ");o&&n.find('[data-jp-cep-target="address"]').each(function(){t(this).val(o).trigger("change")}),e.localidade&&n.find('[data-jp-cep-target="city"]').val(e.localidade).trigger("change"),e.uf&&n.find('[data-jp-cep-target="state"]').val(e.uf.toUpperCase()).trigger("change");var r=n.find('[data-jp-cep-target="country"]').first();if(r.length){var l=(r.val()||"").toString();l&&!/^(br|brasil|brazil)$/i.test(l)||r.val("Brasil").trigger("change")}e.cep&&a.val(J(e.cep)).trigger("change")}}function M(t,a){var e=t.data("defaultLabel"),n=t.data("openLabel");e||(e=t.text(),t.data("defaultLabel",e)),n||(n=e),a?t.addClass("is-active").text(n):t.removeClass("is-active").text(e)}function R(t,a){var n=(a||"spotlight").toString(),i=["juntaplay-group-card"];"spotlight"===n?i.push("juntaplay-group-card--spotlight"):"compact"===n&&i.push("juntaplay-group-card--compact");var l,s,p=parseInt(t.id,10)||0,c=t.coverUrl||d||"",u=r(t.coverAlt||t.title||t.service||e("Capa do grupo","juntaplay")),f=t.title||t.service||e("Grupo disponível","juntaplay"),g=(l="compact"===n?28:32,(s=String(f||"")).length<=l?s:s.slice(0,Math.max(0,l-1))+"…"),h=f?' title="'+r(f)+'"':"",m='<h3 class="juntaplay-group-card__title"'+h+">"+r(g)+"</h3>",v="number"==typeof t.memberPrice?t.memberPrice:"number"==typeof t.price?t.price:null,y=null!==v?o(v,"BRL","pt-BR"):t.memberPriceLabel||t.priceLabel||"",j=y?'<span class="juntaplay-group-card__price">'+r(y)+"</span>":"",_=(t.slotsBadgeVariant||"").toString(),w="juntaplay-group-card__slots-badge";if(_&&"default"!==_){var b=_.replace(/[^a-z0-9_-]/gi,"");b&&(w+=" is-"+b)}var x=t.slotsBadge?'<span class="'+w+'">'+r(t.slotsBadge)+"</span>":"",C=(t.availabilityState||"").toString(),S=t.buttonLabel||e("full"===C?"Aguardando membros":"Confira","juntaplay"),k=t.permalink?r(t.permalink):"#",P=" data-jp-group-open",I=" data-group-card";p&&(P+=' data-group-id="'+p+'"',I+=' data-group-id="'+p+'"');var D=t.ctaUrl||t.permalink||t.poolLink||"",A=!!t.ctaDisabled;if(D||(D=k),"compact"===n){var N=t.categoryLabel||"",J=N?'<span class="juntaplay-group-card__category">'+r(N)+"</span>":"",L=t.service||"",T="";L&&L!==N&&(T='<span class="juntaplay-group-card__service">'+r(L)+"</span>");var E=[];x&&E.push(x),j&&E.push(j);var M=E.length?'<div class="juntaplay-group-card__meta">'+E.join("")+"</div>":"",R='<span class="juntaplay-group-card__cta-text">'+r(S||e("Ver detalhes","juntaplay"))+'<span class="juntaplay-group-card__cta-icon" aria-hidden="true"><svg viewBox="0 0 24 24" focusable="false" aria-hidden="true"><path d="M5 12h14M13 6l6 6-6 6" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg></span></span>';return'<article class="'+i.join(" ")+'"'+I+'><a class="juntaplay-group-card__link" href="'+k+'"'+P+'><figure class="juntaplay-group-card__cover"><img src="'+r(c)+'" alt="'+u+'" loading="lazy" width="320" height="220" /></figure><div class="juntaplay-group-card__body">'+J+m+T+M+R+"</div></a></article>"}var O="juntaplay-group-card__cta";"full"===C&&(O+=" is-disabled"),A&&-1===O.indexOf("is-disabled")&&(O+=" is-disabled");M="";(x||j)&&(M='<div class="juntaplay-group-card__meta">'+x+j+"</div>");var B=' class="'+O+'"';return B+=A?' aria-disabled="true"':P,'<article class="'+i.join(" ")+'"'+I+'><figure class="juntaplay-group-card__cover"><a class="juntaplay-group-card__media" href="'+k+'"'+P+'><img src="'+r(c)+'" alt="'+u+'" loading="lazy" width="495" height="370" /></a></figure><div class="juntaplay-group-card__body"><div class="juntaplay-group-card__heading"><h3 class="juntaplay-group-card__title"'+h+'><a href="'+k+'"'+P+">"+r(g)+"</a></h3></div>"+M+"<a"+B+' href="'+r(D)+'">'+r(S)+"</a></div></article>"}function O(a){if(a.length&&!a.data("jpCoverPickerReady")){var n;a.data("jpCoverPickerReady",!0),a.attr("data-group-cover-ready","1");var i=(a.data("placeholder")||"").toString(),o=parseInt(a.data("mediaAuthor"),10)||0;!o&&window.JuntaPlay&&window.JuntaPlay.currentUser&&window.JuntaPlay.currentUser.id&&(o=parseInt(window.JuntaPlay.currentUser.id,10)||0);var r=(a.data("uploadContext")||"").toString();r||(r="profile-group-cover");var l=null,s=null,p=a.find("[data-group-cover-input]"),c=a.find("[data-group-cover-preview]"),u=a.find("[data-group-cover-remove]");a.on("click","[data-group-cover-select]",function(t){t.preventDefault();var a=v();a?(g(a),a.open()):window.alert(e("Não foi possível carregar a biblioteca de mídia agora.","juntaplay"))}),a.on("click","[data-group-cover-remove]",function(t){t.preventDefault(),y("","")})}function f(t){if(t&&o&&"function"==typeof t.state){var a=t.state();if(a&&"function"==typeof a.get){var e=a.get("library");e&&e.props&&"function"==typeof e.props.set&&(e.props.set("author",o),e.props.set("author__in",[o]),"function"==typeof e.props.unset&&e.props.unset("author__not_in"),e.props.set("uploadedTo",null),e.props.set("juntaplay_group_cover",r))}}}function g(a){if(a&&a.uploader){var e=a.uploader;if("undefined"!=typeof wp&&wp.Uploader&&wp.Uploader.defaults&&(null===l&&(l=t.extend({},wp.Uploader.defaults.multipart_params||{})),wp.Uploader.defaults.multipart_params=t.extend({},wp.Uploader.defaults.multipart_params||{},{juntaplay_group_cover:r}),o&&(wp.Uploader.defaults.multipart_params.author=o)),"undefined"!=typeof wp&&wp.media&&wp.media.model&&wp.media.model.settings){var n=wp.media.model.settings.post||{};null===s&&(s=t.extend({},n)),wp.media.model.settings.post=t.extend({},n,{juntaplay_group_cover:r}),o&&(wp.media.model.settings.post.author=o)}if(e.options&&e.options.uploader&&(e.options.uploader.params=e.options.uploader.params||{},e.options.uploader.params.juntaplay_group_cover=r,o&&(e.options.uploader.params.author=o)),e.uploader&&"function"==typeof e.uploader.param&&(e.uploader.param("juntaplay_group_cover",r),o&&e.uploader.param("author",o)),"function"==typeof a.state){var i=a.state();if(i&&"function"==typeof i.get){var d=i.get("library");d&&d.props&&"function"==typeof d.props.set&&(d.props.set("juntaplay_group_cover",r),o&&(d.props.set("author",o),d.props.set("author__in",[o]),"function"==typeof d.props.unset&&d.props.unset("author__not_in")))}}}}function h(t){if(t&&t.toolbar&&"function"==typeof t.toolbar.get){var a=t.toolbar.get("select");a&&(a.model&&"function"==typeof a.model.set&&a.model.set("disabled",!1),a.$el&&a.$el.find(".media-button-select").prop("disabled",!1))}}function m(t,a){if(t){var e="function"==typeof t.state?t.state():null;if(e&&"function"==typeof e.get){var n=e.get("library"),i=e.get("selection"),o=t.content&&"function"==typeof t.content.get?t.content.get():null,l=o&&o.collection?o.collection:null,s=null,d=null;a&&("function"==typeof a.get?(s=a,d=a.get("id")||a.id||null):"object"==typeof a&&null!==a?d=void 0!==a.id?a.id:null:"number"!=typeof a&&"string"!=typeof a||(d=a)),p(n),l&&l!==n&&p(l),s||null===d||(n&&"function"==typeof n.get&&(s=n.get(d)||s),s&&s.get&&s.get("id")||!l||"function"!=typeof l.get||(s=l.get(d)||s)),s||(n&&"function"==typeof n.last&&(s=n.last()),s&&s.get&&s.get("id")||!l||"function"!=typeof l.last||(s=l.last()),!s&&n&&"function"==typeof n.at&&(s=n.at(0)),!s&&l&&"function"==typeof l.at&&(s=l.at(0))),s&&i&&"function"==typeof i.reset&&i.reset([s]),h(t)}}function p(t){t&&(t.props&&"function"==typeof t.props.set&&(t.props.set("ignore",Date.now()),r&&t.props.set("juntaplay_group_cover",r)),"function"==typeof t.fetch?t.fetch():"function"==typeof t.more?t.more({reset:!0}):"function"==typeof t._requery&&t._requery(!0))}}function v(){if("undefined"==typeof wp||!wp.media||"function"!=typeof wp.media)return null;if(n&&"function"==typeof n.open)return n;var t,a={title:e("Escolher capa do grupo","juntaplay"),button:{text:e("Usar esta imagem","juntaplay")},multiple:!1,library:{type:"image"},uploader:{params:{juntaplay_group_cover:r}}};o&&(a.library.author=o,a.uploader.params.author=o),n=wp.media(a),(t=n)&&"undefined"!=typeof wp&&wp.media&&wp.media.events&&(t.jpUploaderCompleteHandler&&"function"==typeof wp.media.events.off&&wp.media.events.off("uploader:complete",t.jpUploaderCompleteHandler),t.jpUploaderCompleteHandler=function(){for(var a=Array.prototype.slice.call(arguments||[]),e=null,n=0;n<a.length;n+=1){var i=a[n];if(i){if("function"==typeof i.get){e=i;break}if("object"==typeof i&&void 0!==i.id){e=i;break}}}m(t,e)},"function"==typeof wp.media.events.on&&wp.media.events.on("uploader:complete",t.jpUploaderCompleteHandler));var p=function(){g(n),o&&f(n)};return n.on("ready",p),n.on("open",p),o&&(n.on("library:rendered",function(){f(n)}),n.on("content:render:browse",function(){f(n)})),n.on("content:render:upload",function(){g(n)}),n.on("upload:complete",function(t){window.setTimeout(function(){if(n&&"function"==typeof n.state){var a=n.state();if(a&&"function"==typeof a.get){var e=a.get("selection"),o=a.get("library");!function(t,a){if("function"==typeof a){var e=null,n=null;if(t&&"function"==typeof t.get?(e=t.get("id")||t.id||null,n=t):t&&"object"==typeof t&&null!==t&&(e=void 0!==t.id?t.id:null),null!==e&&"undefined"!=typeof wp&&wp.media&&wp.media.model&&wp.media.model.Attachment&&"function"==typeof wp.media.model.Attachment.get&&(n=wp.media.model.Attachment.get(e)),n&&"function"==typeof n.once&&(!n.get||!n.get("url")))return n.once("sync",function(){a(n,e)}),void("function"==typeof n.fetch&&n.fetch());a(n||null,e)}}(t,function(t,a){if(!t&&null!==a&&o&&"function"==typeof o.get&&(t=o.get(a)||t),t&&o&&"function"==typeof o.add){var r=!1;"function"==typeof o.get&&(r=!!(o.get(t)||null!==a&&o.get(a))),r||o.add(t)}if(e&&t&&"function"==typeof e.reset&&e.reset([t]),t&&"function"==typeof t.toJSON){var l=t.toJSON();if(l&&void 0!==l.id){var s=l.url||l.sizes&&l.sizes.full&&l.sizes.full.url||i||d||"";y(l.id,s)}}m(n,t||a)})}}},120)}),n.on("upload:success",function(){h(n)}),n.on("close",function(){"undefined"!=typeof wp&&wp.Uploader&&wp.Uploader.defaults&&l&&(wp.Uploader.defaults.multipart_params=l),l=null,"undefined"!=typeof wp&&wp.media&&wp.media.model&&wp.media.model.settings&&null!==s&&(wp.media.model.settings.post=s),s=null,"undefined"!=typeof wp&&wp.media&&wp.media.events&&"function"==typeof wp.media.events.off&&n.jpUploaderCompleteHandler&&wp.media.events.off("uploader:complete",n.jpUploaderCompleteHandler)}),n.on("select",function(){var t=n.state().get("selection").first();t&&y((t=t.toJSON()).id||"",t.url||i||d||"")}),p(),n}function y(t,a){var e=t?t.toString():"",n=a||i||d;if(p.val(e),c.length){c.css("background-image",n?"url("+n+")":"none");var o=c.find("img");o.length&&o.attr("src",n||d||"")}u.length&&u.prop("disabled",!e)}}function B(a){if(!a)return null;var e=document.querySelector(a);if(!e)return null;if("template"===(e.tagName?e.tagName.toLowerCase():"")){var n=e.content?e.content.cloneNode(!0):null;if(!n)return null;var i=document.createElement("div");return i.appendChild(n),t(i).children()}return t(e).clone(!0)}function F(a,e){if(a.length&&e&&e.length){var n=a.find("[data-modal-content]");n.empty().append(e),a.removeAttr("hidden").addClass("is-open").attr("aria-hidden","false"),t("body").addClass("juntaplay-modal-open"),setTimeout(function(){var t=n.find("input, select, textarea, button, a[href]").filter(":visible").first();t.length&&t.trigger("focus")},30)}}function G(a){a.length&&(a.removeClass("is-open").attr("aria-hidden","true").attr("hidden","hidden"),a.find("[data-modal-content]").empty(),t(".juntaplay-modal.is-open").length||t("body").removeClass("juntaplay-modal-open"))}function U(){var a="#jp-group-create-template",e=t(a);if(e.length){var n=t("[data-group-create-modal]");if(n.length){var i=e.data("loadingText");"string"==typeof i&&i.length||(i="Carregando formulário...");var o=t('<div class="juntaplay-modal__loading" role="status" aria-live="polite"></div>');o.append('<span class="juntaplay-spinner" aria-hidden="true"></span>'),o.append(t("<p></p>").text(i)),F(n,o);var r=n.find("[data-modal-content]");window.requestAnimationFrame(function(){var t=B(a);t&&t.length&&(r.empty().append(t),O(n.find("[data-group-cover]")),e.attr("data-auto-open","0"),setTimeout(function(){var t=n.find("input, select, textarea").filter(":visible").first();t.length&&t.trigger("focus")},40))})}}}function q(t){var a=B("#jp-group-success-template");if(!a||!a.length)return null;var n=(t&&t.heading?t.heading:e("Grupo cadastrado com sucesso!","juntaplay")).toString(),i=(t&&t.body?t.body:e("Aguarde que nossa equipe vai validar e você será notificado.","juntaplay")).toString(),o=t&&t.image?t.image.toString():"",l=t&&t.redirect?t.redirect.toString():"",s=a.find("[data-group-success-heading]");s.length&&s.text(n);var d=a.find("[data-group-success-body]");d.length&&d.text(i);var p=a.find("[data-group-success-media]"),c=a.find("[data-group-success-image]");c.length&&o?c.attr("src",o).attr("alt",n):p.length&&p.remove();var u,f=""!==l.trim()?l:"https://www.agenciadigitalsaopaulo.com.br/juntaplay/grupos",g=a.find("[data-group-success-cta]");if(g.length){var h=f?(u=(f||"").toString().trim())?'<a class="elementor-button elementor-button-link elementor-size-sm" href="'+r(u)+'"><span class="elementor-button-content-wrapper"><span class="elementor-button-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="currentColor"><path d="M15.5553 0.670898H5.77756C5.53189 0.670898 5.3331 0.86969 5.3331 1.11536C5.3331 1.36102 5.53189 1.55982 5.77756 1.55982H14.4824L0.129975 15.9122C-0.0436504 16.0859 -0.0436504 16.3671 0.129975 16.5407C0.216766 16.6275 0.330516 16.6709 0.444225 16.6709C0.557933 16.6709 0.671641 16.6275 0.758475 16.5407L15.1109 2.18827V10.8931C15.1109 11.1388 15.3097 11.3376 15.5553 11.3376C15.801 11.3376 15.9998 11.1388 15.9998 10.8931V1.11536C15.9998 0.86969 15.801 0.670898 15.5553 0.670898Z" fill="currentColor"></path></svg></span><span class="elementor-button-text">'+r(e("Ver + Grupos","juntaplay"))+"</span></span></a>":"":"";h?g.html(h):g.remove()}return a}function Q(){var a=t("[data-group-success-state]").first();a.length&&(function(a){var e=t("[data-group-success-modal]");if(!e.length)return!1;var n=q(a||{});return!(!n||!n.length||(F(e,n),0))}({heading:(a.data("successHeading")||"").toString(),body:(a.data("successBody")||"").toString(),image:(a.data("successImage")||"").toString(),redirect:(a.data("successRedirect")||"").toString()})&&a.remove())}t(document).on("input",'[data-jp-cep-field="postcode"]',function(){L(t(this))}),t(document).on("blur",'[data-jp-cep-field="postcode"]',function(){var a=t(this),n=N(a.val());8===n.length&&function(t,a){if(a&&8===a.length){if(A[a])return L(t),void E(t,A[a]);t.data("jpCepLoading")!==a&&(t.data("jpCepLoading",a),t.attr("aria-busy","true"),fetch("https://viacep.com.br/ws/"+a+"/json/").then(function(t){if(!t.ok)throw new Error("network");return t.json()}).then(function(n){t.removeAttr("aria-busy"),t.removeData("jpCepLoading"),n&&!n.erro?(A[a]=n,L(t),E(t,n)):T(t,e("CEP não encontrado. Confira os números digitados.","juntaplay"))}).catch(function(){t.removeAttr("aria-busy"),t.removeData("jpCepLoading"),T(t,e("Não foi possível validar o CEP informado.","juntaplay"))}))}}(a,n),a.val(J(n)).trigger("change")}),t(document).on("click","[data-network-detail]",function(a){a.preventDefault();var e=t(this),n=e.closest(".juntaplay-network-card");if(n.length){var i=n.hasClass("is-expanded"),o=n.find("[data-network-groups]").first();n.toggleClass("is-expanded",!i),o.length&&(i?o.attr("hidden","hidden"):o.removeAttr("hidden"));var r=e.data("defaultLabel")||e.attr("data-default-label")||e.text(),l=e.data("openLabel")||e.attr("data-open-label")||r;e.text(i?r:l)}}),t(document).on("click","[data-group-complaint-toggle]",function(a){a.preventDefault();var e=t(this),n=e.attr("data-target")||"",i=n?t("#"+n):e.closest("[data-group-complaint]").find("[data-group-complaint-form]");if(i.length){var o=i.hasClass("is-hidden");i.toggleClass("is-hidden",!o).toggleClass("is-open",o),e.attr("aria-expanded",o?"true":"false"),M(e,o)}}),t(document).on("click","[data-group-complaint-close]",function(a){a.preventDefault();var e=t(this).closest("[data-group-complaint-form]");if(e.length){e.removeClass("is-open").addClass("is-hidden");var n=e.attr("id");if(n){var i=t('[data-group-complaint-toggle][data-target="'+n+'"]');i.length&&(i.attr("aria-expanded","false"),M(i,!1))}}}),t(document).on("change","[data-group-complaint-files]",function(){var a=t(this),e=this.files,n=a.closest("[data-group-complaint]").find("[data-group-complaint-preview]");n.length&&(n.empty(),e&&e.length&&Array.prototype.forEach.call(e,function(a){var e=a.size||0,i=a.name;e>0&&(i+=" ("+function(t){if(!t||t<=0)return"";var a=["B","KB","MB","GB"],e=0,n=t;for(;n>=1024&&e<a.length-1;)n/=1024,e+=1;return n.toFixed(0===e?0:1)+" "+a[e]}(e)+")"),t("<li />").text(i).appendTo(n)}))}),function(){var a=t("[data-complaint-center]");function e(){return window.matchMedia("(min-width: 1024px)").matches}function n(){a.each(function(){var a=t(this),n="true"===(a.attr("data-complaint-open")||"").toString().toLowerCase();e()?a.addClass("is-detail-open"):a.toggleClass("is-detail-open",n)})}a.length&&(n(),t(window).on("resize.juntaplayComplaints",function(){n()}),t(document).on("click","[data-complaint-drawer-toggle]",function(a){a.preventDefault();var n=t(this).closest("[data-complaint-center]");if(n.length){var i=(n.attr("data-complaint-open")||"").toString().toLowerCase();!function(t,a){t&&t.length&&(t.attr("data-complaint-open",a?"true":"false"),e()?t.addClass("is-detail-open"):t.toggleClass("is-detail-open",!!a))}(n,!("true"===i))}}),t(document).on("click","[data-complaint-submit]",function(){var a=(t(this).attr("data-complaint-submit")||"").toString();if(a){var e=t(this).closest("form");if(e.length){var n=e.find("[data-complaint-action]");n.length&&n.val(a)}}}))}(),t(function(){t(".juntaplay-profile__row").each(function(){var a=t(this),e=a.hasClass("is-editing");a.find(".juntaplay-profile__form").attr("aria-hidden",e?"false":"true"),a.find(".juntaplay-profile__edit").attr("aria-expanded",e?"true":"false")}),t("[data-jp-wallet]").each(function(){!function(a){if(!a.length||void 0===window.JuntaPlay)return;var i=!1,o=a.find("[data-jp-credit-details]"),l=o.find("[data-jp-credit-details-body]"),s=o.find("[data-jp-credit-details-title]"),d=a.find("[data-jp-credit-load-more]"),p=a.find("[data-jp-credit-countdown]"),c=a.find("[data-jp-credit-deposit]"),u=c.find("[data-jp-credit-deposit-form]"),f=u.find('[name="jp_profile_deposit_amount"]'),g=u.find("[data-jp-credit-deposit-error]"),h=1===parseInt(a.data("deposit-enabled"),10),m=parseFloat(a.data("deposit-min"))||0,v=parseFloat(a.data("deposit-max"))||0,y=!1,j=a.find("[data-jp-credit-items]"),_=a.find("[data-jp-credit-empty]"),w=a.find("[data-jp-credit-filter]"),b=a.find("[data-jp-credit-range]"),x=a.find("[data-jp-credit-search]"),C=a.find("[data-jp-credit-refresh]"),S=_.length?_.data("default-message")||_.text():"",k=e("Nenhuma movimentação corresponde aos filtros selecionados.","juntaplay"),P="all",I=w.filter(".is-active").first();if(I.length){var D=I.data("jp-credit-filter");null!=D&&""!==D&&(P=D.toString())}function A(e,n){var i=t("<div/>").addClass("juntaplay-wallet__alert juntaplay-wallet__alert--"+e).text(n||"");a.find(".juntaplay-wallet__withdraw .juntaplay-wallet__alert").remove(),a.find(".juntaplay-wallet__withdraw").prepend(i)}function N(t){var a=t.id||0,n=t.type||"",i=t.status||"",o=t.type_label||"",l=t.status_label||"",s=t.amount_formatted||t.amount||"",d=t.time||"",p=t.reference||"",c=parseInt(t.timestamp,10);isFinite(c)||(c=0);var u=t.search||"";if(!u){var f=[o,l,p,d].filter(Boolean).join(" ");u=f?f.toLowerCase():""}var g="";return p&&(g=e("Referência: %s","juntaplay").replace("%s",p)),['<li class="juntaplay-wallet__item" data-transaction="'+r(a)+'" data-type="'+r(n)+'" data-status="'+r(i)+'" data-time="'+r(c)+'" data-search="'+r(u.toString().toLowerCase())+'">','  <div class="juntaplay-wallet__item-main">','    <strong class="juntaplay-wallet__item-title">'+r(o)+"</strong>",d?'    <span class="juntaplay-wallet__item-meta">'+r(d)+"</span>":"",g?'    <span class="juntaplay-wallet__item-meta juntaplay-wallet__item-ref">'+r(g)+"</span>":"","  </div>",'  <div class="juntaplay-wallet__item-side">',l?'    <span class="juntaplay-wallet__item-status">'+r(l)+"</span>":"",s?'    <span class="juntaplay-wallet__item-amount">'+r(s)+"</span>":"","  </div>","</li>"].filter(Boolean).join("")}function J(t){var e=a.find("[data-jp-credit-total]");if(e.length){var i=parseInt(t,10);isFinite(i)||(i=0);var o=n("%d movimento","%d movimentos",i,"juntaplay");o=o.replace("%d",i).replace("%s",i),e.text(o)}}function L(){if(d.length){var t=parseInt(a.attr("data-page"),10)||1,e=parseInt(a.attr("data-pages"),10)||1;e<=1||t>=e?d.attr("hidden","hidden"):d.removeAttr("hidden")}}function T(){if(!b.length)return 0;var t=parseInt(b.val(),10);return!isFinite(t)||t<=0?0:Math.floor(Date.now()/1e3)-86400*t}function E(a){if(j.length){var e=x.length?(x.val()||"").toString().toLowerCase():"",n=T(),i=0,o=!1;if(j.children(".juntaplay-wallet__item").each(function(){var a=t(this);o=!0;var r=(a.data("type")||"").toString(),l=(a.data("search")||"").toString(),s=parseInt(a.data("time"),10)||0,d="all"===P||r===P,p=!e||-1!==l.indexOf(e);d&&p&&(!n||s>=n)?(a.removeAttr("hidden"),i++):a.attr("hidden","hidden")}),_.length){var r=S;o&&0===i&&(r=k),!o&&a&&(r=S),_.text(r),!o&&a||0===i?_.removeAttr("hidden"):_.attr("hidden","hidden")}L()}else L()}function M(e,n){if(window.JuntaPlay&&window.JuntaPlay.ajax&&!i){i=!0,a.addClass("is-loading");var o={action:"juntaplay_credit_transactions",nonce:window.JuntaPlay.nonce,page:e};P&&"all"!==P&&(o.type=P),t.getJSON(window.JuntaPlay.ajax,o).done(function(t){if(t&&t.success&&t.data){var i=t.data,o=(Array.isArray(i.items)?i.items:[]).map(N).join("");n?o&&j.append(o):j.html(o),void 0!==i.page?a.attr("data-page",i.page):n||a.attr("data-page",e),void 0!==i.pages&&a.attr("data-pages",i.pages),void 0!==i.total&&(a.attr("data-total",i.total),J(i.total)),E(!n)}}).always(function(){i=!1,a.removeClass("is-loading"),L()})}}function R(t){if(t&&o.length){var a=["<dl>"];a.push("<dt>"+(t.type_label||"")+"</dt>"),a.push("<dd>"+(t.amount_formatted||"")+"</dd>"),t.status_label&&(a.push("<dt>"+e("Status","juntaplay")+"</dt>"),a.push("<dd>"+t.status_label+"</dd>")),t.reference&&(a.push("<dt>"+e("Referência","juntaplay")+"</dt>"),a.push("<dd>"+t.reference+"</dd>")),t.time&&(a.push("<dt>"+e("Data","juntaplay")+"</dt>"),a.push("<dd>"+t.time+"</dd>")),t.balance_after&&(a.push("<dt>"+e("Saldo após","juntaplay")+"</dt>"),a.push("<dd>"+t.balance_after+"</dd>")),t.context&&Object.keys(t.context).forEach(function(e){t.context[e]&&(a.push("<dt>"+e+"</dt>"),a.push("<dd>"+t.context[e]+"</dd>"))}),a.push("</dl>"),s.text(t.type_label||e("Detalhes","juntaplay")),l.html(a.join("")),o.removeAttr("hidden")}}function O(){o.attr("hidden","hidden")}function B(){c.length&&(c.removeAttr("hidden").addClass("is-open"),f.length&&f.trigger("focus"))}function F(){c.length&&(c.attr("hidden","hidden").removeClass("is-open"),g.attr("hidden","hidden").text(""),y=!1)}function G(t){g.length?g.text(t||"").removeAttr("hidden"):window.alert(t)}a.on("click","[data-jp-credit-details-close]",function(){O()}),a.on("click",".juntaplay-wallet__item",function(){if(!i){var a=t(this).data("transaction");a&&(i=!0,t.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_credit_transaction",nonce:window.JuntaPlay.nonce,id:a}).done(function(t){t&&t.success&&t.data&&t.data.transaction&&R(t.data.transaction)}).fail(function(){window.alert(e("Não foi possível carregar os detalhes agora.","juntaplay"))}).always(function(){i=!1}))}}),a.on("click","[data-jp-credit-load-more]",function(){if(!i){var t=parseInt(a.attr("data-page"),10)||1;t>=(parseInt(a.attr("data-pages"),10)||1)?L():M(t+1,!0)}}),w.length&&w.on("click",function(e){e.preventDefault();var n=t(this).data("jp-credit-filter"),i="all";null!=n&&""!==n&&(i=n.toString()),i!==P&&(P=i,w.removeClass("is-active"),t(this).addClass("is-active"),a.attr("data-page",1),E(!1),M(1,!1))});b.length&&b.on("change",function(){E(!1)});x.length&&x.on("input",function(){E(!1)});C.length&&C.on("click",function(t){t.preventDefault(),M(1,!1)});a.on("submit",".juntaplay-wallet__form",function(a){var n=t(this);if(!window.JuntaPlay||!window.JuntaPlay.ajax)return!0;if(a.preventDefault(),i)return!1;i=!0;var o={action:"juntaplay_credit_withdraw",nonce:window.JuntaPlay.nonce,amount:n.find('[name="jp_profile_withdraw_amount"]').val(),method:n.find('[name="jp_profile_withdraw_method"]').val(),code:n.find('[name="jp_profile_withdraw_code"]').val()};return t.post(window.JuntaPlay.ajax,o,null,"json").done(function(t){if(t)return t.success?(A("success",t.data&&t.data.message?t.data.message:e("Solicitação registrada com sucesso.","juntaplay")),void window.setTimeout(function(){window.location.reload()},1500)):void(t.data&&t.data.message&&A("warning",t.data.message))}).fail(function(){A("warning",e("Não foi possível registrar a solicitação agora.","juntaplay"))}).always(function(){i=!1}),!1}),a.on("click","[data-jp-credit-send-code]",function(){if(!i){i=!0;var n=t(this);n.prop("disabled",!0),t.post(window.JuntaPlay.ajax,{action:"juntaplay_credit_send_code",nonce:window.JuntaPlay.nonce},null,"json").done(function(t){if(t&&t.success){var e=t.data||{};p.length&&e.message&&p.text(e.message),a.find("[data-jp-credit-destination]").length&&e.destination&&a.find("[data-jp-credit-destination]").text(e.destination)}else t&&t.data&&t.data.message&&window.alert(t.data.message)}).fail(function(){window.alert(e("Não foi possível enviar o código agora.","juntaplay"))}).always(function(){i=!1,n.prop("disabled",!1)})}}),a.on("click","[data-jp-credit-details]",function(a){t(a.target).is("[data-jp-credit-details]")&&O()}),a.on("click","[data-jp-credit-topup]",function(t){t.preventDefault(),h?B():window.alert(e("Recarga indisponível no momento.","juntaplay"))}),a.on("click","[data-jp-credit-deposit-close]",function(t){t.preventDefault(),F()}),a.on("click","[data-jp-credit-suggestion]",function(a){if(a.preventDefault(),f.length){var e=parseFloat(t(this).data("jp-credit-suggestion"))||0;e>0&&f.val(e.toFixed(2)).trigger("change")}}),a.on("submit","[data-jp-credit-deposit-form]",function(a){if(a.preventDefault(),!window.JuntaPlay||!window.JuntaPlay.ajax)return!1;if(y)return!1;var n=0;if(f.length&&(n=parseFloat((f.val()||"").toString().replace(",","."))||0),n<=0||m>0&&n<m)return G(e("Informe um valor de recarga acima do mínimo permitido.","juntaplay")),!1;if(v>0&&n>v)return G(e("O valor informado excede o limite máximo permitido.","juntaplay")),!1;y=!0,g.attr("hidden","hidden").text("");var i={action:"juntaplay_credit_deposit",nonce:window.JuntaPlay.nonce,amount:n};return t.post(window.JuntaPlay.ajax,i,null,"json").done(function(t){t&&(t.success&&t.data&&t.data.redirect?window.location.href=t.data.redirect:t.success?window.location.reload():t.data&&t.data.message?G(t.data.message):G(e("Não foi possível iniciar a recarga agora.","juntaplay")))}).fail(function(){G(e("Não foi possível iniciar a recarga agora.","juntaplay"))}).always(function(){y=!1}),!1}),E(!0),L()}(t(this))}),function(){if(void 0===window.JuntaPlay)return;var a=t("[data-jp-notifications]");if(!a.length)return;function n(a){t("[data-jp-notifications]").each(function(){var e=t(this);a>0?e.attr("data-count",a):e.removeAttr("data-count")})}a.each(function(){var a=t(this);if(!a.data("jpNotificationsInit")){a.data("jpNotificationsInit",!0);var i=a.siblings("[data-jp-notifications-panel]").first();if(!i.length){var o=a.closest("[data-jp-notifications-root]");o.length&&(i=o.find("[data-jp-notifications-panel]").first())}if(i.length){var r=i.find("[data-jp-notifications-list]"),l=!1,s=!1,d='<li class="juntaplay-notifications__empty">'+e("Nenhuma notificação por enquanto.","juntaplay")+"</li>";a.attr("aria-expanded","false"),i.attr("aria-hidden","true"),i.data("jpNotificationsToggle",function(t,a){u(t,a)}),i.data("jpNotificationsBell",a),a.on("click",function(t){t.preventDefault(),u()}),i.on("click","[data-notification-id]",function(a){var e=t(this),n=parseInt(e.data("notification-id"),10)||0;if(n){var i="";e.is("a")&&(i=(e.attr("href")||"").toString()),i&&a.preventDefault();var o=e.closest("li");o.length&&o.remove(),r.children("[data-notification-id]").length||p(),h(n,function(){i?window.location.href=i:r.children("[data-notification-id]").length||p()})}}),i.on("click","[data-jp-notifications-clear]",function(a){a.preventDefault();var i=[];if(r.find("[data-notification-id]").each(function(){var a=parseInt(t(this).data("notification-id"),10);!isNaN(a)&&a>0&&i.push(a)}),!i.length)return p(),void n(0);r.html('<li class="juntaplay-notifications__empty">'+e("Removendo notificações...","juntaplay")+"</li>"),g(i,function(){p()})}),i.on("click","[data-jp-notifications-close]",function(t){t.preventDefault(),u(!1)}),c(!1)}}function p(){r.find(".juntaplay-notifications__empty--error").remove(),r.html(d)}function m(){r.find(".juntaplay-notifications__empty--error").remove(),r.html('<li class=\"juntaplay-notifications__empty\">'+e("Carregando notificações...","juntaplay")+"</li>")}function v(t){var a=t||e("Não foi possível carregar as notificações. Tente novamente.","juntaplay"),n='<li class=\"juntaplay-notifications__empty juntaplay-notifications__empty--error\">'+a+"</li>';r.children('[data-notification-id]').length?(r.find('.juntaplay-notifications__empty--error').length?r.find('.juntaplay-notifications__empty--error').replaceWith(n):r.append(n)):r.html(n)}function c(t){a.attr("aria-expanded",t?"true":"false"),a.toggleClass("is-active",t),i.attr("aria-hidden",t?"false":"true"),i.toggleClass("is-open",t)}function u(a,e){("boolean"==typeof a?a:!i.hasClass("is-open"))?(e||t("[data-jp-notifications-panel].is-open").not(i).each(function(){var a=t(this),e=a.data("jpNotificationsToggle");if("function"==typeof e)e(!1,!0);else{a.removeClass("is-open").attr("aria-hidden","true");var n=a.data("jpNotificationsBell");n&&n.length&&n.removeClass("is-active").attr("aria-expanded","false")}}),c(!0),f(!0)):c(!1)}function f(a){if(!s){s=!0;var o=r.children("[data-notification-id]").length>0;(!l||!o)?m():a&&r.find(".juntaplay-notifications__empty--error").remove();t.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_notifications_feed",nonce:window.JuntaPlay.nonce}).done(function(t){if(!t||!t.success){var a="";t&&t.data&&t.data.message&&(a=t.data.message),v(a);return}if(l=!0,r.find(".juntaplay-notifications__empty--error").remove(),t.data&&t.data.items)if(t.data.items.length){var i=t.data.items.map(function(t){var a=t.title||"",e=t.message||"",n=t.time||"",i=t.action_url||"",o=(t.status||"").toString(),s=o?' data-notification-status="'+o+'"':"",d=' class="juntaplay-notifications__item'+("unread"===o?" is-unread":"")+'" data-notification-id="'+t.id+'"',c='<span class="juntaplay-notifications__item-title">'+a+'</span><span class="juntaplay-notifications__item-message">'+e+'</span><span class="juntaplay-notifications__item-time">'+n+"</span";return i?"<li"+s+"><a"+d+' href="'+i+'">'+c+"</a></li>":"<li"+s+"><span"+d+">"+c+"</span></li>"}).join("");r.html(i)}else p();if(t.data&&void 0!==t.data.unread)n(parseInt(t.data.unread,10)||0)}).fail(function(){v("")}).always(function(){s=!1})}}function g(a,e){var i=[];Array.isArray(a)&&a.forEach(function(t){var a=parseInt(t,10);!isNaN(a)&&a>0&&i.push(a)}),i.length?t.post(window.JuntaPlay.ajax,{action:"juntaplay_notifications_mark",nonce:window.JuntaPlay.nonce,ids:i},null,"json").done(function(t){t&&t.data&&void 0!==t.data.unread&&n(parseInt(t.data.unread,10)||0)}).always(function(){l=!1,"function"==typeof e&&e()}):"function"==typeof e&&e()}function h(t,a){g([t],a)}}),t(document).off("click.juntaplayNotifications").on("click.juntaplayNotifications",function(a){t(a.target).closest("[data-jp-notifications]").length||t(a.target).closest("[data-jp-notifications-panel]").length||t("[data-jp-notifications-panel].is-open").each(function(){var a=t(this).data("jpNotificationsToggle");if("function"==typeof a)a(!1,!0);else{t(this).removeClass("is-open").attr("aria-hidden","true");var e=t(this).data("jpNotificationsBell");e&&e.length&&e.removeClass("is-active").attr("aria-expanded","false")}})})}(),t("[data-jp-account]").each(function(){var a=t(this),e=a.find("[data-jp-account-toggle]"),n=a.find("[data-jp-account-menu]");function i(t){e.attr("aria-expanded",t?"true":"false"),e.toggleClass("is-active",t),n.attr("aria-hidden",t?"false":"true"),n.toggleClass("is-open",t)}function o(a,e){("boolean"==typeof a?a:!n.hasClass("is-open"))?(e||t("[data-jp-account-menu].is-open").not(n).each(function(){var a=t(this),e=a.closest("[data-jp-account]").find("[data-jp-account-toggle]");a.removeClass("is-open").attr("aria-hidden","true"),e.removeClass("is-active").attr("aria-expanded","false")}),i(!0)):i(!1)}e.length&&n.length&&!a.data("jpAccountInit")&&(a.data("jpAccountInit",!0),n.data("jpAccountToggle",function(t,a){o(t,a)}),e.on("click",function(t){t.preventDefault(),o()}),n.on("click","a",function(){o(!1)}),i(!1))}),t(document).off("click.juntaplayAccount").on("click.juntaplayAccount",function(a){t(a.target).closest("[data-jp-account]").length||t("[data-jp-account-menu].is-open").each(function(){var a=t(this),e=a.data("jpAccountToggle");"function"==typeof e?e(!1,!0):(a.removeClass("is-open").attr("aria-hidden","true"),a.closest("[data-jp-account]").find("[data-jp-account-toggle]").removeClass("is-active").attr("aria-expanded","false"))})})}),t(document).on("change",'input[name="juntaplay_use_wallet"]',function(){s()}),t(document).on("input change",".juntaplay-group-quantity",function(){s()}),t(document).on("submit",".juntaplay-form[data-confirm]",function(a){var e=t(this).data("confirm");return!(e&&!window.confirm(e))||(a.preventDefault(),!1)});var z=function(){var t=window.JuntaPlay&&window.JuntaPlay.ajax?window.JuntaPlay.ajax:"",a=window.JuntaPlay&&window.JuntaPlay.nonce?window.JuntaPlay.nonce:"";function n(){return jQuery("#juntaplay-group-modal")}function i(){if(t)return t;var a=n();if(a.length){var e=a.attr("data-ajax-endpoint")||a.data("ajaxEndpoint")||a.data("ajax-endpoint");if(e)return t=e.toString()}return void 0!==window.ajaxurl&&window.ajaxurl&&(t=window.ajaxurl.toString()),t}function o(){if(a)return a;var t=n();if(t.length){var e=t.attr("data-ajax-nonce")||t.data("ajaxNonce")||t.data("ajax-nonce");e&&(a=e.toString())}return a}function r(t){var a=n();a.length&&(a.find("[data-modal-messages]").empty(),a.find(".juntaplay-modal__content").html(t),a.removeAttr("hidden").addClass("is-open").attr("aria-hidden","false"),jQuery("body").addClass("juntaplay-modal-open"),window.requestAnimationFrame(function(){var t=a.find("input, select, textarea, button, a[href]").filter(":visible").first();t.length?t.trigger("focus"):a.trigger("focus")}))}function l(){r('<div class="juntaplay-group-modal__loading" role="status" aria-live="polite"><span class="juntaplay-spinner" aria-hidden="true"></span><p>'+e("Carregando informações do grupo...","juntaplay")+'</p><div class="juntaplay-group-modal__skeleton" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span></div></div>')}function s(t,a){var e=n().find("[data-modal-messages]");if(e.length){var i="warning";"success"===t?i="positive":"error"===t&&(i="warning");var o=jQuery('<div class="juntaplay-alert juntaplay-alert--'+i+'" role="alert"></div>');o.text(a),e.empty().append(o)}}function d(){var t=n();t.length&&(t.removeClass("is-open").attr("aria-hidden","true").attr("hidden","hidden"),t.find(".juntaplay-modal__content").empty(),t.find("[data-modal-messages]").empty(),jQuery(".juntaplay-modal.is-open").not(t).length||jQuery("body").removeClass("juntaplay-modal-open"))}function p(t){return t&&t.data&&t.data.message?t.data.message:e("Não foi possível carregar os dados agora. Tente novamente em instantes.","juntaplay")}function c(t,a){var e=i();if(e&&a){l();var n={action:t,group_id:a},d=o();d&&(n.nonce=d),jQuery.post(e,n).done(function(t){t&&t.success&&t.data&&t.data.html?r(t.data.html):s("error",p(t))}).fail(function(t){s("error",p(t&&t.responseJSON))})}}return{loadDetail:function(t){c("juntaplay_group_detail",t)},loadEdit:function(t){c("juntaplay_group_edit_form",t)},close:d,save:function(t){var a=i();if(a){var n=new window.FormData(t);n.append("action","juntaplay_group_edit_save");var r=o();r&&n.append("nonce",r);var l=jQuery(t).find('button[type="submit"]').first();l.prop("disabled",!0).addClass("is-loading"),jQuery.ajax({url:a,method:"POST",data:n,processData:!1,contentType:!1}).done(function(t){if(t&&t.success){var a=t.data&&t.data.message?t.data.message:e("Grupo atualizado com sucesso.","juntaplay");d(),window.alert(a),window.location.reload()}else s("error",p(t))}).fail(function(t){s("error",p(t&&t.responseJSON))}).always(function(){l.prop("disabled",!1).removeClass("is-loading")})}},render:r,showLoading:l,message:s}}();jQuery(document).on("click",".juntaplay-group-card__toggle",function(t){t.preventDefault(),t.stopPropagation();var a=jQuery(this).closest("[data-group-id]"),e=a.length?parseInt(a.data("group-id"),10):0;e&&z.loadDetail(e)}),jQuery(document).on("click",".juntaplay-group-card__edit",function(t){t.preventDefault(),t.stopPropagation();var a=parseInt(jQuery(this).data("group-id"),10);if(!a){var e=jQuery(this).closest("[data-group-id]");a=e.length?parseInt(e.data("group-id"),10):0}a&&(window.JP&&"function"==typeof window.JP.openGroupEditModal?window.JP.openGroupEditModal(a):z.loadEdit(a))}),jQuery(document).on("submit","#juntaplay-group-edit-form",function(t){t.preventDefault(),window.JP&&"function"==typeof window.JP.submitGroupEditForm?window.JP.submitGroupEditForm(this):z.save(this)}),jQuery(document).on("click",".juntaplay-modal__close, #juntaplay-group-modal [data-group-modal-close]",function(t){t.preventDefault(),z.close()}),jQuery(document).on("click","#juntaplay-group-modal",function(t){t.target===this&&z.close()}),jQuery(document).on("keydown.juntaplayGroupModal",function(t){"Escape"!==t.key&&27!==t.keyCode||jQuery("#juntaplay-group-modal").hasClass("is-open")&&(t.preventDefault(),z.close())});var V=function(){var a=jQuery("#juntaplay-group-modal"),n="",i="";if(a.length){var o=a.attr("data-rest-root")||a.data("restRoot")||"",r=a.attr("data-rest-nonce")||a.data("restNonce")||"";o&&(n=o.toString()),r&&(i=r.toString())}function l(t){var a=t?t.toString():"";return"/"===a.charAt(0)&&(a=a.slice(1)),n?n+a:""}function s(a){var e={Accept:"application/json"};return i&&(e["X-WP-Nonce"]=i),a&&(e=t.extend({},e,a)),e}return!n&&window.wpApiSettings&&window.wpApiSettings.root&&("/"!==(n=window.wpApiSettings.root.toString()).slice(-1)&&(n+="/"),-1===n.indexOf("juntaplay/v1")&&(n+="juntaplay/v1/")),{root:n=function(t){if(!t)return"";var a=t.toString();return"/"!==a.slice(-1)&&(a+="/"),a}(n),nonce:i,endpoint:l,headers:s,fetch:function(a,i){if(!window.fetch||!n)return Promise.reject(new Error("rest_unavailable"));var o=t.extend({credentials:"same-origin"},i||{});return o.headers=s(o.headers||null),window.fetch(l(a),o).then(function(t){var a=function(){return t.json().catch(function(){return{}})};return t.ok?a():a().then(function(t){if(t&&"object"==typeof t&&t.message)throw t;throw{message:e("Não foi possível concluir a solicitação.","juntaplay")}})})}}}();window.JP.rest=V,function(){var t=!1,a=0;function n(t,a){var e=(t||a||"").toString().toLowerCase();return(e=e.replace(/[^a-z0-9_-]+/g,""))||a||"info"}function i(t){if(t&&"object"==typeof t){var a=parseInt(t.id,10)||0;if(a){var i=jQuery('.juntaplay-group-card[data-group-id="'+a+'"]');if(i.length){i.attr("data-group-status",t.status||""),t.membership_role&&i.attr("data-group-role",t.membership_role);var o=t.cover_url||"";!o&&t.cover_placeholder&&(o=d||"");var l=i.find(".juntaplay-group-card__cover");if(l.length){l.toggleClass("is-placeholder",!!t.cover_placeholder);var s=l.find("img");s.length&&(o&&s.attr("src",o),t.cover_alt&&s.attr("alt",t.cover_alt))}var p=t.title||t.service_name||e("Grupo sem nome","juntaplay");i.find(".juntaplay-group-card__title").text(p).attr("title",p);var c=i.find(".juntaplay-group-card__role-badge");if(c.length)if(t.role_label){var u="juntaplay-badge--"+n(t.role_tone,"info");c.text(t.role_label).removeClass(function(t,a){return(a||"").split(" ").filter(function(t){return 0===t.indexOf("juntaplay-badge--")}).join(" ")}).addClass(u)}else c.remove();var f=i.find(".juntaplay-group-card__chips");if(f.length){var g="";t.availability_label&&(g+='<span class="juntaplay-badge juntaplay-badge--'+n(t.availability_tone,"info")+'">'+r(t.availability_label)+"</span>"),t.status_label&&(g+='<span class="juntaplay-badge juntaplay-badge--'+n(t.status_tone,"info")+'">'+r(t.status_label)+"</span>"),f.html(g)}var h=i.find(".juntaplay-group-card__quick-value");h.length&&h.text(t.slots_total_label||"");var m=i.find(".juntaplay-group-card__quick-hint");if(m.length){var v=t.slots_available_label||t.slots_total_hint||"";v?m.text(v).removeClass("is-hidden"):m.text("").addClass("is-hidden")}var y=i.find(".juntaplay-group-card__cta");if(y.length)if(t.cta_label||t.price_highlight){var j="";if(t.price_highlight&&(j+='<span class="juntaplay-group-card__cta-price">'+r(t.price_highlight)+"</span>"),t.cta_label){var _=["juntaplay-button"];_.push("primary"===t.cta_variant?"juntaplay-button--primary":"juntaplay-button--ghost"),t.cta_disabled&&_.push("is-disabled");var w=_.join(" ");!t.cta_disabled&&t.cta_url?j+='<a class="'+w+'" href="'+r(t.cta_url)+'">'+r(t.cta_label)+"</a>":j+='<button type="button" class="'+w+'"'+(t.cta_disabled?" disabled":"")+">"+r(t.cta_label)+"</button>"}y.html(j)}else y.empty();var b=i.find(".juntaplay-group-card__created");b.length&&(t.created_human?b.text(t.created_human).show():b.empty().hide());var x=i.find(".juntaplay-group-card__reviewed");x.length&&(t.reviewed_human?x.text(t.reviewed_human).show():x.empty().hide());var C=i.find(".juntaplay-group-card__details");if(C.length){var S=[];if(t.service_name){var k="<strong>"+r(e("Serviço","juntaplay"))+":</strong> ";t.service_url?S.push("<li>"+k+'<a href="'+r(t.service_url)+'" target="_blank" rel="noopener noreferrer">'+r(t.service_name)+"</a></li>"):S.push("<li>"+k+r(t.service_name)+"</li>")}t.price_regular_display&&S.push("<li><strong>"+r(e("Valor do serviço","juntaplay"))+":</strong> "+r(t.price_regular_display)+"</li>"),t.price_promotional_display&&S.push("<li><strong>"+r(e("Oferta promocional","juntaplay"))+":</strong> "+r(t.price_promotional_display)+"</li>"),t.member_price_display&&S.push("<li><strong>"+r(e("Cobrado de cada membro","juntaplay"))+":</strong> "+r(t.member_price_display)+"</li>"),S.push("<li><strong>"+r(e("Tipo","juntaplay"))+":</strong> "+r(e("Público","juntaplay"))+"</li>"),t.category_label&&S.push("<li><strong>"+r(e("Categoria","juntaplay"))+":</strong> "+r(t.category_label)+"</li>"),void 0!==t.members_count&&S.push("<li><strong>"+r(e("Participantes","juntaplay"))+":</strong> "+r(String(t.members_count))+"</li>");var P="";P=t.pool_title?r(t.pool_title):'<span class="juntaplay-profile__empty">'+r(e("Ainda não vinculada","juntaplay"))+"</span>",S.push("<li><strong>"+r(e("Grupo","juntaplay"))+":</strong> "+P+"</li>"),t.support_channel&&S.push("<li><strong>"+r(e("Suporte a Membros","juntaplay"))+":</strong> "+r(t.support_channel)+"</li>"),t.delivery_time&&S.push("<li><strong>"+r(e("Prazo para liberar acesso","juntaplay"))+":</strong> "+r(t.delivery_time)+"</li>"),t.access_method&&S.push("<li><strong>"+r(e("Forma de entrega","juntaplay"))+":</strong> "+r(t.access_method)+"</li>"),t.instant_access_label&&S.push("<li><strong>"+r(e("Acesso instantâneo","juntaplay"))+":</strong> "+r(t.instant_access_label)+"</li>"),C.html(S.join(""))}}}}}window.JP.openGroupEditModal=function(n){var i=parseInt(n,10)||0;i&&(a=i,window.fetch&&V.root?(z&&"function"==typeof z.showLoading&&z.showLoading(),V.fetch("groups/"+i,{method:"GET",headers:V.headers()}).then(function(t){if(!t||!t.form)throw t||{};z&&"function"==typeof z.render&&z.render(t.form),O(jQuery("#juntaplay-group-modal").find("[data-group-cover]"))}).catch(function(a){var n=a&&a.message?a.message:e("Não foi possível carregar os dados agora. Tente novamente em instantes.","juntaplay");z&&"function"==typeof z.message&&z.message("error",n),t||(t=!0,z.loadEdit(i))})):t||(t=!0,z.loadEdit(i)))},window.JP.submitGroupEditForm=function(t){if(t){var n=jQuery(t).find('button[type="submit"]').first();n.length&&n.prop("disabled",!0).addClass("is-loading");var o=new window.FormData(t),r=parseInt(o.get("group_id"),10)||a||0;return r?window.fetch&&V.root?void V.fetch("groups/"+r,{method:"POST",body:o,headers:V.headers()}).then(function(t){if(!t||!t.group)throw t||{};z&&z.close();var a=t.message||e("Grupo atualizado com sucesso.","juntaplay");window.alert(a),i(t.group)}).catch(function(t){var a=t&&t.message?t.message:e("Não foi possível salvar as alterações do grupo.","juntaplay");z&&"function"==typeof z.message?z.message("error",a):window.alert(a)}).finally(function(){n.length&&n.prop("disabled",!1).removeClass("is-loading")}):(n.length&&n.prop("disabled",!1).removeClass("is-loading"),void z.save(t)):(n.length&&n.prop("disabled",!1).removeClass("is-loading"),void(z&&"function"==typeof z.message&&z.message("error",e("Não foi possível identificar o grupo selecionado.","juntaplay"))))}},window.JP.updateGroupCard=i}(),function(){var t=jQuery("[data-group-diagnostics]");if(t.length){var a=t.find("[data-diagnostics-toggle]"),n=t.find("[data-diagnostics-list]"),i=t.find("[data-diagnostics-percent]"),o=t.find("[data-diagnostics-progress]"),r=t.find("[data-diagnostics-bar]");a.on("click",function(t){t.preventDefault();var e="true"===a.attr("aria-expanded");a.attr("aria-expanded",e?"false":"true"),e?n.attr("hidden","hidden"):n.removeAttr("hidden")});var l,s=function(){var t={},a=!1;document.querySelectorAll('input[name="jp_profile_nonce"]').forEach(function(e){var n=e.getAttribute("id");n&&(t[n]&&(a=!0),t[n]=!0)});var e=!0;jQuery("[data-group-cover-preview] img").each(function(){this.getAttribute("src")||(e=!1)});var n=void 0!==window.wp&&!(!window.wp||!window.wp.media),i=!0;document.querySelectorAll("[data-group-cover]").forEach(function(t){"1"!==t.getAttribute("data-group-cover-ready")&&(i=!1)});var o=n;o&&(o=!1,document.querySelectorAll("[data-group-cover]").forEach(function(t){t.getAttribute("data-upload-context")&&t.getAttribute("data-media-author")&&(o=!0)}));var r=!(window.JP&&window.JP._backboneErrorReported);return{edit_modal_opens:void 0!==window.JP&&"function"==typeof window.JP.openGroupEditModal,single_click_media:n&&i,cover_preview_ok:e,can_upload_as_subscriber:o,no_duplicate_nonce_ids:!a,no_backbone_url_error:r}}();(l=s,window.fetch&&V.root?V.fetch("diagnostics",{method:"POST",headers:V.headers({"Content-Type":"application/json"}),body:JSON.stringify({checks:l})}).catch(function(){}):Promise.resolve()).finally(function(){(window.fetch&&V.root?V.fetch("diagnostics",{method:"GET",headers:V.headers()}):Promise.reject()).then(function(a){!function(a){if(a&&a.checks){t.removeAttr("hidden");var l="number"==typeof a.percent?a.percent:0;if(i.text(l+"%"),o.length&&o.attr("aria-valuenow",l),r.length&&r.css("width",Math.max(0,Math.min(100,l))+"%"),n.length){n.empty();var s={edit_modal_opens:e("Modal de edição disponível","juntaplay"),single_click_media:e("Biblioteca abre com um clique","juntaplay"),cover_preview_ok:e("Pré-visualização da capa ativa","juntaplay"),can_upload_as_subscriber:e("Assinante pode enviar capa","juntaplay"),no_duplicate_nonce_ids:e("Sem IDs de nonce duplicados","juntaplay"),no_backbone_url_error:e("Sem erro de Backbone","juntaplay")};Object.keys(a.checks).forEach(function(t){var e=!!a.checks[t],i=s[t]||t,o=jQuery('<li class="juntaplay-diagnostics__item"></li>');o.toggleClass("is-success",e).toggleClass("is-error",!e),o.text((e?"✓ ":"✗ ")+i),n.append(o)})}}}(a)}).catch(function(){t.attr("hidden","hidden")})})}}(),window.addEventListener("error",function(t){-1!==(t&&t.message?String(t.message):"").indexOf('"url" property or function must be specified')&&(window.JP||(window.JP={}),window.JP._backboneErrorReported||(window.JP._backboneErrorReported=!0,window.fetch&&V.root&&V.fetch("diagnostics/flag",{method:"POST",headers:V.headers({"Content-Type":"application/json"}),body:JSON.stringify({type:"backbone_url_error",status:!0})}).catch(function(){})))}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".juntaplay-relationship__form");t.length&&t.forEach(function(t){t.addEventListener("submit",function(){var a=t.querySelector(".juntaplay-button--primary");if(a){var n=a.getAttribute("data-loading-label");n||(n=e("Redirecionando...","juntaplay"),a.setAttribute("data-loading-label",n)),a.dataset.originalLabel||(a.dataset.originalLabel=a.textContent||""),a.textContent=n,a.classList.add("is-loading"),a.disabled=!0}}),t.addEventListener("change",function(a){var e=a.target;if(e&&"jp_relationship_choice"===e.name&&(t.querySelectorAll(".juntaplay-relationship-card").forEach(function(t){t.classList.remove("is-active")}),e.checked)){var n=e.closest(".juntaplay-relationship-card");n&&n.classList.add("is-active")}})}),setTimeout(function(){jQuery(document).trigger("juntaplay:group-modal-ready")},0)}),t(document).on("juntaplay:group-modal-ready",Q),t(function(){Q()})}(jQuery);