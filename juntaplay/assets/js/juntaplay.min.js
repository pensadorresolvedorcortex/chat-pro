!function(t){"use strict";window.JP=window.JP||{};var a=window.wp&&window.wp.i18n?window.wp.i18n:null;function e(t,e){return a&&"function"==typeof a.__?a.__.apply(a,arguments):t}function n(t,e,n,i){return a&&"function"==typeof a._n?a._n.apply(a,arguments):1===n?t:e}function i(a){var e=[];return a.find(".juntaplay-grid__item.is-selected").each(function(){e.push(t(this).data("number"))}),e}function r(t,a,e){var n=isFinite(t)?t:0;try{return new Intl.NumberFormat(e||"pt-BR",{style:"currency",currency:a||"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}catch(t){return(a||"R$")+" "+n.toFixed(2)}}function o(t){return String(null==t?"":t).replace(/[&<>"']/g,function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#039;";default:return t}})}"undefined"!=typeof window&&window.jQuery&&"function"!=typeof window.jQuery.fn.tipTip&&(window.jQuery.fn.tipTip=function(){return this});var l=null;function s(){t("body").hasClass("woocommerce-checkout")&&(l&&clearTimeout(l),l=window.setTimeout(function(){l=null,t(document.body).trigger("update_checkout")},180))}function d(t){var a=i(t),e=t.find(".juntaplay-selected__numbers"),n=t.find(".juntaplay-selected__count"),o=t.find(".juntaplay-selected__total-value"),l=t.find(".juntaplay-quota-form"),s=e.data("empty")||"",d=o.data("empty")||"",p=l.data("currency"),c=l.data("locale"),u=parseFloat(l.data("price"))||0;if(a.length){var f=a.map(function(t){return'<span class="juntaplay-chip">'+t+"</span>"});e.html(f.join("")),n.text(a.length),o.text(r(a.length*u,p,c))}else e.html('<span class="juntaplay-selected__empty">'+s+"</span>"),n.text("0"),o.text(d)}function p(t,a){var n=t.status||"available",i=["juntaplay-grid__item"];"available"!==n&&(i.push("is-disabled"),i.push("status-"+n)),a&&i.push("is-selected");var r="";return"available"!==n&&(r='<span class="juntaplay-grid__badge">'+function(t){switch(t){case"reserved":return e("Reservada","juntaplay");case"paid":return e("Paga","juntaplay");case"canceled":return e("Cancelada","juntaplay");case"expired":return e("Expirada","juntaplay");default:return e("Disponível","juntaplay")}}(n)+"</span>"),'<button type="button" class="'+i.join(" ")+'" data-number="'+t.number+'" data-status="'+n+'"><span class="juntaplay-grid__number">'+t.number+"</span>"+r+"</button>"}function c(t){var a=t.is_featured?'<span class="juntaplay-pool-card__badge">'+e("Destaque","juntaplay")+"</span>":"",n=t.categoryLabel?'<span class="juntaplay-badge">'+t.categoryLabel+"</span>":"",i='<div class="juntaplay-progress"><span class="juntaplay-progress__bar" style="width:'+(t.progress||0)+'%"></span></div>',r='<div class="juntaplay-pool-card__meta"><span>'+e("Disponíveis","juntaplay")+": "+t.quotasFree+"</span><span>"+e("Vendidas","juntaplay")+": "+t.quotasPaid+"</span></div>";return'<article class="juntaplay-pool-card">'+(t.thumbnail?'<div class="juntaplay-pool-card__cover"><img src="'+t.thumbnail+'" alt="'+t.title+'" /></div>':'<div class="juntaplay-pool-card__cover is-placeholder"><span>'+e("Grupo","juntaplay")+"</span></div>")+'<div class="juntaplay-pool-card__body">'+a+'<h3 class="juntaplay-pool-card__title"><a href="'+t.permalink+'">'+t.title+"</a></h3>"+n+'<p class="juntaplay-pool-card__excerpt">'+t.excerpt+'</p><div class="juntaplay-pool-card__price">'+e("Rifa a partir de","juntaplay")+" <strong>"+t.priceLabel+"</strong></div>"+i+r+'<a class="juntaplay-button juntaplay-button--primary" href="'+t.permalink+'">'+e("Assinar agora","juntaplay")+"</a></div></article>"}function u(a){var n={page:1,perPage:parseInt(a.data("perPage"),10)||12,category:(a.data("category")||"").toString(),orderby:(a.data("orderby")||"created_at").toString(),order:(a.data("order")||"desc").toString(),featured:(a.data("featured")||"").toString(),minPrice:"",maxPrice:"",search:"",loading:!1,hasMore:!0},i=a.find("[data-pool-results]"),r=a.find("[data-pool-meta]"),o=a.find("[data-pool-empty]"),l=a.find("[data-pools-load]"),s=a.find("form.juntaplay-pool-filters");function d(t){n.loading=t,a.toggleClass("is-loading",t),t?l.prop("disabled",!0).text(e("Carregando...","juntaplay")):n.hasMore?l.prop("disabled",!1).removeAttr("hidden").text(e("Carregar mais campanhas","juntaplay")):l.prop("disabled",!0).attr("hidden","hidden")}function p(a){n.loading||(d(!0),a&&(n.page=1,n.hasMore=!0,l.length&&l.removeAttr("hidden")),t.ajax({url:JuntaPlay.ajax,dataType:"json",method:"GET",data:{action:"juntaplay_pools",nonce:JuntaPlay.nonce,page:n.page,per_page:n.perPage,category:n.category,search:n.search,min_price:n.minPrice,max_price:n.maxPrice,orderby:n.orderby,order:n.order,featured:n.featured}}).done(function(t){if(t&&t.success){var s,d=t.data||{},p=d.items||[];if(a&&i.empty(),!p.length&&a?o.text(e("Nenhum grupo encontrado com os filtros selecionados.","juntaplay")).addClass("is-visible"):o.removeClass("is-visible").text(""),p.length){var u=p.map(c);i.append(u.join(""))}n.page=(d.page||1)+1,n.hasMore=(d.page||1)<(d.pages||1),n.hasMore?l.attr("disabled",!1).removeAttr("hidden").text(e("Carregar mais campanhas","juntaplay")):l.attr("disabled",!0).attr("hidden","hidden"),s=d.total||0,r.length&&r.text(s?e("Exibindo","juntaplay")+" "+s:"")}else o.text(t&&t.data&&t.data.message?t.data.message:e("Não foi possível carregar os grupos.","juntaplay")).addClass("is-visible")}).fail(function(){o.text(e("Não foi possível carregar os grupos.","juntaplay")).addClass("is-visible")}).always(function(){d(!1)}))}s.on("submit",function(t){t.preventDefault(),n.category=(s.find('[name="category"]').val()||"").toString(),n.search=(s.find('[name="search"]').val()||"").toString(),n.orderby=(s.find('[name="orderby"]').val()||"created_at").toString(),n.order=(s.find('[name="order"]').val()||"desc").toString(),n.minPrice=(s.find('[name="min_price"]').val()||"").toString(),n.maxPrice=(s.find('[name="max_price"]').val()||"").toString(),p(!0)}),l.on("click",function(t){t.preventDefault(),n.hasMore&&!n.loading&&p(!1)}),p(!0)}function f(a){var e=a.find("[data-group-list]"),n=e.find("[data-group-item]"),i=(a.data("role-filter")||"all").toString(),r=(a.data("status-filter")||"all").toString(),o=0;n.each(function(){var a=t(this),e=(a.data("group-role")||"").toString(),n=(a.data("group-status")||"").toString(),l=!1;"owned"===i&&"owner"!==e&&"manager"!==e?l=!0:"member"!==i||"owner"!==e&&"manager"!==e||(l=!0),l||"all"===r||n===r||(l=!0),a.toggleClass("is-hidden",l),l||o++});var l=e.find("[data-group-empty]");l.length&&(0===o?l.removeClass("is-hidden"):l.addClass("is-hidden"))}function g(t){var a="undefined"!=typeof window&&void 0!==window.JuntaPlay&&window.JuntaPlay.auth?window.JuntaPlay.auth:{},e={loginUrl:(a.loginUrl||"").toString(),redirectParam:(a.redirectParam||"redirect_to").toString(),loggedIn:!!a.loggedIn};if(t&&"function"==typeof t.closest){var n=t.closest(".juntaplay-group-rotator");if(n&&n.length){var i=(n.data("loginUrl")||"").toString(),r=(n.data("redirectParam")||"").toString(),o=n.data("loggedIn");!e.loginUrl&&i&&(e.loginUrl=i),r&&(e.redirectParam=r),void 0!==o&&(e.loggedIn=!!o)}}return e.redirectParam||(e.redirectParam="redirect_to"),e}function h(t,a,e){if(g(t).loggedIn)return!1;if(!t.closest(".juntaplay-group-rotator").length)return!1;var n=function(t){return window.location.origin+window.location.pathname+window.location.search+(t?"#jp-group-card-"+t:window.location.hash)}(a);return e&&"function"==typeof e.preventDefault&&(e.preventDefault(),e.stopPropagation()),window.location.href=function(t,a){if("undefined"==typeof window)return t;var e=g(a),n=(e.loginUrl||"").toString(),i=(e.redirectParam||"redirect_to").toString(),r=t;if(!n)return t;try{var o=new URL(t,window.location.href);if(o.hash){var l=o.hash.replace(/^#/,"");o.hash="",l&&o.searchParams.set("jp_group_anchor",l)}r=o.toString()}catch(t){}try{var s=new URL(n,window.location.origin);return s.searchParams.set(i,r),s.toString()}catch(t){var d=-1===n.indexOf("?")?"?":"&";return n+d+encodeURIComponent(i)+"="+encodeURIComponent(r)}}(n,t),!0}function v(t){if(null==t)return 0;var a=t.toString().trim();if(!a)return 0;if(!(a=a.replace(/[^0-9,\.\-]/g,""))||"-"===a)return 0;-1!==a.indexOf(",")&&-1!==a.indexOf(".")?a=a.replace(/\./g,"").replace(",","."):-1!==a.indexOf(",")&&(a=a.replace(",","."));var e=parseFloat(a);return isNaN(e)?0:e}function m(t){if(!isFinite(t)||t<=0)return"";try{return t.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}catch(a){return t.toFixed(2)}}function y(a){if(a.length){var e=a.find("[data-group-share]");if(e.length){var n=function(a){var e=a.find('[name="jp_profile_group_category"]'),n=t.trim((e.val()||"").toString()),i=t.trim((e.find("option:selected").text()||"").toString());return{name:t.trim((a.find('[name="jp_profile_group_name"]').val()||"").toString()),service:t.trim((a.find('[name="jp_profile_group_service"]').val()||"").toString()),serviceUrl:t.trim((a.find('[name="jp_profile_group_service_url"]').val()||"").toString()),rules:t.trim((a.find('[name="jp_profile_group_rules"]').val()||"").toString()),description:t.trim((a.find('[name="jp_profile_group_description"]').val()||"").toString()),price:v(a.find('[name="jp_profile_group_price"]').val()),promoEnabled:a.find("[data-group-promo-toggle]").is(":checked"),promo:v(a.find('[name="jp_profile_group_price_promo"]').val()),slotsTotal:parseInt((a.find('[name="jp_profile_group_slots_total"]').val()||"0").toString(),10)||0,slotsReserved:parseInt((a.find('[name="jp_profile_group_slots_reserved"]').val()||"0").toString(),10)||0,memberPrice:v(a.find('[name="jp_profile_group_member_price"]').val()),support:t.trim((a.find('[name="jp_profile_group_support"]').val()||"").toString()),delivery:t.trim((a.find('[name="jp_profile_group_delivery"]').val()||"").toString()),access:t.trim((a.find('[name="jp_profile_group_access"]').val()||"").toString()),category:n,categoryLabel:i,instantAccess:a.find('[name="jp_profile_group_instant"]').is(":checked")}}(a),i=((e.data("domain")||"").toString(),(e.find('[data-group-share-field="promo"]').data("fallback")||"").toString()),o=(e.find('[data-group-share-field="category"]').data("empty")||"").toString(),l=(e.find('[data-group-share-field="instant_access"]').data("fallback")||"").toString(),s=n.price>0?r(n.price,"BRL","pt-BR"):"",d=n.promoEnabled&&n.promo>0?r(n.promo,"BRL","pt-BR"):"",p=n.memberPrice>0?r(n.memberPrice,"BRL","pt-BR"):"",c=n.slotsReserved>0?n.slotsReserved.toString():"",u=d||i||"Não",f=n.promoEnabled&&n.promo>0?"Sim":"Não",g=n.categoryLabel||o,h=n.instantAccess?"Ativado":l||"Desativado",m={service:n.service,name:n.name,category:g,service_url:n.serviceUrl,rules:n.rules,description:n.description,price:s,promo_flag:f,promo:u,slots_total:n.slotsTotal>0?n.slotsTotal.toString():"",slots_reserved:c||"0",member_price:p,support:n.support,delivery:n.delivery,access:n.access,instant_access:h};t.each(m,function(t,a){var n=e.find('[data-group-share-field="'+t+'"]');if(n.length){var i=(n.data("empty")||n.data("fallback")||"").toString(),r=a;"string"==typeof r&&(r=r.trim()),r?n.text(r):i?n.text(i):n.text("—")}});var y=[];n.service&&y.push("Serviço: "+n.service),n.name&&y.push("Nome do grupo: "+n.name),y.push("Tipo: Público"),g&&y.push("Categoria: "+g),n.serviceUrl&&y.push("Site: "+n.serviceUrl),n.rules&&y.push("Regras: "+n.rules),n.description&&y.push("Descrição: "+n.description),s&&y.push("Valor do serviço: "+s),y.push("É valor promocional?: "+f),y.push("Valor promocional: "+u),n.slotsTotal>0&&y.push("Vagas totais: "+n.slotsTotal),n.slotsReserved>0&&y.push("Reservadas para você: "+n.slotsReserved),p&&y.push("Os membros vão pagar: "+p),n.support&&y.push("Suporte a membros: "+n.support),n.delivery&&y.push("Envio de acesso: "+n.delivery),n.access&&y.push("Forma de acesso: "+n.access),y.push("Acesso instantâneo: "+h);var _=y.join("\n");_||(_=(e.data("empty")||"").toString());var j=e.find("[data-group-share-snippet]");j.length&&j.text(_);var w=e.find("[data-group-share-text]");w.length&&w.val(_)}}}function _(t){if(t.length){var a=v(t.find('[name="jp_profile_group_price"]').val()),e=t.find("[data-group-promo-toggle]").is(":checked")?v(t.find('[name="jp_profile_group_price_promo"]').val()):0,n=parseInt(t.find('[name="jp_profile_group_slots_total"]').val(),10)||0,i=parseInt(t.find('[name="jp_profile_group_slots_reserved"]').val(),10)||0,o=Math.max(1,n-i),l=e>0?e:a,s=l>0?l/o:0,d=t.find("[data-group-member-input]"),p=t.find("[data-group-price-preview]"),c=!0===d.data("jpDirty"),u="yes"===d.data("group-member-generated");if(d.length)if(!c&&s>0){var f=m(s);f&&(d.val(f),d.data("group-member-generated","yes"))}else!c&&s<=0&&u&&d.val("");if(p.length){var g=v(d.val());if(g<=0&&s>0&&(g=s),g>0){var h=(p.data("suffix")||"").toString().trim(),_=r(g,"BRL","pt-BR");h&&(_+=" "+h),p.text(_).removeClass("is-hidden")}else{var j=(p.data("empty")||"").toString();j?p.text(j).removeClass("is-hidden"):p.addClass("is-hidden")}}y(t)}}function j(t){var a=t.closest("form"),e=a.find("[data-group-promo-field]");t.is(":checked")?e.removeClass("is-hidden"):(e.addClass("is-hidden"),e.find("input").val("")),_(a)}function w(a){var e=a.closest(".juntaplay-form__group").find("[data-group-pool-help]");if(e.length){var n=""!==t.trim((a.val()||"").toString());e.toggleClass("is-hidden",!n)}}function b(a){if(a&&a.length){var e=a.closest("form").find("[data-rule-output]"),n=a.find("[data-rule-item]"),i=a.find("[data-rule-extra]"),r=a.find("[data-rule-extra-counter]"),o=[];if(n.each(function(a,e){var n=t.trim(t(e).val()||"");n&&o.push(a+1+" - "+n)}),i.length){var l=t.trim(i.val()||"");if(l&&o.push(l),r.length){var s=parseInt(i.attr("maxlength"),10)||0,d=l.length;r.text(s?d+" / "+s:d)}}e.length&&e.val(o.join("\n"))}}function x(a){a&&a.length&&a.find(".juntaplay-choice-card").each(function(){var a=t(this),e=a.find('input[type="radio"]').first();a.toggleClass("is-active",e.length&&e.prop("checked"))})}function S(a){if(a&&a.length){!function(t){if(t&&t.length){var a=t.find("[data-rule-builder]");if(a.length){var e=a.find("[data-rule-item]"),n=a.find("[data-rule-extra]");e.on("input change",function(){b(a)}),n.on("input change",function(){b(a)}),b(a)}}}(a),function(a){if(a&&a.length){var e=a.find("[data-choice-group]");e.length&&e.each(function(){var e=t(this),n=(e.data("choiceSync")||"").toString(),i=""!==n?a.find(n):t();e.on("change",'input[type="radio"]',function(){var a=t(this);x(e),i.length&&(i.val(a.val()),i.trigger("change"))});var r=e.find('input[type="radio"]:checked').first();r.length&&i.length&&i.val(r.val()),x(e)})}}(a),function(t){if(t&&t.length){var a=t.find("[data-access-timing]");if(a.length){var e=t.find("[data-access-instant]"),n=t.find('input[name="jp_profile_group_access_timing"]'),i=t.find("[data-access-immediate]");a.on("change",r),r()}}function r(){var r=(a.val()||"").toString();""===r&&(r="scheduled");var o="immediate"===r;i.toggleClass("is-hidden",!o),e.length&&e.val(o?"on":""),n.length&&n.val(r),t.trigger("jp:accessTimingChange",[o])}}(a);var e=a.find("[data-group-step]");if(e.length){var n=a.find("[data-group-stepper] .juntaplay-steps__item"),i=a.find('[data-group-step][data-step-index="4"]'),r=a.find('[data-group-stepper] .juntaplay-steps__item[data-step-index="4"]'),o=(t(),0);a.on("click","[data-step-next]",function(t){t.preventDefault();var n=(a.find("[data-access-timing]").val()||"").toString();3!==o||"immediate"===n?o<e.length-1&&l(o+1,1):a.trigger("submit")}),a.on("click","[data-step-prev]",function(t){t.preventDefault(),o>0&&l(o-1,-1)}),a.on("submit",function(e){var n=a.find("input, select, textarea").filter(function(){if(this.disabled)return!1;var a=t(this),e=a.closest("[data-group-step]");if(e.length&&(e.hasClass("is-hidden")||e.hasClass("is-disabled")))return!1;var n="function"!=typeof this.checkValidity||this.checkValidity(),i=a.prop("required"),r=t.trim((a.val()||"").toString());return!n||i&&""===r}).first();n.length&&(e.preventDefault(),function(t){if(t&&t.length){!function(t){var a=t.closest(".juntaplay-form__group, .juntaplay-form__field");a.length&&a.addClass("has-error")}(t);var a=t.closest("[data-group-step]"),e=Number.isFinite(parseInt(a.data("stepIndex"),10))?parseInt(a.data("stepIndex"),10):o;a.length&&e!==o&&l(e,e>o?1:-1),window.setTimeout(function(){t[0]&&"function"==typeof t[0].scrollIntoView&&t[0].scrollIntoView({behavior:"smooth",block:"center"}),t.trigger("focus")},60)}}(n))}),a.on("input change","input, select, textarea",function(){var a,e;a=t(this),(e=a.closest(".juntaplay-form__group, .juntaplay-form__field")).length&&e.removeClass("has-error")}),a.on("jp:accessTimingChange",function(t,a){s(!!a)}),s("immediate"===(a.find("[data-access-timing]").val()||"").toString()),l(o)}}function l(a,i){if(!(a<0||a>=e.length)){for(var r=i||(a>o?1:-1),l=a;l>=0&&l<e.length&&e.eq(l).hasClass("is-disabled");)l+=r;l<0||l>=e.length||(o=l,e.addClass("is-hidden"),e.eq(o).removeClass("is-hidden"),n.length&&(n.removeClass("is-active"),n.each(function(a){var e=t(this);!e.hasClass("is-disabled")&&a<=o&&e.addClass("is-active")})))}}function s(t){i.length&&r.length&&(i.toggleClass("is-disabled is-hidden",!t),r.toggleClass("is-disabled",!t),!t&&o>3&&l(3,-1))}}function C(t){if(!t||!t.length)return!1;var a=(t.attr("data-group-view-allowed")||"").toString();return"1"===a||"true"===a}function k(t){t&&t.length&&(t.attr("data-group-view-allowed","1"),t.data("groupViewAllowed","1"))}function P(a,e){if(a&&a.length){var n=(e||"").toString(),i=a.find("[data-group-view]");if(i.length){"wizard"!==n||C(a)||(n=(a.data("groupViewDefault")||"").toString()||"selector");var r=!1;i.each(function(){var a=t(this),e=(a.data("groupView")||"").toString();n&&e===n?(a.removeClass("is-hidden"),r=!0):n||r?a.addClass("is-hidden"):(a.removeClass("is-hidden"),r=!0)}),!r&&i.length&&(i.addClass("is-hidden"),i.first().removeClass("is-hidden"),n=(i.first().data("groupView")||"").toString()),n&&a.attr("data-group-view-active",n)}}}function D(t){if(t&&t.length){var a=(t.data("groupViewActive")||"").toString(),e=(t.data("groupViewDefault")||"").toString();!a&&e&&(a=e),a||(a="selector"),"wizard"===a&&k(t),P(t,a)}}function I(a,e){e&&(a.attr("data-active-view",e),a.find(".juntaplay-auth__switch-btn").each(function(){var a=t(this),n=a.data("target")===e;a.toggleClass("is-active",n),a.attr("aria-selected",n?"true":"false")}),a.find(".juntaplay-auth__pane").each(function(){var a=t(this),n=a.data("pane")===e;a.toggleClass("is-active",n),a.attr("aria-hidden",n?"false":"true")}))}function A(a,e){var n=a.find("[data-auth-step]"),i=n.length||1,r=parseInt(e,10)||1;r<1&&(r=1),r>i&&(r=i),a.attr("data-step",r),n.each(function(){var a=t(this),e=(parseInt(a.data("authStep"),10)||1)===r;a.toggleClass("is-active",e),a.attr("aria-hidden",e?"false":"true")}),a.find("[data-auth-step-indicator]").each(function(){var a=t(this),e=parseInt(a.data("authStepIndicator"),10)||1,n=e===r,i=e<r;a.toggleClass("is-active",n),a.toggleClass("is-complete",i)});var o=a.find("[data-auth-step-prev]"),l=a.find("[data-auth-step-next]"),s=a.find("[data-auth-step-submit]");o.prop("disabled",r<=1),l.length&&l.toggle(r<i),s.length&&s.toggle(r===i)}function N(t,a){var e=t.find('[data-auth-step="'+a+'"]').first();if(!e.length)return!0;var n=!0;return e.find("input, select, textarea").each(function(){var t=this;return!("function"==typeof t.checkValidity&&!t.checkValidity())||("function"==typeof t.reportValidity&&t.reportValidity(),n=!1,!1)}),n}function J(t,a){var e=parseInt(t.attr("data-step"),10)||1,n=e+a;a>0&&!N(t,e)||A(t,n)}t(document).on("click",".juntaplay-grid__item",function(){var a=t(this),e=a.closest(".juntaplay-quota-selector");!function(t){t.hasClass("is-disabled")||t.toggleClass("is-selected")}(a),e.data("selectedNumbers",i(e)),d(e)}),t(document).on("submit",".juntaplay-quota-form",function(a){var e=t(this),n=i(e.closest(".juntaplay-quota-selector"));return n.length?(e.find('input[name="jp_numbers[]"]').remove(),n.forEach(function(a){t("<input />",{type:"hidden",name:"jp_numbers[]",value:a}).appendTo(e)}),!0):(a.preventDefault(),alert(e.data("message-empty")),!1)}),t(function(){t(".juntaplay-quota-selector").each(function(){!function(a){var n={poolId:parseInt(a.data("pool"),10)||0,perPage:parseInt(a.data("perPage"),10)||120,page:1,status:(a.data("status")||"available").toString(),search:"",sort:(a.data("sort")||"ASC").toString(),loading:!1,hasMore:!0},r=a.find(".juntaplay-grid"),o=a.find("[data-quota-load]"),l=a.find("[data-quota-feedback]"),s=a.find(".juntaplay-quota-filter");function c(t){n.loading=t,a.toggleClass("is-loading",t),t?o.prop("disabled",!0).text(e("Carregando...","juntaplay")):o.prop("disabled",!1).text(n.hasMore?e("Ver mais números","juntaplay"):e("Todos os números carregados","juntaplay"))}function u(i){!n.loading&&n.poolId&&(c(!0),i&&(n.page=1,n.hasMore=!0),t.ajax({url:JuntaPlay.ajax,dataType:"json",method:"GET",data:{action:"juntaplay_pool_numbers",nonce:JuntaPlay.nonce,pool_id:n.poolId,page:n.page,per_page:n.perPage,status:n.status,search:n.search,sort:n.sort}}).done(function(t){if(t&&t.success){var s=t.data||{},c=s.items||[];i&&r.empty(),!c.length&&i?l.text(e("Nenhum número encontrado para os filtros selecionados.","juntaplay")).addClass("is-visible"):l.removeClass("is-visible").text("");var u=a.data("selectedNumbers")||[];if(c.length){var f=c.map(function(t){return p(t,-1!==u.indexOf(t.number))});r.append(f.join(""))}n.page=(s.page||1)+1,n.hasMore=(s.page||1)<(s.pages||1),n.hasMore?o.attr("disabled",!1).text(e("Ver mais números","juntaplay")):o.attr("disabled",!0).text(e("Todos os números carregados","juntaplay")),d(a)}else l.text(t&&t.data&&t.data.message?t.data.message:e("Não foi possível carregar as cotas agora.","juntaplay")).addClass("is-visible")}).fail(function(){l.text(e("Não foi possível carregar as cotas agora.","juntaplay")).addClass("is-visible")}).always(function(){c(!1)}))}a.data("selectedNumbers",i(a)),s.on("submit",function(t){t.preventDefault(),n.status=(s.find('[name="status"]').val()||"available").toString(),n.search=(s.find('[name="search"]').val()||"").toString(),n.sort=(s.find('[name="sort"]').val()||"ASC").toString(),u(!0)}),o.on("click",function(t){t.preventDefault(),n.hasMore&&!n.loading&&u(!1)}),u(!0)}(t(this))}),t(".juntaplay-pool-catalog").each(function(){u(t(this))}),t("[data-jp-two-factor]").each(function(){!function(t){if(!t.length)return;var a,n=parseInt(t.data("remaining"),10)||0,i=parseInt(t.data("cooldown"),10)||45,r=t.find("[data-jp-two-factor-timer]"),o=t.find("[data-jp-two-factor-resend-button]"),l=t.find("[data-jp-two-factor-input]");l.length&&setTimeout(function(){l.trigger("focus")},150);if(r.length&&n>0)var s=setInterval(function(){if((n-=1)<=0)return clearInterval(s),void r.attr("hidden","hidden");var t=Math.floor(n/60),a=n%60,i=String(t).padStart(2,"0")+":"+String(a).padStart(2,"0");r.removeAttr("hidden").text(e("O código expira em %s.","juntaplay").replace("%s",i))},1e3);o.length&&i>0&&t.on("submit","[data-jp-two-factor-resend]",function(){if(!o.prop("disabled")){o.prop("disabled",!0).text(e("Enviando...","juntaplay")),a&&clearInterval(a);var t=i;a=setInterval(function(){(t-=1)<=0?(clearInterval(a),o.prop("disabled",!1).text(e("Enviar novo código","juntaplay"))):o.text(e("Tente novamente em %s s","juntaplay").replace("%s",t))},1e3)}})}(t(this))}),t(".juntaplay-groups[data-jp-groups]").each(function(){!function(a){if(!a.length||void 0===window.JuntaPlay)return;var i={page:1,currentPage:1,totalPages:1,perPage:parseInt(a.data("perPage"),10)||16,loading:!1,orderby:"created",order:"desc",category:"",search:"",instant:""},r=a.data("defaultSearch"),o=a.data("defaultCategory"),l=a.data("defaultOrderby"),s=a.data("defaultOrder"),d=a.data("defaultInstant");"string"==typeof r&&r.length&&(i.search=r);"string"==typeof o&&o.length&&(i.category=o);"string"==typeof l&&l.length&&(i.orderby=l);"string"==typeof s&&s.length&&(i.order=s);"string"==typeof d&&d.length&&(i.instant=d);var p=(a.data("cardVariant")||"spotlight").toString();-1===["spotlight","compact","service"].indexOf(p)&&(p="spotlight");var c=a.find("[data-jp-groups-list]"),u=a.find("[data-jp-groups-empty]"),f=a.find("[data-jp-groups-total]"),g=a.find("[data-jp-groups-filters]"),h=a.find("[data-jp-groups-pagination]");function v(t){i.loading=t,a.toggleClass("is-loading",t)}function m(t){f.length&&(t=parseInt(t,10)||0,f.text(t?n("%d grupo encontrado","%d grupos encontrados",t,"juntaplay").replace("%d",t):e("Nenhum grupo encontrado","juntaplay")))}function y(t){if(c.empty(),t&&t.length){var a=t.map(function(t){return H(t,p)}).join("");c.html(a),u.attr("hidden","hidden")}else u.removeAttr("hidden")}function _(t,a){var e=[],n=Math.max(1,t-2),i=Math.min(a,t+2);n>1&&(e.push(1),n>2&&e.push("ellipsis"));for(var r=n;r<=i;r+=1)e.push(r);return i<a&&(i<a-1&&e.push("ellipsis"),e.push(a)),e}function j(){if(h.length){var t=i.totalPages,a=i.currentPage;if(t<=1)h.empty().attr("hidden","hidden");else{var n=_(a,t),r=a<=1,o=a>=t,l=[];l.push('<button type="button" class="juntaplay-pagination__nav'+(r?" is-disabled":"")+'" data-page="'+(a-1)+'"'+(r?' aria-disabled="true" disabled':"")+">"+e("Anterior","juntaplay")+"</button>"),n.forEach(function(t){if("ellipsis"!==t){var e=t===a;l.push('<button type="button" class="juntaplay-pagination__page'+(e?" is-active":"")+'" data-page="'+t+'"'+(e?' aria-current="page"':"")+">"+t+"</button>")}else l.push('<span class="juntaplay-pagination__ellipsis" aria-hidden="true">…</span>')}),l.push('<button type="button" class="juntaplay-pagination__nav'+(o?" is-disabled":"")+'" data-page="'+(a+1)+'"'+(o?' aria-disabled="true" disabled':"")+">"+e("Próxima","juntaplay")+"</button>"),h.html(l.join("")).removeAttr("hidden")}}}function w(a){i.loading||("number"!=typeof a||Number.isNaN(a)||(i.page=Math.max(1,a)),v(!0),t.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_groups_directory",nonce:window.JuntaPlay.nonce,page:i.page,per_page:i.perPage,search:i.search,category:i.category,orderby:i.orderby,order:i.order,instant_access:i.instant}).done(function(t){if(t&&t.success&&t.data){var a=t.data,e=parseInt(a.page,10)||i.page,n=parseInt(a.pages,10)||1;i.currentPage=e,i.totalPages=n,y(a.items||[]),m(a.total||0),j()}}).fail(function(){c.empty(),u.removeAttr("hidden").text(e("Não foi possível carregar os grupos agora.","juntaplay")),i.totalPages=1,j()}).always(function(){v(!1)}))}if(g.length){if(i.search&&g.find('input[name="search"]').val(i.search),i.category&&g.find('select[name="category"]').val(i.category),"1"===i.instant&&g.find('input[name="instant"]').prop("checked",!0),i.orderby){var b=g.find('select[name="orderby"]');if(b.length){var x=b.find("option").filter(function(){var a=t(this),e=(a.val()||"").toString(),n=(a.data("order")||"").toString();return e===i.orderby&&(!i.order||n===i.order)}).first();if(x.length)b.val(x.val()),b.find("option").prop("selected",!1),x.prop("selected",!0),i.order=(x.data("order")||i.order||"desc").toString();else{b.val(i.orderby);var S=b.find(":selected");S.length&&(i.order=(S.data("order")||i.order||"desc").toString())}}}g.on("submit",function(t){t.preventDefault(),i.search=g.find('input[name="search"]').val()||"",w(1)}),g.on("change",'select[name="category"]',function(){i.category=t(this).val()||"",w(1)}),g.on("change",'select[name="orderby"]',function(){var a=t(this).find(":selected");i.orderby=t(this).val()||"created",i.order=(a.data("order")||"desc").toString(),w(1)}),g.on("change",'input[name="instant"]',function(){i.instant=t(this).is(":checked")?"1":"",w(1)}),g.on("click","[data-jp-groups-clear]",function(){g.find('input[name="search"]').val(""),g.find('select[name="category"]').prop("selectedIndex",0);var t=g.find('select[name="orderby"]');t.prop("selectedIndex",0),i.orderby=t.val()||"created",i.order=(t.find(":selected").data("order")||"desc").toString(),g.find('input[name="instant"]').prop("checked",!1),i.search="",i.category="",i.instant="",w(1)})}h.length&&h.on("click","[data-page]",function(e){e.preventDefault();var n=parseInt(t(this).attr("data-page"),10);Number.isNaN(n)||n<1||n>i.totalPages||n===i.currentPage||(w(n),window.requestAnimationFrame(function(){var e=a.offset();e&&t("html, body").animate({scrollTop:Math.max(0,e.top-120)},240)}))});w(1)}(t(this))}),t("[data-group-cover]").each(function(){W(t(this))}),t(".juntaplay-group-rotator").each(function(){!function(a){if(!a.length||void 0===window.JuntaPlay)return;var e=parseInt(a.data("limit"),10)||12,n={category:(a.data("defaultCategory")||"").toString(),loading:!1},i=!1,r=a.find("[data-rotator-grid]"),o=a.find("[data-rotator-track]"),l=a.find("[data-rotator-empty]"),s=a.find('[data-rotator-nav="prev"]'),d=a.find('[data-rotator-nav="next"]');function p(t){n.loading=t,a.toggleClass("is-loading",t)}function c(){if(o.length){var t=o.get(0);if(t){var a=Math.max(0,t.scrollWidth-t.clientWidth),e=t.scrollLeft,n=4,i=e<=n,r=e>=a-n;s.length&&s.toggleClass("is-disabled",i).prop("disabled",i).attr("aria-disabled",i?"true":"false"),d.length&&d.toggleClass("is-disabled",r).prop("disabled",r).attr("aria-disabled",r?"true":"false")}}}function u(t){if(r.empty(),t&&t.length){var a=t.map(function(t){return H(t,"service")}).join("");r.html(a),l.length&&l.attr("hidden","hidden"),h()}else l.length&&l.removeAttr("hidden")}function f(){if("undefined"==typeof window)return 0;g();var t=(window.location.hash||"").toString();if(!t)return 0;var a=t.match(/^#jp-group-card-(\d+)/i);return!a||a.length<2?0:parseInt(a[1],10)||0}function g(){if("undefined"!=typeof window&&!window.location.hash){var t="";try{var a=new URL(window.location.href);if(t=(a.searchParams.get("jp_group_anchor")||"").toString()){a.searchParams.delete("jp_group_anchor");var e=a.toString();window.history.replaceState({},document.title,e)}}catch(a){var n=(window.location.search||"").match(/[?&]jp_group_anchor=([^&#]*)/);n&&n[1]&&(t=decodeURIComponent(n[1].replace(/\+/g," ")))}if(t){var i=t.replace(/[^A-Za-z0-9_-]/g,"");i&&(window.location.hash="#"+i)}}}function h(){if(!i){var a=f();if(a){var e=t("#jp-group-card-"+a);if(e.length){i=!0;var n=e.get(0);if(n&&"function"==typeof n.scrollIntoView)try{n.scrollIntoView({behavior:"smooth",block:"center"})}catch(t){try{n.scrollIntoView()}catch(t){}}window.setTimeout(function(){var e=t("#jp-group-card-"+a);if(e.length){e.attr("tabindex")||e.attr("tabindex","-1");try{e.focus()}catch(t){}var n=e.find("[data-jp-group-open]").first();n.length&&n.trigger("click")}},120)}}}}function v(){n.loading||(p(!0),t.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_groups_directory",nonce:window.JuntaPlay.nonce,page:1,per_page:e,orderby:"updated",order:"desc",category:n.category}).done(function(t){t&&t.success&&t.data?u(t.data.items||[]):u([])}).fail(function(){u([])}).always(function(){p(!1)}))}o.length&&(o.on("click","[data-rotator-filter]",function(a){a.preventDefault();var e=t(this),i=(e.data("rotatorFilter")||"").toString();if(i!==n.category){n.category=i,e.addClass("is-active").attr("aria-selected","true"),e.siblings("[data-rotator-filter]").removeClass("is-active").attr("aria-selected","false");var r=e.get(0);if(r&&"function"==typeof r.scrollIntoView)try{r.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}catch(t){}v()}}),o.on("scroll",function(){c()}));if(s.length||d.length){var m=function(t){if(o.length){var a=o.get(0);if(a){var e=.6*a.clientWidth,n=Math.max(0,Math.min(a.scrollLeft+t*e,a.scrollWidth-a.clientWidth));o.stop().animate({scrollLeft:n},260,"swing",c)}}};s.length&&s.on("click",function(a){a.preventDefault(),t(this).hasClass("is-disabled")||m(-1)}),d.length&&d.on("click",function(a){a.preventDefault(),t(this).hasClass("is-disabled")||m(1)}),t(window).on("resize",function(){c()})}v(),c()}(t(this))}),t(".juntaplay-dashboard[data-dashboard]").each(function(){!function(a){if(a&&a.length){var e=a.find("[data-dashboard-tab]"),n=a.find("[data-dashboard-panel]");if(e.length&&n.length){var i=null;e.on("click",function(a){a.preventDefault();var e=(t(this).data("dashboardTab")||"").toString();e&&e!==i&&d(e)});var r=(e.filter(".is-active").first().data("dashboardTab")||"").toString();try{var o=(new URL(window.location.href).searchParams.get("jp_tab")||"").toString();o&&e.filter('[data-dashboard-tab="'+o+'"]').length&&(r=o)}catch(t){}if(!r&&window.location.hash){var l=window.location.hash.replace("#","");if(0===l.indexOf("jp_tab=")){var s=l.split("=")[1]||"";s&&e.filter('[data-dashboard-tab="'+s+'"]').length&&(r=s)}}!r&&e.length&&(r=(e.first().data("dashboardTab")||"").toString()),d(r)}}function d(a){if(a&&(i=a,e.each(function(){var e=t(this),n=(e.data("dashboardTab")||"").toString()===a;e.toggleClass("is-active",n),e.attr("aria-selected",n?"true":"false")}),n.each(function(){var e=t(this),n=(e.data("dashboardPanel")||"").toString()===a;e.toggleClass("is-active",n),e.attr("aria-hidden",n?"false":"true")}),window.history&&window.history.replaceState))try{var r=new URL(window.location.href);r.searchParams.set("jp_tab",a),window.history.replaceState({},document.title,r.toString())}catch(t){}}}(t(this))});var a=t("#jp-group-create-template");a.length&&parseInt(a.data("autoOpen"),10)&&Y()}),t(document).on("click","[data-group-filter]",function(a){a.preventDefault();var e=t(this),n=(e.data("group-filter")||"all").toString(),i=e.closest("[data-groups]");i.length&&(e.addClass("is-active").attr("aria-selected","true"),e.siblings("[data-group-filter]").removeClass("is-active").attr("aria-selected","false"),i.data("role-filter",n),f(i))}),t(document).on("change","[data-group-status-filter]",function(){var a=t(this),e=(a.val()||"all").toString(),n=a.closest("[data-groups]");n.length&&(n.data("status-filter",e),f(n))}),t(document).on("click","[data-group-card-toggle]",function(a){a.preventDefault();var e=t(this),n="true"===e.attr("aria-expanded");n=!n,e.attr("aria-expanded",n?"true":"false");var i=e.data("labelExpand")||e.data("label-expand")||"",r=e.data("labelCollapse")||e.data("label-collapse")||"",o=e.find(".juntaplay-group-card__toggle-label");o.length&&(n&&r?o.text(r):!n&&i&&o.text(i));var l=e.closest(".juntaplay-group-card"),s=l.find("[data-group-card-details]").first();s.length&&(n?s.removeAttr("hidden"):s.attr("hidden","hidden")),l.length&&l.toggleClass("is-expanded",n)}),t(document).on("click","[data-group-detail-trigger]",function(a){a.preventDefault();var e=(t(this).data("detailTarget")||t(this).data("target")||"").toString();e&&("#"!==e.charAt(0)&&(e="#"+e),function(a){if(!a)return;var e=t("[data-group-modal]");if(!e.length)return;var n=$(a);if(!n||!n.length)return;K(e,n)}(e))}),t(document).on("click","[data-jp-group-open]",function(a){if(!(a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||2===a.which)){var e=t(this),n=parseInt(e.data("groupId"),10);if(!n){var i=e.closest("[data-group-id]");i.length&&(n=parseInt(i.data("groupId"),10)||0)}n&&(h(e,n,a)||(a.preventDefault(),a.stopPropagation(),void 0!==at&&at&&"function"==typeof at.loadDetail&&at.loadDetail(n)))}}),t(document).on("click","[data-group-create-trigger]",function(t){t.preventDefault(),Y()}),t(document).on("click","[data-modal-close]",function(a){a.preventDefault(),X(t(this).closest(".juntaplay-modal"))}),t(document).on("click",".juntaplay-modal__overlay",function(a){a.preventDefault(),X(t(this).closest(".juntaplay-modal"))}),t(document).on("keyup",function(a){"Escape"===a.key&&t(".juntaplay-modal.is-open").each(function(){X(t(this))})}),t(document).on("click","[data-jp-share-network]",function(a){a.preventDefault();var e=t(this),n=function(t,a,e){var n=(a||"").toString();if(!n)return"";var i=encodeURIComponent(n),r=encodeURIComponent((e||"").toString());switch((t||"").toString().toLowerCase()){case"whatsapp":return"https://wa.me/?text="+r+(r?"%20":"")+i;case"telegram":return"https://t.me/share/url?url="+i+"&text="+r;case"facebook":return"https://www.facebook.com/sharer/sharer.php?u="+i;case"twitter":case"x":return"https://twitter.com/intent/tweet?url="+i+"&text="+r;default:return""}}((e.data("jpShareNetwork")||"").toString(),(e.data("jpShareUrl")||"").toString(),(e.data("jpShareText")||document.title||"").toString());n&&function(t){if(!t)return;var a=640,e=520,n=window.screenX+Math.max(0,(window.outerWidth-a)/2),i=window.screenY+Math.max(0,(window.outerHeight-e)/2);window.open(t,"_blank","noopener,noreferrer,width="+a+",height="+e+",left="+n+",top="+i)}(n)}),t(document).on("click","[data-jp-share-copy]",function(a){a.preventDefault();var n=t(this),i=(n.data("jpShareUrl")||"").toString();if(i){var r=(n.data("jpShareLabel")||n.text()).toString(),o=(n.data("jpShareCopied")||e("Link copiado!","juntaplay")).toString();(function(t){var a=(t||"").toString();if(!a)return Promise.reject();if(navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)return navigator.clipboard.writeText(a);return new Promise(function(t,e){try{var n=document.createElement("textarea");n.value=a,n.setAttribute("readonly","readonly"),n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select();var i=document.execCommand("copy");document.body.removeChild(n),i?t():e()}catch(t){e(t)}})})(i).then(function(){n.addClass("is-success").text(o),window.setTimeout(function(){n.removeClass("is-success").text(r)},2200)}).catch(function(){n.addClass("is-error"),window.setTimeout(function(){n.removeClass("is-error").text(r)},1800)})}}),t(document).on("change","[data-group-promo-toggle]",function(){j(t(this))}),t(document).on("input change","[data-group-price-input], [data-group-slot-input]",function(){_(t(this).closest("form"))}),t(document).on("change","#jp-group-instant",function(){var a=t(this),e=a.closest(".juntaplay-toggle").find(".juntaplay-toggle__caption");if(e.length){var n=(e.data("toggle-caption-active")||"Ativado").toString(),i=(e.data("toggle-caption-inactive")||"Desativado").toString();e.text(a.is(":checked")?n:i)}y(a.closest("form"))}),t(document).on("input","[data-group-member-input]",function(){var a=t(this);a.data("jpDirty",!0),a.data("group-member-generated","no"),_(a.closest("form"))}),t(document).on("blur","[data-group-member-input]",function(){var a=t(this),e=v(a.val());e>0&&a.val(m(e))}),t(document).on("input change","[data-group-share-watch]",function(){y(t(this).closest("form"))}),t(document).on("click","[data-group-share-copy]",function(a){a.preventDefault();var e=t(this),n=e.closest("[data-group-share]").find("[data-group-share-text]");if(!n.length){var i=e.closest("form");i.length&&(n=i.find("[data-group-share-text]"))}if(n.length){var r=(n.val()||"").toString();if(r){var o=(e.data("default-label")||e.text()||"").toString(),l=(e.data("success-label")||o).toString(),s=function(){e.text(l).addClass("is-success"),setTimeout(function(){e.text(o).removeClass("is-success")},2e3)},d=function(){alert(e.data("error-label")||"Não foi possível copiar agora. Copie manualmente.")};if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(r).then(s).catch(d);else{var p=n[0],c=p.hasAttribute("hidden");try{p.removeAttribute("hidden"),p.select(),document.execCommand("copy")?s():d()}catch(t){d()}finally{if(c&&p.setAttribute("hidden","hidden"),window.getSelection)try{window.getSelection().removeAllRanges()}catch(t){}}}}}}),t(document).on("click","[data-group-pool-apply]",function(a){a.preventDefault();var e=t(this),n=e.closest(".juntaplay-groups__create-modal, .juntaplay-groups__create-card").find("form").first();if(n.length){var i=(e.data("poolId")||"").toString(),r=(e.data("poolName")||"").toString(),o=parseFloat((e.data("poolPrice")||"").toString().replace(",",".")),l=(e.data("poolCategory")||"").toString(),s=(e.data("poolExcerpt")||"").toString(),d=parseInt((e.data("poolTotal")||"").toString(),10),p=parseInt((e.data("poolStart")||"").toString(),10),c=(parseInt((e.data("poolEnd")||"").toString(),10),parseInt((e.data("poolIconId")||"").toString(),10)||0),u=(e.data("poolCover")||e.data("poolIcon")||"").toString(),f=(e.data("poolUrl")||"").toString(),g=Number.isFinite(p)&&p>0?Math.max(0,p-1):0,h=n.find('[name="jp_profile_group_pool"]');h.length&&(h.val(i),h.trigger("change"));var v=n.find('[name="jp_profile_group_service"]');v.length&&!t.trim((v.val()||"").toString())&&r&&v.val(r).trigger("input");var y=n.find('[name="jp_profile_group_description"]');y.length&&!t.trim((y.val()||"").toString())&&s&&y.val(s).trigger("input");var _=n.find('[name="jp_profile_group_service_url"]');_.length&&!t.trim((_.val()||"").toString())&&f&&_.val(f).trigger("input");var j=n.find('[name="jp_profile_group_name"]');if(j.length&&!t.trim((j.val()||"").toString())&&r&&j.val(r).trigger("input"),Number.isFinite(o)&&o>0){var w=n.find('[name="jp_profile_group_price"]');w.length&&w.val(m(o)).trigger("input")}if(l){var b=n.find('[name="jp_profile_group_category"]');b.length&&b.val(l).trigger("change")}if(Number.isFinite(d)&&d>0){var x=n.find('[name="jp_profile_group_slots_total"]');x.length&&x.val(d).trigger("input")}if(Number.isFinite(g)&&g>=0){var S=n.find('[name="jp_profile_group_slots_reserved"]');S.length&&S.val(g).trigger("input")}if(u||c){var C=n.find("[data-group-cover-input]"),D=n.find("[data-group-cover-preview]"),I=n.find("[data-group-cover-remove]");C.length&&C.val(c?c.toString():"").data("externalCover",u),D.length&&D.css("background-image","url("+u+")").find("img").attr("src",u),I.length&&I.prop("disabled",!1)}var A=e.closest("[data-group-view-root]");A.length&&(k(A),P(A,"wizard"))}}),t(document).on("click","[data-group-view-target]",function(a){a.preventDefault();var e=t(this),n=(e.data("groupViewTarget")||"").toString();if(n){var i=e.closest("[data-group-view-root]");if(i.length||(i=t("[data-group-view-root]").first()),i.length&&("wizard"===n&&k(i),P(i,n),"wizard"===n)){var r=i.find("form[data-group-wizard]").first().find("input, select, textarea").filter(":visible").first();r.length&&r.trigger("focus")}}}),t(document).on("click","[data-group-start-scratch]",function(a){a.preventDefault();var e=t(this).closest("[data-group-view-root]");if(e.length){var n=e.find("form[data-group-wizard]").first();if(n.length){var i=n.find('[name="jp_profile_group_pool"]');i.length&&i.val("").trigger("change")}k(e),P(e,"wizard")}}),t(document).on("change",'[name="jp_profile_group_pool"]',function(){w(t(this))}),t(document).on("click","[data-group-suggestion-apply]",function(a){a.preventDefault();var e=t(this),n=e.closest("[data-group-suggestion]"),i=e.closest(".juntaplay-groups__create-modal, .juntaplay-groups__create-card").find("form").first();if(n.length&&i.length){var r=(n.data("title")||"").toString(),o=parseFloat((n.data("amount")||"").toString().replace(",",".")),l=(n.data("category")||"").toString(),s=(n.data("description")||"").toString();r&&i.find('[name="jp_profile_group_service"]').val(r).trigger("input");var d=i.find('[name="jp_profile_group_name"]');if(d.length&&!t.trim((d.val()||"").toString())&&d.val(r).trigger("input"),s){var p=i.find('[name="jp_profile_group_description"]');p.length&&!t.trim((p.val()||"").toString())&&p.val(s).trigger("input")}Number.isFinite(o)&&o>0&&i.find('[name="jp_profile_group_price"]').val(m(o)).trigger("input"),l&&i.find('[name="jp_profile_group_category"]').val(l).trigger("change");var c=i.find("[data-group-promo-toggle]");c.length&&(c.prop("checked",!1),j(c));var u=i.find('[name="jp_profile_group_price_promo"]');u.length&&u.val("");var f=i.find('[name="jp_profile_group_member_price"]');f.length&&f.val("").data("group-member-generated","yes"),_(i),y(i)}}),t(document.body).on("updated_wc_div updated_cart_totals wc_fragments_refreshed",function(){t(".juntaplay-quota-selector").each(function(){d(t(this))})}),t(function(){t("[data-groups]").each(function(){f(t(this))}),t("[data-group-member-input]").each(function(){var a=t(this);"yes"===a.data("group-member-generated")?a.removeData("jpDirty"):a.val()&&a.data("jpDirty",!0),_(a.closest("form"))}),t("[data-group-promo-toggle]").each(function(){var a=t(this);a.is(":checked")&&a.closest("form").find("[data-group-promo-field]").removeClass("is-hidden")}),t('[name="jp_profile_group_pool"]').each(function(){w(t(this))}),t("[data-group-wizard]").each(function(){S(t(this))}),t("[data-group-share]").each(function(){y(t(this).closest("form"))})}),t(document).on("click",".juntaplay-auth__switch-btn",function(a){a.preventDefault();var e=t(this);if(!e.is(":disabled")){var n=e.data("target");I(e.closest(".juntaplay-auth"),n)}}),t(function(){t(".juntaplay-auth").each(function(){var a=t(this);I(a,a.data("active-view"))})}),t(document).on("click","[data-auth-step-next]",function(a){a.preventDefault();var e=t(this).closest("form[data-register-wizard]");e.length&&J(e,1)}),t(document).on("click","[data-auth-step-prev]",function(a){a.preventDefault();var e=t(this).closest("form[data-register-wizard]");e.length&&J(e,-1)}),t(document).on("submit","form[data-register-wizard]",function(a){var e=t(this),n=parseInt(e.attr("data-step"),10)||1;return n<(e.find("[data-auth-step]").length||1)?(a.preventDefault(),J(e,1),!1):!!N(e,n)||(a.preventDefault(),!1)}),t(function(){t("form[data-register-wizard]").each(function(){var a=t(this);A(a,parseInt(a.data("step"),10)||1)})});var T=null,L=null;function E(a,e,n){var i=n&&n.length?n:null,r=i&&i.length?i.closest(".juntaplay-auth"):t(".juntaplay-auth").first();if(r.length)if("success"!==a&&e){i&&i.length||(i=r.find(".juntaplay-auth__pane.is-active").first()).length||(i=r.find(".juntaplay-auth__pane--login").first());var o=i.find(".juntaplay-auth__form").first(),l=i.find("[data-jp-auth-social-error]").first();if(o.length){l.length||(l=t('<div class="juntaplay-auth__alert" role="alert" data-jp-auth-social-error><ul></ul></div>'),o.prepend(l));var s=l.find("ul").first();s.length||(s=t("<ul></ul>"),l.empty().append(s)),s.empty().append(t("<li></li>").text(e))}else window.alert(e)}else r.find("[data-jp-auth-social-error]").remove();else"error"===a&&e&&window.alert(e)}function M(t){if(t&&t.length){t.removeClass("is-open");var a=t.find("[data-guest-menu-toggle]").first();a.length&&a.attr("aria-expanded","false");var e=t.find("[data-guest-menu-panel]").first();e.length&&e.attr("aria-hidden","true")}}function R(){return window.matchMedia?window.matchMedia("(max-width: 768px)").matches:!!window.innerWidth&&window.innerWidth<=768}function U(t){if(t&&t.length){t.removeClass("is-menu-open");var a=t.find("[data-profile-menu-toggle]").first(),e=a.length>0;e&&a.attr("aria-expanded","false");var n=t.find("[data-profile-menu]").first();n.length&&(e?n.attr("aria-hidden",R()?"true":"false"):n.attr("aria-hidden","false"));var i=t.find("[data-profile-menu-overlay]").first();i.length&&i.attr("aria-hidden","true")}}function V(a,e,n){if(a&&e){var i=a.find("[data-profile-category-toggle]"),r=a.find("[data-profile-category-panel]");i.each(function(){var a=t(this),n=a.data("profileCategoryToggle")===e||a.attr("data-profile-category-toggle")===e;a.toggleClass("is-active",n),a.attr("aria-pressed",n?"true":"false")}),r.each(function(){var a=t(this),n=a.data("profileCategoryPanel")===e;a.toggleClass("is-active",n),a.attr("aria-hidden",n?"false":"true")});var o=r.filter('[data-profile-category-panel="'+e+'"]');if(o.length){if(!n){var l=o.find("[data-profile-tab-toggle].is-active").first();l.length&&(n=l.data("profileTabToggle")||"")}if(!n){var s=o.find("[data-profile-tab-panel]").first();s.length&&(n=s.data("profileTabPanel")||"")}!function(a,e,n){if(a&&e){var i=a.find('[data-profile-category-panel="'+e+'"]');if(i.length){var r=i.find("[data-profile-tab-panel]"),o=i.find("[data-profile-tab-toggle]");!n&&r.length&&(n=r.first().data("profileTabPanel")||""),o.each(function(){var a=t(this),e=a.data("profileTabToggle")===n;a.toggleClass("is-active",e),a.attr("aria-selected",e?"true":"false")}),r.each(function(){var a=t(this),e=a.data("profileTabPanel")===n;a.toggleClass("is-active",e),a.attr("aria-hidden",e?"false":"true")})}}}(a,e,n)}}}t(document).on("click","[data-jp-auth-popup]",function(a){var e=t(this),n=(e.attr("href")||"").toString(),i=e.closest(".juntaplay-auth__pane");if(n&&"#"!==n){a.preventDefault(),L=i.length&&i.data("pane")||null,E("success","",i);var r=n,o=(e.data("jpAuthContext")||"").toString();try{var l=new URL(n,window.location.origin);l.searchParams.set("popup","1"),o&&l.searchParams.set("context",o),r=l.toString()}catch(t){r=n+(-1===n.indexOf("?")?"?popup=1":"&popup=1"),o&&(r+="&context="+encodeURIComponent(o))}var s=void 0!==window.screenLeft?window.screenLeft:window.screenX,d=void 0!==window.screenTop?window.screenTop:window.screenY,p=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=Math.max(s+(p-520)/2,0),f=Math.max(d+(c-640)/2,0);if((T=window.open(r,"juntaplaySocialLogin","width=520,height=640,left="+u+",top="+f+",status=0,toolbar=0,menubar=0,location=0,resizable=1,scrollbars=1"))&&!T.closed)try{T.focus()}catch(t){}else window.location.href=r}}),t(window).on("message",function(a){var e=(a.originalEvent||a).data;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=null}if(e&&"object"==typeof e&&"juntaplay-social"===e.source){if(T&&!T.closed)try{T.close()}catch(t){}if(T=null,"success"===e.status){E("success",""),L=null;var n="string"==typeof e.redirect?e.redirect:"",i=t("[data-auth-modal]");return i.length&&X(i),void(n?window.location.href=n:window.location.reload())}if("error"===e.status&&"string"==typeof e.message&&e.message){var r=null,o=t(".juntaplay-auth").first(),l="";"string"==typeof e.context&&e.context?l=e.context:L&&(l=L),o.length&&l&&(r=o.find('.juntaplay-auth__pane[data-pane="'+l+'"]').first()),E("error",e.message,r),L=null}}}),t(document).on("click","[data-jp-auth-open]",function(a){var e=t(this),n=t("#jp-auth-modal-template"),i=t("[data-auth-modal]");if(a.preventDefault(),n.length&&i.length){var r=(e.data("jpAuthOpen")||"login").toString(),o=$("#jp-auth-modal-template");if(o&&o.length){K(i,o);var l=i.find(".juntaplay-auth").first();l.length&&r&&I(l,r)}}else{var s=e.attr("href");s&&(window.location.href=s)}}),t(document).on("click","[data-guest-menu-toggle]",function(a){a.preventDefault();var e=t(this),n=e.closest("[data-guest-menu]");if(n.length){var i=n.hasClass("is-open");if(t("[data-guest-menu].is-open").each(function(){M(t(this))}),!i){n.addClass("is-open"),e.attr("aria-expanded","true");var r=n.find("[data-guest-menu-panel]").first();r.length&&r.attr("aria-hidden","false")}}}),t(document).on("click","[data-guest-menu-panel] a, [data-guest-menu-panel] button",function(){M(t(this).closest("[data-guest-menu]"))}),t(document).on("click",function(a){t(a.target).closest("[data-guest-menu]").length||t("[data-guest-menu].is-open").each(function(){M(t(this))})}),t(function(){var a=t("#jp-auth-modal-template");if(a.length){var e=(a.data("autoOpen")||"").toString();e&&window.requestAnimationFrame(function(){var a=t('[data-jp-auth-open="'+e+'"]').first();if(a.length)a.trigger("click");else{var n=t("[data-auth-modal]");if(n.length){var i=$("#jp-auth-modal-template");if(i&&i.length){K(n,i);var r=n.find(".juntaplay-auth").first();r.length&&I(r,e)}}}})}}),t(function(){t("[data-guest-menu-panel]").attr("aria-hidden","true")}),t(document).on("click","[data-profile-category-toggle]",function(a){a.preventDefault();var e=t(this),n=e.attr("data-profile-category-toggle")||"",i=e.closest("[data-profile]");V(i,n),U(i)}),t(document).on("click","[data-profile-quick]",function(a){a.preventDefault();var e=t(this),n=e.attr("data-profile-quick-category")||"",i=e.attr("data-profile-quick-tab")||"",r=e.closest("[data-profile]");n&&(V(r,n,i),U(r))}),t(document).on("click","[data-profile-tab-toggle]",function(a){a.preventDefault();var e=t(this),n=e.attr("data-profile-tab-toggle")||"",i=e.attr("data-profile-tab-category")||"",r=e.closest("[data-profile]");i||(i=r.find("[data-profile-category-toggle].is-active").first().attr("data-profile-category-toggle")||"");V(r,i,n),U(r)}),t(document).on("click","[data-profile-menu-toggle]",function(a){a.preventDefault();var e=t(this),n=e.closest("[data-profile]");if(n.length){var i=n.hasClass("is-menu-open");n.toggleClass("is-menu-open",!i),e.attr("aria-expanded",i?"false":"true");var r=n.find("[data-profile-menu]").first();if(r.length){var o=R();!i&&o?r.attr("aria-hidden","false"):o?r.attr("aria-hidden","true"):r.attr("aria-hidden","false")}var l=n.find("[data-profile-menu-overlay]").first();l.length&&(!i&&R()?l.attr("aria-hidden","false"):l.attr("aria-hidden","true"))}}),t(document).on("click","[data-profile-menu-close]",function(a){a.preventDefault(),U(t(this).closest("[data-profile]"))}),t(document).on("click","[data-profile-menu-overlay]",function(a){a.preventDefault(),U(t(this).closest("[data-profile]"))}),t(document).on("click","[data-profile-menu-link]",function(){U(t(this).closest("[data-profile]"))}),t(document).on("keydown",function(a){if(a.key&&"escape"===a.key.toLowerCase()||27===a.keyCode){var e=t("[data-guest-menu].is-open").first();if(e.length)return void M(e);var n=t("[data-profile].is-menu-open").first();n.length&&U(n)}}),t(function(){if(t("[data-profile-menu-overlay]").attr("aria-hidden","true"),t("[data-profile]").each(function(){var a=t(this),e=a.find("[data-profile-menu]").first();e.length&&(a.find("[data-profile-menu-toggle]").length>0?e.attr("aria-hidden",R()?"true":"false"):e.attr("aria-hidden","false"));var n=a.find("[data-profile-category-toggle].is-active").first().attr("data-profile-category-toggle")||"";if(!n&&a.find("[data-profile-category-toggle]").length&&(n=a.find("[data-profile-category-toggle]").first().attr("data-profile-category-toggle")||""),n){var i=a.find('[data-profile-category-panel="'+n+'"] [data-profile-tab-toggle].is-active').first();V(a,n,i.attr("data-profile-tab-toggle")||"")}}),window.matchMedia){var a=window.matchMedia("(max-width: 768px)"),e=function(e){var n=e;n&&"boolean"==typeof n.matches||(n=a);var i=!(!n||"boolean"!=typeof n.matches||!n.matches);t("[data-profile]").each(function(){var a=t(this),e=a.find("[data-profile-menu]").first(),n=a.find("[data-profile-menu-toggle]").length>0;if(e.length)if(n){var r=i&&!a.hasClass("is-menu-open");e.attr("aria-hidden",r?"true":"false")}else e.attr("aria-hidden","false");var o=a.find("[data-profile-menu-overlay]").first();if(o.length)if(n){var l=!a.hasClass("is-menu-open")||!i;o.attr("aria-hidden",l?"true":"false")}else o.attr("aria-hidden","true")})};"function"==typeof a.addEventListener?a.addEventListener("change",e):"function"==typeof a.addListener&&a.addListener(e),e(a)}}),t(document).on("click",".juntaplay-profile__edit",function(a){a.preventDefault();var e=t(this),n=e.closest(".juntaplay-profile__row"),i=e.closest(".juntaplay-profile"),r=n.hasClass("is-editing");if(r||(i.find(".juntaplay-profile__row").removeClass("is-editing"),i.find(".juntaplay-profile__form").attr("aria-hidden","true"),i.find(".juntaplay-profile__edit").attr("aria-expanded","false")),n.toggleClass("is-editing",!r),n.find(".juntaplay-profile__form").attr("aria-hidden",r?"true":"false"),e.attr("aria-expanded",r?"false":"true"),!r){var o=n.find(".juntaplay-form__input").first();o.length&&setTimeout(function(){o.trigger("focus")},20)}}),t(document).on("click",".juntaplay-profile__cancel",function(a){a.preventDefault();var e=t(this).closest(".juntaplay-profile__row");e.removeClass("is-editing"),e.find(".juntaplay-profile__form").attr("aria-hidden","true"),e.find(".juntaplay-profile__edit").attr("aria-expanded","false")});var F={};function O(t){return(t||"").toString().replace(/\D+/g,"").slice(0,8)}function q(t){var a=O(t);return 8===a.length?a.replace(/(\d{5})(\d{3})/,"$1-$2"):t||""}function B(t){t.length&&t[0].setCustomValidity&&t[0].setCustomValidity(""),t.removeAttr("data-jp-cep-error")}function z(t,a){t.length&&t[0].setCustomValidity&&(t[0].setCustomValidity(a),"function"==typeof t[0].reportValidity&&t[0].reportValidity()),t.attr("data-jp-cep-error","1")}function Q(a,e){var n=a.closest("form");if(n.length){var i=[];e.logradouro&&i.push(e.logradouro),e.complemento&&i.push(e.complemento),e.bairro&&i.push(e.bairro);var r=i.join(" - ");r&&n.find('[data-jp-cep-target="address"]').each(function(){t(this).val(r).trigger("change")}),e.localidade&&n.find('[data-jp-cep-target="city"]').val(e.localidade).trigger("change"),e.uf&&n.find('[data-jp-cep-target="state"]').val(e.uf.toUpperCase()).trigger("change");var o=n.find('[data-jp-cep-target="country"]').first();if(o.length){var l=(o.val()||"").toString();l&&!/^(br|brasil|brazil)$/i.test(l)||o.val("Brasil").trigger("change")}e.cep&&a.val(q(e.cep)).trigger("change")}}function G(t,a){var e=t.data("defaultLabel"),n=t.data("openLabel");e||(e=t.text(),t.data("defaultLabel",e)),n||(n=e),a?t.addClass("is-active").text(n):t.removeClass("is-active").text(e)}function H(t,a){var n=(a||"spotlight").toString(),i=["juntaplay-group-card","juntaplay-group-card--iconic"],l=parseInt(t.id,10)||0,s=l?' id="jp-group-card-'+l+'"':"",d=" data-group-card",p=" data-jp-group-open";l&&(p+=' data-group-id="'+l+'"',d+=' data-group-id="'+l+'"');var c,u,f=t.title||t.service||e("Grupo disponível","juntaplay"),g=(c="compact"===n?28:32,(u=String(f||"")).length<=c?u:u.slice(0,Math.max(0,c-1))+"…"),h=f?' title="'+o(f)+'"':"",v="number"==typeof t.memberPrice?t.memberPrice:"number"==typeof t.price?t.price:null,m=null!==v?r(v,"BRL","pt-BR"):t.memberPriceLabel||t.priceLabel||"",y=m?'<span class="juntaplay-group-card__price">'+o(m)+"</span>":"",_=t.permalink?o(t.permalink):"#",j=t.iconUrl||"",w=(t.iconInitial||"").toString(),b=["juntaplay-group-card__avatar","juntaplay-service-card__icon"];j&&b.push("has-image");var x='<span class="'+b.join(" ")+'"'+(j?' style="background-image: url('+o(j)+')"':"")+' aria-hidden="true">'+(!j&&w?o(w):"")+"</span>",S='<div class="juntaplay-group-card__media juntaplay-group-card__media--icon">'+x+"</div>";if("spotlight"===n?i.push("juntaplay-group-card--spotlight"):"compact"===n&&(i.push("juntaplay-group-card--compact"),i.push("juntaplay-service-card")),"service"===n){var C=t.service||"";C&&C===f&&(C="");var k=[],P=parseInt(t.slotsTotal,10)||0;if((F=t.categoryLabel||"")&&k.push('<span class="juntaplay-service-card__pill">'+o(F)+"</span>"),P>0){var D=1===P?e("1 usuário","juntaplay"):P+" "+e("usuários","juntaplay");k.push('<span class="juntaplay-service-card__pill juntaplay-service-card__pill--muted">'+o(D)+"</span>")}m&&k.push('<span class="juntaplay-service-card__price">'+o(m)+"</span>");var I=k.length?'<span class="juntaplay-service-card__meta">'+k.join("")+"</span>":"",A='<button type="button" class="juntaplay-service-card__cta-button"'+p+">"+e("Confira","juntaplay")+"</button>";return'<article class="'+["juntaplay-service-card","juntaplay-group-card--service"].join(" ")+'"'+s+d+'><a class="juntaplay-service-card__link" href="'+_+'"'+p+">"+x+'<span class="juntaplay-service-card__title"'+h+">"+o(g)+"</span>"+(C?'<span class="juntaplay-service-card__description">'+o(C)+"</span>":"")+I+"</a>"+A+"</article>"}var N='<h3 class="juntaplay-group-card__title"'+h+">"+o(g)+"</h3>",J=(t.slotsBadgeVariant||"").toString(),T="juntaplay-group-card__slots-badge";if(J&&"default"!==J){var L=J.replace(/[^a-z0-9_-]/gi,"");L&&(T+=" is-"+L)}var E=t.slotsBadge?'<span class="'+T+'">'+o(t.slotsBadge)+"</span>":"",M=(t.availabilityState||"").toString(),R=t.buttonLabel||e("full"===M?"Aguardando membros":"Confira","juntaplay"),U=t.ctaUrl||t.permalink||t.poolLink||"",V=!!t.ctaDisabled;if(U||(U=_),"compact"===n){var F,O=(F=t.categoryLabel||"")?'<span class="juntaplay-group-card__category">'+o(F)+"</span>":"",q=t.service||"",B="";q&&q!==F&&(B='<span class="juntaplay-group-card__service">'+o(q)+"</span>");var z=[];E&&z.push(E),y&&z.push(y);var Q=z.length?'<div class="juntaplay-group-card__meta">'+z.join("")+"</div>":"",G='<span class="juntaplay-group-card__cta-text">'+o(R||e("Ver detalhes","juntaplay"))+'<span class="juntaplay-group-card__cta-icon" aria-hidden="true"><svg viewBox="0 0 24 24" focusable="false" aria-hidden="true"><path d="M5 12h14M13 6l6 6-6 6" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg></span></span>';return'<article class="'+i.join(" ")+'"'+s+d+'><a class="juntaplay-group-card__link" href="'+_+'"'+p+">"+S+'<div class="juntaplay-group-card__body">'+O+N+B+Q+G+"</div></a></article>"}var H="juntaplay-group-card__cta";"full"===M&&(H+=" is-disabled"),V&&-1===H.indexOf("is-disabled")&&(H+=" is-disabled");Q="";(E||y)&&(Q='<div class="juntaplay-group-card__meta">'+E+y+"</div>");var W=' class="'+H+'"';return W+=V?' aria-disabled="true"':p,'<article class="'+i.join(" ")+'"'+s+d+">"+S+'<div class="juntaplay-group-card__body"><div class="juntaplay-group-card__heading"><h3 class="juntaplay-group-card__title"'+h+'><a href="'+_+'"'+p+">"+o(g)+"</a></h3></div>"+Q+"<a"+W+' href="'+o(U)+'">'+o(R)+"</a></div></article>"}function W(a){if(a.length&&!a.data("jpCoverPickerReady")){var n;a.data("jpCoverPickerReady",!0),a.attr("data-group-cover-ready","1");var i=(a.data("placeholder")||"").toString(),r=parseInt(a.data("mediaAuthor"),10)||0;!r&&window.JuntaPlay&&window.JuntaPlay.currentUser&&window.JuntaPlay.currentUser.id&&(r=parseInt(window.JuntaPlay.currentUser.id,10)||0);var o=(a.data("uploadContext")||"").toString();o||(o="profile-group-cover");var l=null,s=null,d=a.find("[data-group-cover-input]"),p=a.find("[data-group-cover-preview]"),c=a.find("[data-group-cover-remove]"),u=a.find("[data-group-cover-error]");a.on("click","[data-group-cover-select]",function(t){t.preventDefault();var a=y();a?(g(a),a.open()):window.alert(e("Não foi possível carregar a biblioteca de mídia agora.","juntaplay"))}),a.on("click","[data-group-cover-remove]",function(t){t.preventDefault(),_("","")})}function f(t){if(t&&r&&"function"==typeof t.state){var a=t.state();if(a&&"function"==typeof a.get){var e=a.get("library");e&&e.props&&"function"==typeof e.props.set&&(e.props.set("author",r),e.props.set("author__in",[r]),"function"==typeof e.props.unset&&e.props.unset("author__not_in"),e.props.set("uploadedTo",null),e.props.set("juntaplay_group_cover",o))}}}function g(a){if(a&&a.uploader){var e=a.uploader;if("undefined"!=typeof wp&&wp.Uploader&&wp.Uploader.defaults&&(null===l&&(l=t.extend({},wp.Uploader.defaults.multipart_params||{})),wp.Uploader.defaults.multipart_params=t.extend({},wp.Uploader.defaults.multipart_params||{},{juntaplay_group_cover:o,post_id:0}),r&&(wp.Uploader.defaults.multipart_params.author=r)),"undefined"!=typeof wp&&wp.media&&wp.media.model&&wp.media.model.settings){var n=wp.media.model.settings.post||{};null===s&&(s=t.extend({},n)),wp.media.model.settings.post=t.extend({},n,{juntaplay_group_cover:o,id:0}),void 0!==wp.media.model.settings.postId&&(wp.media.model.settings.postId=0);r&&(wp.media.model.settings.post.author=r)}if(e.options&&e.options.uploader&&(e.options.uploader.params=e.options.uploader.params||{},e.options.uploader.params.juntaplay_group_cover=o,r&&(e.options.uploader.params.author=r)),e.uploader&&"function"==typeof e.uploader.param&&(e.uploader.param("juntaplay_group_cover",o),r&&e.uploader.param("author",r)),"function"==typeof a.state){var i=a.state();if(i&&"function"==typeof i.get){var d=i.get("library");d&&d.props&&"function"==typeof d.props.set&&(d.props.set("juntaplay_group_cover",o),r&&(d.props.set("author",r),d.props.set("author__in",[r]),"function"==typeof d.props.unset&&d.props.unset("author__not_in")))}}}}function h(t){if(t&&t.toolbar&&"function"==typeof t.toolbar.get){var a=t.toolbar.get("select");a&&(a.model&&"function"==typeof a.model.set&&a.model.set("disabled",!1),a.$el&&a.$el.find(".media-button-select").prop("disabled",!1))}}function v(t,a){if(t){var e="function"==typeof t.state?t.state():null;if(e&&"function"==typeof e.get){var n=e.get("library"),i=e.get("selection"),r=t.content&&"function"==typeof t.content.get?t.content.get():null,l=r&&r.collection?r.collection:null,s=null,d=null;a&&("function"==typeof a.get?(s=a,d=a.get("id")||a.id||null):"object"==typeof a&&null!==a?d=void 0!==a.id?a.id:null:"number"!=typeof a&&"string"!=typeof a||(d=a)),p(n),l&&l!==n&&p(l),s||null===d||(n&&"function"==typeof n.get&&(s=n.get(d)||s),s&&s.get&&s.get("id")||!l||"function"!=typeof l.get||(s=l.get(d)||s)),s||(n&&"function"==typeof n.last&&(s=n.last()),s&&s.get&&s.get("id")||!l||"function"!=typeof l.last||(s=l.last()),!s&&n&&"function"==typeof n.at&&(s=n.at(0)),!s&&l&&"function"==typeof l.at&&(s=l.at(0))),s&&i&&"function"==typeof i.reset&&i.reset([s]),h(t)}}function p(t){t&&(t.props&&"function"==typeof t.props.set&&(t.props.set("ignore",Date.now()),o&&t.props.set("juntaplay_group_cover",o)),"function"==typeof t.fetch?t.fetch():"function"==typeof t.more?t.more({reset:!0}):"function"==typeof t._requery&&t._requery(!0))}}function m(t){var a="";t&&("string"==typeof t?a=t:t.message?a=t.message:t.error&&t.error.message?a=t.error.message:t.response&&"string"==typeof t.response&&(a=t.response)),!a&&t&&t.statusText&&(a=t.statusText),a||(a=e("Não foi possível enviar o ícone agora. Use PNG, JPG ou WEBP com até 5MB e tente novamente.","juntaplay")),u.length?u.text(a).removeClass("is-hidden"):window.alert(a)}function y(){if("undefined"==typeof wp||!wp.media||"function"!=typeof wp.media)return null;if(n&&"function"==typeof n.open)return n;var t,a={title:e("Escolher capa do grupo","juntaplay"),button:{text:e("Usar esta imagem","juntaplay")},multiple:!1,library:{type:"image"},uploader:{params:{juntaplay_group_cover:o}}};r&&(a.library.author=r,a.uploader.params.author=r),n=wp.media(a),(t=n)&&"undefined"!=typeof wp&&wp.media&&wp.media.events&&(t.jpUploaderCompleteHandler&&"function"==typeof wp.media.events.off&&wp.media.events.off("uploader:complete",t.jpUploaderCompleteHandler),t.jpUploaderCompleteHandler=function(){for(var a=Array.prototype.slice.call(arguments||[]),e=null,n=0;n<a.length;n+=1){var i=a[n];if(i){if("function"==typeof i.get){e=i;break}if("object"==typeof i&&void 0!==i.id){e=i;break}}}v(t,e)},"function"==typeof wp.media.events.on&&wp.media.events.on("uploader:complete",t.jpUploaderCompleteHandler));var d=function(){g(n),r&&f(n)};return n.on("ready",d),n.on("open",d),r&&(n.on("library:rendered",function(){f(n)}),n.on("content:render:browse",function(){f(n)})),n.on("content:render:upload",function(){g(n)}),n.on("upload:complete",function(t){window.setTimeout(function(){if(n&&"function"==typeof n.state){var a=n.state();if(a&&"function"==typeof a.get){var e=a.get("selection"),r=a.get("library");!function(t,a){if("function"==typeof a){var e=null,n=null;if(t&&"function"==typeof t.get?(e=t.get("id")||t.id||null,n=t):t&&"object"==typeof t&&null!==t&&(e=void 0!==t.id?t.id:null),null!==e&&"undefined"!=typeof wp&&wp.media&&wp.media.model&&wp.media.model.Attachment&&"function"==typeof wp.media.model.Attachment.get&&(n=wp.media.model.Attachment.get(e)),n&&"function"==typeof n.once&&(!n.get||!n.get("url")))return n.once("sync",function(){a(n,e)}),void("function"==typeof n.fetch&&n.fetch());a(n||null,e)}}(t,function(t,a){if(!t&&null!==a&&r&&"function"==typeof r.get&&(t=r.get(a)||t),t&&r&&"function"==typeof r.add){var o=!1;"function"==typeof r.get&&(o=!!(r.get(t)||null!==a&&r.get(a))),o||r.add(t)}if(e&&t&&"function"==typeof e.reset&&e.reset([t]),t&&"function"==typeof t.toJSON){var l=t.toJSON();if(l&&void 0!==l.id){var s=l.url||l.sizes&&l.sizes.full&&l.sizes.full.url||i||"";_(l.id,s)}}v(n,t||a)})}}},120)}),n.on("upload:success",function(){h(n)}),n.on("upload:error",function(t,a){m(a||t||null)}),n.on("close",function(){"undefined"!=typeof wp&&wp.Uploader&&wp.Uploader.defaults&&l&&(wp.Uploader.defaults.multipart_params=l),l=null,"undefined"!=typeof wp&&wp.media&&wp.media.model&&wp.media.model.settings&&null!==s&&(wp.media.model.settings.post=s),s=null,"undefined"!=typeof wp&&wp.media&&wp.media.events&&"function"==typeof wp.media.events.off&&n.jpUploaderCompleteHandler&&wp.media.events.off("uploader:complete",n.jpUploaderCompleteHandler)}),n.on("select",function(){var t=n.state().get("selection").first();t&&_((t=t.toJSON()).id||"",t.url||i||"")}),n.uploader&&n.uploader.uploader&&"function"==typeof n.uploader.uploader.on&&n.uploader.uploader.on("error",function(t,a){m(a||t||null)}),d(),n}function _(t,a){u.length&&u.text("").addClass("is-hidden");var e=t?t.toString():"",n=a||i||"";if(d.val(e),p.length){p.css("background-image",n?"url("+n+")":"none");var r=p.find("img");r.length&&r.attr("src",n||"")}c.length&&c.prop("disabled",!e)}}function $(a){if(!a)return null;var e=document.querySelector(a);if(!e)return null;if("template"===(e.tagName?e.tagName.toLowerCase():"")){var n=e.content?e.content.cloneNode(!0):null;if(!n)return null;var i=document.createElement("div");return i.appendChild(n),t(i).children()}return t(e).clone(!0)}function K(a,e){if(a.length&&e&&e.length){var n=a.find("[data-modal-content]");n.empty().append(e),a.removeAttr("hidden").addClass("is-open").attr("aria-hidden","false"),t("body").addClass("juntaplay-modal-open"),setTimeout(function(){var t=n.find("input, select, textarea, button, a[href]").filter(":visible").first();t.length&&t.trigger("focus")},30)}}function X(a){a.length&&(a.removeClass("is-open").attr("aria-hidden","true").attr("hidden","hidden"),a.find("[data-modal-content]").empty(),t(".juntaplay-modal.is-open").length||t("body").removeClass("juntaplay-modal-open"))}function Y(){var a="#jp-group-create-template",e=t(a);if(e.length){var n=t("[data-group-create-modal]");if(n.length){var i=e.data("loadingText");"string"==typeof i&&i.length||(i="Carregando formulário...");var r=t('<div class="juntaplay-modal__loading" role="status" aria-live="polite"></div>');r.append('<span class="juntaplay-spinner" aria-hidden="true"></span>'),r.append(t("<p></p>").text(i)),K(n,r);var o=n.find("[data-modal-content]");window.requestAnimationFrame(function(){var t=$(a);if(t&&t.length){o.empty().append(t);var i=t.find("[data-group-view-root]").first();if(i.length){var r=(i.data("groupViewDefault")||"").toString()||"selector",l=(i.data("groupViewActive")||i.attr("data-group-view-active")||"").toString(),s=(i.attr("data-group-view-allowed")||"").toString();l||i.attr("data-group-view-active",r),s||(i.attr("data-group-view-allowed","0"),i.data("groupViewAllowed","0"))}W(n.find("[data-group-cover]")),S(n.find("form[data-group-wizard]")),D(n.find("[data-group-view-root]")),function(t){if(t&&t.length){var a=(t.data("groupViewActive")||"").toString(),e=(t.data("groupViewDefault")||"").toString(),n=a||e||"selector";"wizard"!==n||C(t)||(n=e||"selector"),P(t,n)}}(n.find("[data-group-view-root]")),e.attr("data-auto-open","0"),setTimeout(function(){var t=n.find("input, select, textarea").filter(":visible").first();t.length&&t.trigger("focus")},40)}})}}}function Z(t){var a=$("#jp-group-success-template");if(!a||!a.length)return null;var n=(t&&t.heading?t.heading:e("Grupo cadastrado com sucesso!","juntaplay")).toString(),i=(t&&t.body?t.body:e("Aguarde que nossa equipe vai validar e você será notificado.","juntaplay")).toString(),r=t&&t.image?t.image.toString():"",l=t&&t.redirect?t.redirect.toString():"",s=a.find("[data-group-success-heading]");s.length&&s.text(n);var d=a.find("[data-group-success-body]");d.length&&d.text(i);var p=a.find("[data-group-success-media]"),c=a.find("[data-group-success-image]");c.length&&r?c.attr("src",r).attr("alt",n):p.length&&p.remove();var u,f=""!==l.trim()?l:"https://www.juntaplay.com.br/grupos",g=a.find("[data-group-success-cta]");if(g.length){var h=f?(u=(f||"").toString().trim())?'<a class="elementor-button elementor-button-link elementor-size-sm" href="'+o(u)+'"><span class="elementor-button-content-wrapper"><span class="elementor-button-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="currentColor"><path d="M15.5553 0.670898H5.77756C5.53189 0.670898 5.3331 0.86969 5.3331 1.11536C5.3331 1.36102 5.53189 1.55982 5.77756 1.55982H14.4824L0.129975 15.9122C-0.0436504 16.0859 -0.0436504 16.3671 0.129975 16.5407C0.216766 16.6275 0.330516 16.6709 0.444225 16.6709C0.557933 16.6709 0.671641 16.6275 0.758475 16.5407L15.1109 2.18827V10.8931C15.1109 11.1388 15.3097 11.3376 15.5553 11.3376C15.801 11.3376 15.9998 11.1388 15.9998 10.8931V1.11536C15.9998 0.86969 15.801 0.670898 15.5553 0.670898Z" fill="currentColor"></path></svg></span><span class="elementor-button-text">'+o(e("Ver + Grupos","juntaplay"))+"</span></span></a>":"":"";h?g.html(h):g.remove()}return a}function tt(){var a=t("[data-group-success-state]").first();a.length&&(function(a){var e=t("[data-group-success-modal]");if(!e.length)return!1;var n=Z(a||{});return!(!n||!n.length||(K(e,n),0))}({heading:(a.data("successHeading")||"").toString(),body:(a.data("successBody")||"").toString(),image:(a.data("successImage")||"").toString(),redirect:(a.data("successRedirect")||"").toString()})&&a.remove())}t(document).on("input",'[data-jp-cep-field="postcode"]',function(){B(t(this))}),t(document).on("blur",'[data-jp-cep-field="postcode"]',function(){var a=t(this),n=O(a.val());8===n.length&&function(t,a){if(a&&8===a.length){if(F[a])return B(t),void Q(t,F[a]);t.data("jpCepLoading")!==a&&(t.data("jpCepLoading",a),t.attr("aria-busy","true"),fetch("https://viacep.com.br/ws/"+a+"/json/").then(function(t){if(!t.ok)throw new Error("network");return t.json()}).then(function(n){t.removeAttr("aria-busy"),t.removeData("jpCepLoading"),n&&!n.erro?(F[a]=n,B(t),Q(t,n)):z(t,e("CEP não encontrado. Confira os números digitados.","juntaplay"))}).catch(function(){t.removeAttr("aria-busy"),t.removeData("jpCepLoading"),z(t,e("Não foi possível validar o CEP informado.","juntaplay"))}))}}(a,n),a.val(q(n)).trigger("change")}),t(document).on("click","[data-network-detail]",function(a){a.preventDefault();var e=t(this),n=e.closest(".juntaplay-network-card");if(n.length){var i=n.hasClass("is-expanded"),r=n.find("[data-network-groups]").first();n.toggleClass("is-expanded",!i),r.length&&(i?r.attr("hidden","hidden"):r.removeAttr("hidden"));var o=e.data("defaultLabel")||e.attr("data-default-label")||e.text(),l=e.data("openLabel")||e.attr("data-open-label")||o;e.text(i?o:l)}}),t(document).on("click","[data-group-complaint-toggle]",function(a){a.preventDefault();var e=t(this),n=e.attr("data-target")||"",i=n?t("#"+n):e.closest("[data-group-complaint]").find("[data-group-complaint-form]");if(i.length){var r=i.hasClass("is-hidden");i.toggleClass("is-hidden",!r).toggleClass("is-open",r),e.attr("aria-expanded",r?"true":"false"),G(e,r)}}),t(document).on("click","[data-group-complaint-close]",function(a){a.preventDefault();var e=t(this).closest("[data-group-complaint-form]");if(e.length){e.removeClass("is-open").addClass("is-hidden");var n=e.attr("id");if(n){var i=t('[data-group-complaint-toggle][data-target="'+n+'"]');i.length&&(i.attr("aria-expanded","false"),G(i,!1))}}}),t(document).on("change","[data-group-complaint-files]",function(){var a=t(this),e=this.files,n=a.closest("[data-group-complaint]").find("[data-group-complaint-preview]");n.length&&(n.empty(),e&&e.length&&Array.prototype.forEach.call(e,function(a){var e=a.size||0,i=a.name;e>0&&(i+=" ("+function(t){if(!t||t<=0)return"";var a=["B","KB","MB","GB"],e=0,n=t;for(;n>=1024&&e<a.length-1;)n/=1024,e+=1;return n.toFixed(0===e?0:1)+" "+a[e]}(e)+")"),t("<li />").text(i).appendTo(n)}))}),function(){var a=t("[data-complaint-center]");function e(){return window.matchMedia("(min-width: 1024px)").matches}function n(){a.each(function(){var a=t(this),n="true"===(a.attr("data-complaint-open")||"").toString().toLowerCase();e()?a.addClass("is-detail-open"):a.toggleClass("is-detail-open",n)})}a.length&&(n(),t(window).on("resize.juntaplayComplaints",function(){n()}),t(document).on("click","[data-complaint-drawer-toggle]",function(a){a.preventDefault();var n=t(this).closest("[data-complaint-center]");if(n.length){var i=(n.attr("data-complaint-open")||"").toString().toLowerCase();!function(t,a){t&&t.length&&(t.attr("data-complaint-open",a?"true":"false"),e()?t.addClass("is-detail-open"):t.toggleClass("is-detail-open",!!a))}(n,!("true"===i))}}),t(document).on("click","[data-complaint-submit]",function(){var a=(t(this).attr("data-complaint-submit")||"").toString();if(a){var e=t(this).closest("form");if(e.length){var n=e.find("[data-complaint-action]");n.length&&n.val(a)}}}))}(),t(function(){t(".juntaplay-profile__row").each(function(){var a=t(this),e=a.hasClass("is-editing");a.find(".juntaplay-profile__form").attr("aria-hidden",e?"false":"true"),a.find(".juntaplay-profile__edit").attr("aria-expanded",e?"true":"false")}),t("[data-jp-wallet]").each(function(){!function(a){if(!a.length||void 0===window.JuntaPlay)return;var i=!1,r=a.find("[data-jp-credit-details]"),l=r.find("[data-jp-credit-details-body]"),s=r.find("[data-jp-credit-details-title]"),d=a.find("[data-jp-credit-load-more]"),p=a.find("[data-jp-credit-countdown]"),c=a.find("[data-jp-credit-deposit]"),u=c.find("[data-jp-credit-deposit-form]"),f=u.find('[name="jp_profile_deposit_amount"]'),g=u.find("[data-jp-credit-deposit-error]"),h=1===parseInt(a.data("deposit-enabled"),10),v=parseFloat(a.data("deposit-min"))||0,m=parseFloat(a.data("deposit-max"))||0,y=!1,_=a.find("[data-jp-credit-items]"),j=a.find("[data-jp-credit-empty]"),w=a.find("[data-jp-credit-filter]"),b=a.find("[data-jp-credit-range]"),x=a.find("[data-jp-credit-search]"),S=a.find("[data-jp-credit-refresh]"),C=j.length?j.data("default-message")||j.text():"",k=e("Nenhuma movimentação corresponde aos filtros selecionados.","juntaplay"),P="all",D=w.filter(".is-active").first();if(D.length){var I=D.data("jp-credit-filter");null!=I&&""!==I&&(P=I.toString())}function A(e,n){var i=t("<div/>").addClass("juntaplay-wallet__alert juntaplay-wallet__alert--"+e).text(n||"");a.find(".juntaplay-wallet__withdraw .juntaplay-wallet__alert").remove(),a.find(".juntaplay-wallet__withdraw").prepend(i)}function N(t){var a=t.id||0,n=t.type||"",i=t.status||"",r=t.type_label||"",l=t.status_label||"",s=t.amount_formatted||t.amount||"",d=t.time||"",p=t.reference||"",c=parseInt(t.timestamp,10);isFinite(c)||(c=0);var u=t.search||"";if(!u){var f=[r,l,p,d].filter(Boolean).join(" ");u=f?f.toLowerCase():""}var g="";return p&&(g=e("Referência: %s","juntaplay").replace("%s",p)),['<li class="juntaplay-wallet__item" data-transaction="'+o(a)+'" data-type="'+o(n)+'" data-status="'+o(i)+'" data-time="'+o(c)+'" data-search="'+o(u.toString().toLowerCase())+'">','  <div class="juntaplay-wallet__item-main">','    <strong class="juntaplay-wallet__item-title">'+o(r)+"</strong>",d?'    <span class="juntaplay-wallet__item-meta">'+o(d)+"</span>":"",g?'    <span class="juntaplay-wallet__item-meta juntaplay-wallet__item-ref">'+o(g)+"</span>":"","  </div>",'  <div class="juntaplay-wallet__item-side">',l?'    <span class="juntaplay-wallet__item-status">'+o(l)+"</span>":"",s?'    <span class="juntaplay-wallet__item-amount">'+o(s)+"</span>":"","  </div>","</li>"].filter(Boolean).join("")}function J(t){var e=a.find("[data-jp-credit-total]");if(e.length){var i=parseInt(t,10);isFinite(i)||(i=0);var r=n("%d movimento","%d movimentos",i,"juntaplay");r=r.replace("%d",i).replace("%s",i),e.text(r)}}function T(){if(d.length){var t=parseInt(a.attr("data-page"),10)||1,e=parseInt(a.attr("data-pages"),10)||1;e<=1||t>=e?d.attr("hidden","hidden"):d.removeAttr("hidden")}}function L(){if(!b.length)return 0;var t=parseInt(b.val(),10);return!isFinite(t)||t<=0?0:Math.floor(Date.now()/1e3)-86400*t}function E(a){if(_.length){var e=x.length?(x.val()||"").toString().toLowerCase():"",n=L(),i=0,r=!1;if(_.children(".juntaplay-wallet__item").each(function(){var a=t(this);r=!0;var o=(a.data("type")||"").toString(),l=(a.data("search")||"").toString(),s=parseInt(a.data("time"),10)||0,d="all"===P||o===P,p=!e||-1!==l.indexOf(e);d&&p&&(!n||s>=n)?(a.removeAttr("hidden"),i++):a.attr("hidden","hidden")}),j.length){var o=C;r&&0===i&&(o=k),!r&&a&&(o=C),j.text(o),!r&&a||0===i?j.removeAttr("hidden"):j.attr("hidden","hidden")}T()}else T()}function M(e,n){if(window.JuntaPlay&&window.JuntaPlay.ajax&&!i){i=!0,a.addClass("is-loading");var r={action:"juntaplay_credit_transactions",nonce:window.JuntaPlay.nonce,page:e};P&&"all"!==P&&(r.type=P),t.getJSON(window.JuntaPlay.ajax,r).done(function(t){if(t&&t.success&&t.data){var i=t.data,r=(Array.isArray(i.items)?i.items:[]).map(N).join("");n?r&&_.append(r):_.html(r),void 0!==i.page?a.attr("data-page",i.page):n||a.attr("data-page",e),void 0!==i.pages&&a.attr("data-pages",i.pages),void 0!==i.total&&(a.attr("data-total",i.total),J(i.total)),E(!n)}}).always(function(){i=!1,a.removeClass("is-loading"),T()})}}function R(t){if(t&&r.length){var a=["<dl>"];a.push("<dt>"+(t.type_label||"")+"</dt>"),a.push("<dd>"+(t.amount_formatted||"")+"</dd>"),t.status_label&&(a.push("<dt>"+e("Status","juntaplay")+"</dt>"),a.push("<dd>"+t.status_label+"</dd>")),t.reference&&(a.push("<dt>"+e("Referência","juntaplay")+"</dt>"),a.push("<dd>"+t.reference+"</dd>")),t.time&&(a.push("<dt>"+e("Data","juntaplay")+"</dt>"),a.push("<dd>"+t.time+"</dd>")),t.balance_after&&(a.push("<dt>"+e("Saldo após","juntaplay")+"</dt>"),a.push("<dd>"+t.balance_after+"</dd>")),t.context&&Object.keys(t.context).forEach(function(e){t.context[e]&&(a.push("<dt>"+e+"</dt>"),a.push("<dd>"+t.context[e]+"</dd>"))}),a.push("</dl>"),s.text(t.type_label||e("Detalhes","juntaplay")),l.html(a.join("")),r.removeAttr("hidden")}}function U(){r.attr("hidden","hidden")}function V(){c.length&&(c.removeAttr("hidden").addClass("is-open"),f.length&&f.trigger("focus"))}function F(){c.length&&(c.attr("hidden","hidden").removeClass("is-open"),g.attr("hidden","hidden").text(""),y=!1)}function O(t){g.length?g.text(t||"").removeAttr("hidden"):window.alert(t)}a.on("click","[data-jp-credit-details-close]",function(){U()}),a.on("click",".juntaplay-wallet__item",function(){if(!i){var a=t(this).data("transaction");a&&(i=!0,t.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_credit_transaction",nonce:window.JuntaPlay.nonce,id:a}).done(function(t){t&&t.success&&t.data&&t.data.transaction&&R(t.data.transaction)}).fail(function(){window.alert(e("Não foi possível carregar os detalhes agora.","juntaplay"))}).always(function(){i=!1}))}}),a.on("click","[data-jp-credit-load-more]",function(){if(!i){var t=parseInt(a.attr("data-page"),10)||1;t>=(parseInt(a.attr("data-pages"),10)||1)?T():M(t+1,!0)}}),w.length&&w.on("click",function(e){e.preventDefault();var n=t(this).data("jp-credit-filter"),i="all";null!=n&&""!==n&&(i=n.toString()),i!==P&&(P=i,w.removeClass("is-active"),t(this).addClass("is-active"),a.attr("data-page",1),E(!1),M(1,!1))});b.length&&b.on("change",function(){E(!1)});x.length&&x.on("input",function(){E(!1)});S.length&&S.on("click",function(t){t.preventDefault(),M(1,!1)});a.on("submit",".juntaplay-wallet__form",function(a){var n=t(this);if(!window.JuntaPlay||!window.JuntaPlay.ajax)return!0;if(a.preventDefault(),i)return!1;i=!0;var r={action:"juntaplay_credit_withdraw",nonce:window.JuntaPlay.nonce,amount:n.find('[name="jp_profile_withdraw_amount"]').val(),method:n.find('[name="jp_profile_withdraw_method"]').val(),code:n.find('[name="jp_profile_withdraw_code"]').val()};return t.post(window.JuntaPlay.ajax,r,null,"json").done(function(t){if(t)return t.success?(A("success",t.data&&t.data.message?t.data.message:e("Solicitação registrada com sucesso.","juntaplay")),void window.setTimeout(function(){window.location.reload()},1500)):void(t.data&&t.data.message&&A("warning",t.data.message))}).fail(function(){A("warning",e("Não foi possível registrar a solicitação agora.","juntaplay"))}).always(function(){i=!1}),!1}),a.on("click","[data-jp-credit-send-code]",function(){if(!i){i=!0;var n=t(this);n.prop("disabled",!0),t.post(window.JuntaPlay.ajax,{action:"juntaplay_credit_send_code",nonce:window.JuntaPlay.nonce},null,"json").done(function(t){if(t&&t.success){var e=t.data||{};p.length&&e.message&&p.text(e.message),a.find("[data-jp-credit-destination]").length&&e.destination&&a.find("[data-jp-credit-destination]").text(e.destination)}else t&&t.data&&t.data.message&&window.alert(t.data.message)}).fail(function(){window.alert(e("Não foi possível enviar o código agora.","juntaplay"))}).always(function(){i=!1,n.prop("disabled",!1)})}}),a.on("click","[data-jp-credit-details]",function(a){t(a.target).is("[data-jp-credit-details]")&&U()}),a.on("click","[data-jp-credit-topup]",function(t){t.preventDefault(),h?V():window.alert(e("Recarga indisponível no momento.","juntaplay"))}),a.on("click","[data-jp-credit-deposit-close]",function(t){t.preventDefault(),F()}),a.on("click","[data-jp-credit-suggestion]",function(a){if(a.preventDefault(),f.length){var e=parseFloat(t(this).data("jp-credit-suggestion"))||0;e>0&&f.val(e.toFixed(2)).trigger("change")}}),a.on("submit","[data-jp-credit-deposit-form]",function(a){if(a.preventDefault(),!window.JuntaPlay||!window.JuntaPlay.ajax)return!1;if(y)return!1;var n=0;if(f.length&&(n=parseFloat((f.val()||"").toString().replace(",","."))||0),n<=0||v>0&&n<v)return O(e("Informe um valor de recarga acima do mínimo permitido.","juntaplay")),!1;if(m>0&&n>m)return O(e("O valor informado excede o limite máximo permitido.","juntaplay")),!1;y=!0,g.attr("hidden","hidden").text("");var i={action:"juntaplay_credit_deposit",nonce:window.JuntaPlay.nonce,amount:n};return t.post(window.JuntaPlay.ajax,i,null,"json").done(function(t){t&&(t.success&&t.data&&t.data.redirect?window.location.href=t.data.redirect:t.success?window.location.reload():t.data&&t.data.message?O(t.data.message):O(e("Não foi possível iniciar a recarga agora.","juntaplay")))}).fail(function(){O(e("Não foi possível iniciar a recarga agora.","juntaplay"))}).always(function(){y=!1}),!1}),E(!0),T()}(t(this))}),function(){if(void 0===window.JuntaPlay)return;var a=t("[data-jp-notifications]");if(!a.length)return;function n(a){t("[data-jp-notifications]").each(function(){var e=t(this);a>0?e.attr("data-count",a):e.removeAttr("data-count")})}a.each(function(){var a=t(this);if(!a.data("jpNotificationsInit")){a.data("jpNotificationsInit",!0);var i=a.siblings("[data-jp-notifications-panel]").first();if(!i.length){var r=a.closest("[data-jp-notifications-root]");r.length&&(i=r.find("[data-jp-notifications-panel]").first())}if(i.length){var o=i.find("[data-jp-notifications-list]"),l=!1,s=!1,d='<li class="juntaplay-notifications__empty">'+e("Nenhuma notificação por enquanto.","juntaplay")+"</li>";a.attr("aria-expanded","false"),i.attr("aria-hidden","true"),i.data("jpNotificationsToggle",function(t,a){u(t,a)}),i.data("jpNotificationsBell",a),a.on("click",function(t){t.preventDefault(),u()}),i.on("click","[data-notification-id]",function(a){var e=t(this),n=parseInt(e.data("notification-id"),10)||0;if(n){var i="";e.is("a")&&(i=(e.attr("href")||"").toString()),i&&a.preventDefault();var r=e.closest("li");r.length&&r.remove(),o.children("[data-notification-id]").length||p(),h(n,function(){i?window.location.href=i:o.children("[data-notification-id]").length||p()})}}),i.on("click","[data-jp-notifications-clear]",function(a){a.preventDefault();var i=[];if(o.find("[data-notification-id]").each(function(){var a=parseInt(t(this).data("notification-id"),10);!isNaN(a)&&a>0&&i.push(a)}),!i.length)return p(),void n(0);o.html('<li class="juntaplay-notifications__empty">'+e("Removendo notificações...","juntaplay")+"</li>"),g(i,function(){p()})}),i.on("click","[data-jp-notifications-close]",function(t){t.preventDefault(),u(!1)}),c(!1)}}function p(){o.html(d)}function c(t){a.attr("aria-expanded",t?"true":"false"),a.toggleClass("is-active",t),i.attr("aria-hidden",t?"false":"true"),i.toggleClass("is-open",t)}function u(a,e){("boolean"==typeof a?a:!i.hasClass("is-open"))?(e||t("[data-jp-notifications-panel].is-open").not(i).each(function(){var a=t(this),e=a.data("jpNotificationsToggle");if("function"==typeof e)e(!1,!0);else{a.removeClass("is-open").attr("aria-hidden","true");var n=a.data("jpNotificationsBell");n&&n.length&&n.removeClass("is-active").attr("aria-expanded","false")}}),c(!0),l||f()):c(!1)}function f(){s||(s=!0,l||o.html('<li class="juntaplay-notifications__empty">'+e("Carregando notificações...","juntaplay")+"</li>"),t.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_notifications_feed",nonce:window.JuntaPlay.nonce}).done(function(t){if(t&&t.success){if(l=!0,t.data&&t.data.items)if(t.data.items.length){var a=t.data.items.map(function(t){var a=t.title||"",e=t.message||"",n=t.time||"",i=t.action_url||"",r=(t.status||"").toString(),o=r?' data-notification-status="'+r+'"':"",l=' class="juntaplay-notifications__item'+("unread"===r?" is-unread":"")+'" data-notification-id="'+t.id+'"',s='<span class="juntaplay-notifications__item-title">'+a+'</span><span class="juntaplay-notifications__item-message">'+e+'</span><span class="juntaplay-notifications__item-time">'+n+"</span>";return i?"<li"+o+"><a"+l+' href="'+i+'">'+s+"</a></li>":"<li"+o+"><span"+l+">"+s+"</span></li>"}).join("");o.html(a)}else p();if(t.data&&void 0!==t.data.unread)n(parseInt(t.data.unread,10)||0)}}).always(function(){s=!1}))}function g(a,e){var i=[];Array.isArray(a)&&a.forEach(function(t){var a=parseInt(t,10);!isNaN(a)&&a>0&&i.push(a)}),i.length?t.post(window.JuntaPlay.ajax,{action:"juntaplay_notifications_mark",nonce:window.JuntaPlay.nonce,ids:i},null,"json").done(function(t){t&&t.data&&void 0!==t.data.unread&&n(parseInt(t.data.unread,10)||0)}).always(function(){l=!1,"function"==typeof e&&e()}):"function"==typeof e&&e()}function h(t,a){g([t],a)}}),t(document).off("click.juntaplayNotifications").on("click.juntaplayNotifications",function(a){t(a.target).closest("[data-jp-notifications]").length||t(a.target).closest("[data-jp-notifications-panel]").length||t("[data-jp-notifications-panel].is-open").each(function(){var a=t(this).data("jpNotificationsToggle");if("function"==typeof a)a(!1,!0);else{t(this).removeClass("is-open").attr("aria-hidden","true");var e=t(this).data("jpNotificationsBell");e&&e.length&&e.removeClass("is-active").attr("aria-expanded","false")}})})}(),t("[data-jp-account]").each(function(){var a=t(this),e=a.find("[data-jp-account-toggle]"),n=a.find("[data-jp-account-menu]");function i(t){e.attr("aria-expanded",t?"true":"false"),e.toggleClass("is-active",t),n.attr("aria-hidden",t?"false":"true"),n.toggleClass("is-open",t)}function r(a,e){("boolean"==typeof a?a:!n.hasClass("is-open"))?(e||t("[data-jp-account-menu].is-open").not(n).each(function(){var a=t(this),e=a.closest("[data-jp-account]").find("[data-jp-account-toggle]");a.removeClass("is-open").attr("aria-hidden","true"),e.removeClass("is-active").attr("aria-expanded","false")}),i(!0)):i(!1)}e.length&&n.length&&!a.data("jpAccountInit")&&(a.data("jpAccountInit",!0),n.data("jpAccountToggle",function(t,a){r(t,a)}),e.on("click",function(t){t.preventDefault(),r()}),n.on("click","a",function(){r(!1)}),i(!1))}),t(document).off("click.juntaplayAccount").on("click.juntaplayAccount",function(a){t(a.target).closest("[data-jp-account]").length||t("[data-jp-account-menu].is-open").each(function(){var a=t(this),e=a.data("jpAccountToggle");"function"==typeof e?e(!1,!0):(a.removeClass("is-open").attr("aria-hidden","true"),a.closest("[data-jp-account]").find("[data-jp-account-toggle]").removeClass("is-active").attr("aria-expanded","false"))})})}),t(document).on("change",'input[name="juntaplay_use_wallet"]',function(){s()}),t(document).on("input change",".juntaplay-group-quantity",function(){s()}),t(document).on("submit",".juntaplay-form[data-confirm]",function(a){var e=t(this).data("confirm");return!(e&&!window.confirm(e))||(a.preventDefault(),!1)});var at=function(){var t=window.JuntaPlay&&window.JuntaPlay.ajax?window.JuntaPlay.ajax:"",a=window.JuntaPlay&&window.JuntaPlay.nonce?window.JuntaPlay.nonce:"";function n(){return jQuery("#juntaplay-group-modal")}function i(){if(t)return t;var a=n();if(a.length){var e=a.attr("data-ajax-endpoint")||a.data("ajaxEndpoint")||a.data("ajax-endpoint");if(e)return t=e.toString()}return void 0!==window.ajaxurl&&window.ajaxurl&&(t=window.ajaxurl.toString()),t}function r(){if(a)return a;var t=n();if(t.length){var e=t.attr("data-ajax-nonce")||t.data("ajaxNonce")||t.data("ajax-nonce");e&&(a=e.toString())}return a}function o(t){var a=n();a.length&&(a.find("[data-modal-messages]").empty(),a.find(".juntaplay-modal__content").html(t),a.removeAttr("hidden").addClass("is-open").attr("aria-hidden","false"),jQuery("body").addClass("juntaplay-modal-open"),window.requestAnimationFrame(function(){var t=a.find("input, select, textarea, button, a[href]").filter(":visible").first();t.length?t.trigger("focus"):a.trigger("focus")}))}function l(){o('<div class="juntaplay-group-modal__loading" role="status" aria-live="polite"><span class="juntaplay-spinner" aria-hidden="true"></span><p>'+e("Carregando informações do grupo...","juntaplay")+'</p><div class="juntaplay-group-modal__skeleton" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span></div></div>')}function s(t,a){var e=n().find("[data-modal-messages]");if(e.length){var i="warning";"success"===t?i="positive":"error"===t&&(i="warning");var r=jQuery('<div class="juntaplay-alert juntaplay-alert--'+i+'" role="alert"></div>');r.text(a),e.empty().append(r)}}function d(){var t=n();t.length&&(t.removeClass("is-open").attr("aria-hidden","true").attr("hidden","hidden"),t.find(".juntaplay-modal__content").empty(),t.find("[data-modal-messages]").empty(),jQuery(".juntaplay-modal.is-open").not(t).length||jQuery("body").removeClass("juntaplay-modal-open"))}function p(t){return t&&t.data&&t.data.message?t.data.message:e("Não foi possível carregar os dados agora. Tente novamente em instantes.","juntaplay")}function c(t,a){var e=i();if(e&&a){l();var n={action:t,group_id:a},d=r();d&&(n.nonce=d),jQuery.post(e,n).done(function(t){t&&t.success&&t.data&&t.data.html?o(t.data.html):s("error",p(t))}).fail(function(t){s("error",p(t&&t.responseJSON))})}}return{loadDetail:function(t){c("juntaplay_group_detail",t)},loadEdit:function(t){c("juntaplay_group_edit_form",t)},close:d,save:function(t){var a=i();if(a){var n=new window.FormData(t);n.append("action","juntaplay_group_edit_save");var o=r();o&&n.append("nonce",o);var l=jQuery(t).find('button[type="submit"]').first();l.prop("disabled",!0).addClass("is-loading"),jQuery.ajax({url:a,method:"POST",data:n,processData:!1,contentType:!1}).done(function(t){if(t&&t.success){var a=t.data&&t.data.message?t.data.message:e("Grupo atualizado com sucesso.","juntaplay");d(),window.alert(a),window.location.reload()}else s("error",p(t))}).fail(function(t){s("error",p(t&&t.responseJSON))}).always(function(){l.prop("disabled",!1).removeClass("is-loading")})}},render:o,showLoading:l,message:s}}();jQuery(document).on("click",".juntaplay-group-card__toggle",function(t){t.preventDefault(),t.stopPropagation();var a=jQuery(this).closest("[data-group-id]"),e=a.length?parseInt(a.data("group-id"),10):0;e&&at.loadDetail(e)}),jQuery(document).on("click",".juntaplay-group-card__edit",function(t){t.preventDefault(),t.stopPropagation();var a=parseInt(jQuery(this).data("group-id"),10);if(!a){var e=jQuery(this).closest("[data-group-id]");a=e.length?parseInt(e.data("group-id"),10):0}a&&(window.JP&&"function"==typeof window.JP.openGroupEditModal?window.JP.openGroupEditModal(a):at.loadEdit(a))}),jQuery(document).on("submit","#juntaplay-group-edit-form",function(t){t.preventDefault(),window.JP&&"function"==typeof window.JP.submitGroupEditForm?window.JP.submitGroupEditForm(this):at.save(this)}),jQuery(document).on("click",".juntaplay-modal__close, #juntaplay-group-modal [data-group-modal-close]",function(t){t.preventDefault(),at.close()}),jQuery(document).on("click","#juntaplay-group-modal",function(t){t.target===this&&at.close()}),jQuery(document).on("keydown.juntaplayGroupModal",function(t){"Escape"!==t.key&&27!==t.keyCode||jQuery("#juntaplay-group-modal").hasClass("is-open")&&(t.preventDefault(),at.close())});var et=function(){var a=jQuery("#juntaplay-group-modal"),n="",i="";if(a.length){var r=a.attr("data-rest-root")||a.data("restRoot")||"",o=a.attr("data-rest-nonce")||a.data("restNonce")||"";r&&(n=r.toString()),o&&(i=o.toString())}function l(t){var a=t?t.toString():"";return"/"===a.charAt(0)&&(a=a.slice(1)),n?n+a:""}function s(a){var e={Accept:"application/json"};return i&&(e["X-WP-Nonce"]=i),a&&(e=t.extend({},e,a)),e}return!n&&window.wpApiSettings&&window.wpApiSettings.root&&("/"!==(n=window.wpApiSettings.root.toString()).slice(-1)&&(n+="/"),-1===n.indexOf("juntaplay/v1")&&(n+="juntaplay/v1/")),{root:n=function(t){if(!t)return"";var a=t.toString();return"/"!==a.slice(-1)&&(a+="/"),a}(n),nonce:i,endpoint:l,headers:s,fetch:function(a,i){if(!window.fetch||!n)return Promise.reject(new Error("rest_unavailable"));var r=t.extend({credentials:"same-origin"},i||{});return r.headers=s(r.headers||null),window.fetch(l(a),r).then(function(t){var a=function(){return t.json().catch(function(){return{}})};return t.ok?a():a().then(function(t){if(t&&"object"==typeof t&&t.message)throw t;throw{message:e("Não foi possível concluir a solicitação.","juntaplay")}})})}}}();window.JP.rest=et,function(){var t=!1,a=0;function n(t,a){var e=(t||a||"").toString().toLowerCase();return(e=e.replace(/[^a-z0-9_-]+/g,""))||a||"info"}function i(t){if(t&&"object"==typeof t){var a=parseInt(t.id,10)||0;if(a){var i=jQuery('.juntaplay-group-card[data-group-id="'+a+'"]');if(i.length){i.attr("data-group-status",t.status||""),t.membership_role&&i.attr("data-group-role",t.membership_role);var r=t.cover_url||"";!r&&t.cover_placeholder&&(r="");var l=i.find(".juntaplay-group-card__cover");if(l.length){l.toggleClass("is-placeholder",!!t.cover_placeholder);var s=l.find("img");s.length&&(r&&s.attr("src",r),t.cover_alt&&s.attr("alt",t.cover_alt))}var d=t.title||t.service_name||e("Grupo sem nome","juntaplay");i.find(".juntaplay-group-card__title").text(d).attr("title",d);var p=i.find(".juntaplay-group-card__role-badge");if(p.length)if(t.role_label){var c="juntaplay-badge--"+n(t.role_tone,"info");p.text(t.role_label).removeClass(function(t,a){return(a||"").split(" ").filter(function(t){return 0===t.indexOf("juntaplay-badge--")}).join(" ")}).addClass(c)}else p.remove();var u=i.find(".juntaplay-group-card__chips");if(u.length){var f="";t.availability_label&&(f+='<span class="juntaplay-badge juntaplay-badge--'+n(t.availability_tone,"info")+'">'+o(t.availability_label)+"</span>"),t.status_label&&(f+='<span class="juntaplay-badge juntaplay-badge--'+n(t.status_tone,"info")+'">'+o(t.status_label)+"</span>"),u.html(f)}var g=i.find(".juntaplay-group-card__quick-value");g.length&&g.text(t.slots_total_label||"");var h=i.find(".juntaplay-group-card__quick-hint");if(h.length){var v=t.slots_available_label||t.slots_total_hint||"";v?h.text(v).removeClass("is-hidden"):h.text("").addClass("is-hidden")}var m=i.find(".juntaplay-group-card__cta");if(m.length)if(t.cta_label||t.price_highlight){var y="";if(t.price_highlight&&(y+='<span class="juntaplay-group-card__cta-price">'+o(t.price_highlight)+"</span>"),t.cta_label){var _=["juntaplay-button"];_.push("primary"===t.cta_variant?"juntaplay-button--primary":"juntaplay-button--ghost"),t.cta_disabled&&_.push("is-disabled");var j=_.join(" ");!t.cta_disabled&&t.cta_url?y+='<a class="'+j+'" href="'+o(t.cta_url)+'">'+o(t.cta_label)+"</a>":y+='<button type="button" class="'+j+'"'+(t.cta_disabled?" disabled":"")+">"+o(t.cta_label)+"</button>"}m.html(y)}else m.empty();var w=i.find(".juntaplay-group-card__created");w.length&&(t.created_human?w.text(t.created_human).show():w.empty().hide());var b=i.find(".juntaplay-group-card__reviewed");b.length&&(t.reviewed_human?b.text(t.reviewed_human).show():b.empty().hide());var x=i.find(".juntaplay-group-card__details");if(x.length){var S=[];if(t.service_name){var C="<strong>"+o(e("Serviço","juntaplay"))+":</strong> ";t.service_url?S.push("<li>"+C+'<a href="'+o(t.service_url)+'" target="_blank" rel="noopener noreferrer">'+o(t.service_name)+"</a></li>"):S.push("<li>"+C+o(t.service_name)+"</li>")}t.price_regular_display&&S.push("<li><strong>"+o(e("Valor do serviço","juntaplay"))+":</strong> "+o(t.price_regular_display)+"</li>"),t.price_promotional_display&&S.push("<li><strong>"+o(e("Oferta promocional","juntaplay"))+":</strong> "+o(t.price_promotional_display)+"</li>"),t.member_price_display&&S.push("<li><strong>"+o(e("Cobrado de cada membro","juntaplay"))+":</strong> "+o(t.member_price_display)+"</li>"),S.push("<li><strong>"+o(e("Tipo","juntaplay"))+":</strong> "+o(e("Público","juntaplay"))+"</li>"),t.category_label&&S.push("<li><strong>"+o(e("Categoria","juntaplay"))+":</strong> "+o(t.category_label)+"</li>"),void 0!==t.members_count&&S.push("<li><strong>"+o(e("Participantes","juntaplay"))+":</strong> "+o(String(t.members_count))+"</li>");var k="";k=t.pool_title?o(t.pool_title):'<span class="juntaplay-profile__empty">'+o(e("Ainda não vinculada","juntaplay"))+"</span>",S.push("<li><strong>"+o(e("Grupo","juntaplay"))+":</strong> "+k+"</li>"),t.support_channel&&S.push("<li><strong>"+o(e("Suporte a Membros","juntaplay"))+":</strong> "+o(t.support_channel)+"</li>"),t.delivery_time&&S.push("<li><strong>"+o(e("Prazo para liberar acesso","juntaplay"))+":</strong> "+o(t.delivery_time)+"</li>"),t.access_method&&S.push("<li><strong>"+o(e("Forma de entrega","juntaplay"))+":</strong> "+o(t.access_method)+"</li>"),t.instant_access_label&&S.push("<li><strong>"+o(e("Acesso instantâneo","juntaplay"))+":</strong> "+o(t.instant_access_label)+"</li>"),x.html(S.join(""))}}}}}window.JP.openGroupEditModal=function(n){var i=parseInt(n,10)||0;i&&(a=i,window.fetch&&et.root?(at&&"function"==typeof at.showLoading&&at.showLoading(),et.fetch("groups/"+i,{method:"GET",headers:et.headers()}).then(function(t){if(!t||!t.form)throw t||{};at&&"function"==typeof at.render&&at.render(t.form),W(jQuery("#juntaplay-group-modal").find("[data-group-cover]"))}).catch(function(a){var n=a&&a.message?a.message:e("Não foi possível carregar os dados agora. Tente novamente em instantes.","juntaplay");at&&"function"==typeof at.message&&at.message("error",n),t||(t=!0,at.loadEdit(i))})):t||(t=!0,at.loadEdit(i)))},window.JP.submitGroupEditForm=function(t){if(t){var n=jQuery(t).find('button[type="submit"]').first();n.length&&n.prop("disabled",!0).addClass("is-loading");var r=new window.FormData(t),o=parseInt(r.get("group_id"),10)||a||0;return o?window.fetch&&et.root?void et.fetch("groups/"+o,{method:"POST",body:r,headers:et.headers()}).then(function(t){if(!t||!t.group)throw t||{};at&&at.close();var a=t.message||e("Grupo atualizado com sucesso.","juntaplay");window.alert(a),i(t.group)}).catch(function(t){var a=t&&t.message?t.message:e("Não foi possível salvar as alterações do grupo.","juntaplay");at&&"function"==typeof at.message?at.message("error",a):window.alert(a)}).finally(function(){n.length&&n.prop("disabled",!1).removeClass("is-loading")}):(n.length&&n.prop("disabled",!1).removeClass("is-loading"),void at.save(t)):(n.length&&n.prop("disabled",!1).removeClass("is-loading"),void(at&&"function"==typeof at.message&&at.message("error",e("Não foi possível identificar o grupo selecionado.","juntaplay"))))}},window.JP.updateGroupCard=i}(),function(){var t=jQuery("[data-group-diagnostics]");if(t.length){var a=t.find("[data-diagnostics-toggle]"),n=t.find("[data-diagnostics-list]"),i=t.find("[data-diagnostics-percent]"),r=t.find("[data-diagnostics-progress]"),o=t.find("[data-diagnostics-bar]");a.on("click",function(t){t.preventDefault();var e="true"===a.attr("aria-expanded");a.attr("aria-expanded",e?"false":"true"),e?n.attr("hidden","hidden"):n.removeAttr("hidden")});var l,s=function(){var t={},a=!1;document.querySelectorAll('input[name="jp_profile_nonce"]').forEach(function(e){var n=e.getAttribute("id");n&&(t[n]&&(a=!0),t[n]=!0)});var e=!0;jQuery("[data-group-cover-preview] img").each(function(){this.getAttribute("src")||(e=!1)});var n=void 0!==window.wp&&!(!window.wp||!window.wp.media),i=!0;document.querySelectorAll("[data-group-cover]").forEach(function(t){"1"!==t.getAttribute("data-group-cover-ready")&&(i=!1)});var r=n;r&&(r=!1,document.querySelectorAll("[data-group-cover]").forEach(function(t){t.getAttribute("data-upload-context")&&t.getAttribute("data-media-author")&&(r=!0)}));var o=!(window.JP&&window.JP._backboneErrorReported);return{edit_modal_opens:void 0!==window.JP&&"function"==typeof window.JP.openGroupEditModal,single_click_media:n&&i,cover_preview_ok:e,can_upload_as_subscriber:r,no_duplicate_nonce_ids:!a,no_backbone_url_error:o}}();(l=s,window.fetch&&et.root?et.fetch("diagnostics",{method:"POST",headers:et.headers({"Content-Type":"application/json"}),body:JSON.stringify({checks:l})}).catch(function(){}):Promise.resolve()).finally(function(){(window.fetch&&et.root?et.fetch("diagnostics",{method:"GET",headers:et.headers()}):Promise.reject()).then(function(a){!function(a){if(a&&a.checks){t.removeAttr("hidden");var l="number"==typeof a.percent?a.percent:0;if(i.text(l+"%"),r.length&&r.attr("aria-valuenow",l),o.length&&o.css("width",Math.max(0,Math.min(100,l))+"%"),n.length){n.empty();var s={edit_modal_opens:e("Modal de edição disponível","juntaplay"),single_click_media:e("Biblioteca abre com um clique","juntaplay"),cover_preview_ok:e("Pré-visualização da capa ativa","juntaplay"),can_upload_as_subscriber:e("Assinante pode enviar capa","juntaplay"),no_duplicate_nonce_ids:e("Sem IDs de nonce duplicados","juntaplay"),no_backbone_url_error:e("Sem erro de Backbone","juntaplay")};Object.keys(a.checks).forEach(function(t){var e=!!a.checks[t],i=s[t]||t,r=jQuery('<li class="juntaplay-diagnostics__item"></li>');r.toggleClass("is-success",e).toggleClass("is-error",!e),r.text((e?"✓ ":"✗ ")+i),n.append(r)})}}}(a)}).catch(function(){t.attr("hidden","hidden")})})}}(),window.addEventListener("error",function(t){-1!==(t&&t.message?String(t.message):"").indexOf('"url" property or function must be specified')&&(window.JP||(window.JP={}),window.JP._backboneErrorReported||(window.JP._backboneErrorReported=!0,window.fetch&&et.root&&et.fetch("diagnostics/flag",{method:"POST",headers:et.headers({"Content-Type":"application/json"}),body:JSON.stringify({type:"backbone_url_error",status:!0})}).catch(function(){})))}),document.addEventListener("DOMContentLoaded",function(){var t=document.querySelectorAll(".juntaplay-relationship__form");t.length&&t.forEach(function(t){t.addEventListener("submit",function(){var a=t.querySelector(".juntaplay-button--primary");if(a){var n=a.getAttribute("data-loading-label");n||(n=e("Redirecionando...","juntaplay"),a.setAttribute("data-loading-label",n)),a.dataset.originalLabel||(a.dataset.originalLabel=a.textContent||""),a.textContent=n,a.classList.add("is-loading"),a.disabled=!0}}),t.addEventListener("change",function(a){var e=a.target;if(e&&"jp_relationship_choice"===e.name&&(t.querySelectorAll(".juntaplay-relationship-card").forEach(function(t){t.classList.remove("is-active")}),e.checked)){var n=e.closest(".juntaplay-relationship-card");n&&n.classList.add("is-active")}})}),setTimeout(function(){jQuery(document).trigger("juntaplay:group-modal-ready")},0)}),t(document).on("juntaplay:group-modal-ready",tt),t(function(){t("[data-group-view-root]").each(function(){D(t(this))})}),t(function(){tt()})}(jQuery);