!function(a){"use strict";window.JP=window.JP||{};var t=window.wp&&window.wp.i18n?window.wp.i18n:null;function e(a,e){return t&&"function"==typeof t.__?t.__.apply(t,arguments):a}function n(a,e,n,i){return t&&"function"==typeof t._n?t._n.apply(t,arguments):1===n?a:e}function i(t){var e=[];return t.find(".juntaplay-grid__item.is-selected").each(function(){e.push(a(this).data("number"))}),e}function o(a,t,e){var n=isFinite(a)?a:0;try{return new Intl.NumberFormat(e||"pt-BR",{style:"currency",currency:t||"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}catch(a){return(t||"R$")+" "+n.toFixed(2)}}function r(a){return String(null==a?"":a).replace(/[&<>"']/g,function(a){switch(a){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#039;";default:return a}})}var l=null;function d(){a("body").hasClass("woocommerce-checkout")&&(l&&clearTimeout(l),l=window.setTimeout(function(){l=null,a(document.body).trigger("update_checkout")},180))}var s=window.JuntaPlay&&window.JuntaPlay.assets&&window.JuntaPlay.assets.groupCoverPlaceholder?window.JuntaPlay.assets.groupCoverPlaceholder.toString():"";if(!s){var p=document.querySelector("[data-cover-placeholder]");if(p){var u=p.getAttribute("data-cover-placeholder")||"";u&&(s=u.toString())}}function c(a){var t={code:"",mask:""};if(!a||!a.length)return t;var e=a.find("option:selected");if(!e.length)return t;var n=e.data("code"),i=e.data("mask");return null!=n&&(t.code=n.toString()),null!=i&&(t.mask=i.toString()),t}function f(a,t){if(!(a=(a||"").toString().replace(/\D+/g,"")))return"";if(!t)return a.replace(/(.{3})/g,"$1 ").trim();for(var e="",n=0,i=0;i<t.length;i++){var o=t.charAt(i);if("0"===o){if(!(n<a.length))break;e+=a.charAt(n),n++}else n>0&&(e+=o)}return n<a.length&&(e&&" "!==e.charAt(e.length-1)&&(e+=" "),e+=a.substr(n)),e.trim()}function g(a){var t=a.find("[data-support-hidden]");t.length&&t.val(function(a){var t=(a.find("[data-support-type]").val()||"").toString();if("whatsapp"===t){var e=c(a.find("[data-support-country]")),n=(a.find("[data-support-phone-input]").val()||"").toString().replace(/\D+/g,"");if(!n)return"";var i=f(n,e.mask),o=[];e.code&&o.push(e.code),i&&o.push(i);var r=o.join(" ").trim();return r?"WhatsApp "+r:""}if("email"===t){var l=(a.find("[data-support-email-input]").val()||"").toString().trim();return l?"E-mail "+l:""}return""}(a))}function h(a){var t=c(a.find("[data-support-country]")),n=a.find("[data-support-code-display]");n.length&&n.text(t.code||"+");var i=a.find("[data-support-phone-input]");if(i.length){var o=f((i.val()||"").toString().replace(/\D+/g,""),t.mask);i.val(o);var r=[];t.code&&r.push(t.code),t.mask&&r.push(t.mask);var l=r.join(" ").trim();l||(l=e("Número com DDI","juntaplay")),i.attr("placeholder",l)}}function m(a){var t=(a.find("[data-support-type]").val()||"").toString(),e=a.find('[data-support-field="whatsapp"]'),n=a.find('[data-support-field="email"]'),i=a.find("[data-support-phone-input]"),o=a.find("[data-support-email-input]"),r=a.find("[data-support-country]");"whatsapp"===t?(e.length&&e.removeAttr("hidden"),n.length&&n.attr("hidden","hidden"),i.prop("disabled",!1).prop("required",!0),r.prop("disabled",!1).prop("required",!0),o.prop("disabled",!0).prop("required",!1),h(a)):"email"===t?(e.length&&e.attr("hidden","hidden"),n.length&&n.removeAttr("hidden"),i.prop("disabled",!0).prop("required",!1),r.prop("disabled",!0).prop("required",!1),o.prop("disabled",!1).prop("required",!0)):(e.length&&e.attr("hidden","hidden"),n.length&&n.attr("hidden","hidden"),i.prop("disabled",!0).prop("required",!1),r.prop("disabled",!0).prop("required",!1),o.prop("disabled",!0).prop("required",!1)),g(a)}function v(t){(t&&t.length?t:a(document)).find("[data-support-channel]").each(function(){m(a(this))})}function y(a){var t=i(a),e=a.find(".juntaplay-selected__numbers"),n=a.find(".juntaplay-selected__count"),r=a.find(".juntaplay-selected__total-value"),l=a.find(".juntaplay-quota-form"),d=e.data("empty")||"",s=r.data("empty")||"",p=l.data("currency"),u=l.data("locale"),c=parseFloat(l.data("price"))||0;if(t.length){var f=t.map(function(a){return'<span class="juntaplay-chip">'+a+"</span>"});e.html(f.join("")),n.text(t.length),r.text(o(t.length*c,p,u))}else e.html('<span class="juntaplay-selected__empty">'+d+"</span>"),n.text("0"),r.text(s)}function j(a,t){var n=a.status||"available",i=["juntaplay-grid__item"];"available"!==n&&(i.push("is-disabled"),i.push("status-"+n)),t&&i.push("is-selected");var o="";return"available"!==n&&(o='<span class="juntaplay-grid__badge">'+function(a){switch(a){case"reserved":return e("Reservada","juntaplay");case"paid":return e("Paga","juntaplay");case"canceled":return e("Cancelada","juntaplay");case"expired":return e("Expirada","juntaplay");default:return e("Disponível","juntaplay")}}(n)+"</span>"),'<button type="button" class="'+i.join(" ")+'" data-number="'+a.number+'" data-status="'+n+'"><span class="juntaplay-grid__number">'+a.number+"</span>"+o+"</button>"}function _(a){var t=a.is_featured?'<span class="juntaplay-pool-card__badge">'+e("Destaque","juntaplay")+"</span>":"",n=a.categoryLabel?'<span class="juntaplay-badge">'+a.categoryLabel+"</span>":"",i='<div class="juntaplay-progress"><span class="juntaplay-progress__bar" style="width:'+(a.progress||0)+'%"></span></div>',o='<div class="juntaplay-pool-card__meta"><span>'+e("Disponíveis","juntaplay")+": "+a.quotasFree+"</span><span>"+e("Vendidas","juntaplay")+": "+a.quotasPaid+"</span></div>";return'<article class="juntaplay-pool-card">'+(a.thumbnail?'<div class="juntaplay-pool-card__cover"><img src="'+a.thumbnail+'" alt="'+a.title+'" /></div>':'<div class="juntaplay-pool-card__cover is-placeholder"><span>'+e("Grupo","juntaplay")+"</span></div>")+'<div class="juntaplay-pool-card__body">'+t+'<h3 class="juntaplay-pool-card__title"><a href="'+a.permalink+'">'+a.title+"</a></h3>"+n+'<p class="juntaplay-pool-card__excerpt">'+a.excerpt+'</p><div class="juntaplay-pool-card__price">'+e("Rifa a partir de","juntaplay")+" <strong>"+a.priceLabel+"</strong></div>"+i+o+'<a class="juntaplay-button juntaplay-button--primary" href="'+a.permalink+'">'+e("Assinar agora","juntaplay")+"</a></div></article>"}function w(t){var n={page:1,perPage:parseInt(t.data("perPage"),10)||12,category:(t.data("category")||"").toString(),orderby:(t.data("orderby")||"created_at").toString(),order:(t.data("order")||"desc").toString(),featured:(t.data("featured")||"").toString(),minPrice:"",maxPrice:"",search:"",loading:!1,hasMore:!0},i=t.find("[data-pool-results]"),o=t.find("[data-pool-meta]"),r=t.find("[data-pool-empty]"),l=t.find("[data-pools-load]"),d=t.find("form.juntaplay-pool-filters");function s(a){n.loading=a,t.toggleClass("is-loading",a),a?l.prop("disabled",!0).text(e("Carregando...","juntaplay")):n.hasMore?l.prop("disabled",!1).removeAttr("hidden").text(e("Carregar mais campanhas","juntaplay")):l.prop("disabled",!0).attr("hidden","hidden")}function p(t){n.loading||(s(!0),t&&(n.page=1,n.hasMore=!0,l.length&&l.removeAttr("hidden")),a.ajax({url:JuntaPlay.ajax,dataType:"json",method:"GET",data:{action:"juntaplay_pools",nonce:JuntaPlay.nonce,page:n.page,per_page:n.perPage,category:n.category,search:n.search,min_price:n.minPrice,max_price:n.maxPrice,orderby:n.orderby,order:n.order,featured:n.featured}}).done(function(a){if(a&&a.success){var d,s=a.data||{},p=s.items||[];if(t&&i.empty(),!p.length&&t?r.text(e("Nenhum grupo encontrado com os filtros selecionados.","juntaplay")).addClass("is-visible"):r.removeClass("is-visible").text(""),p.length){var u=p.map(_);i.append(u.join(""))}n.page=(s.page||1)+1,n.hasMore=(s.page||1)<(s.pages||1),n.hasMore?l.attr("disabled",!1).removeAttr("hidden").text(e("Carregar mais campanhas","juntaplay")):l.attr("disabled",!0).attr("hidden","hidden"),d=s.total||0,o.length&&o.text(d?e("Exibindo","juntaplay")+" "+d:"")}else r.text(a&&a.data&&a.data.message?a.data.message:e("Não foi possível carregar os grupos.","juntaplay")).addClass("is-visible")}).fail(function(){r.text(e("Não foi possível carregar os grupos.","juntaplay")).addClass("is-visible")}).always(function(){s(!1)}))}d.on("submit",function(a){a.preventDefault(),n.category=(d.find('[name="category"]').val()||"").toString(),n.search=(d.find('[name="search"]').val()||"").toString(),n.orderby=(d.find('[name="orderby"]').val()||"created_at").toString(),n.order=(d.find('[name="order"]').val()||"desc").toString(),n.minPrice=(d.find('[name="min_price"]').val()||"").toString(),n.maxPrice=(d.find('[name="max_price"]').val()||"").toString(),p(!0)}),l.on("click",function(a){a.preventDefault(),n.hasMore&&!n.loading&&p(!1)}),p(!0)}function b(t){var e=t.find("[data-group-list]"),n=e.find("[data-group-item]"),i=(t.data("role-filter")||"all").toString(),o=(t.data("status-filter")||"all").toString(),r=0;n.each(function(){var t=a(this),e=(t.data("group-role")||"").toString(),n=(t.data("group-status")||"").toString(),l=!1;"owned"===i&&"owner"!==e&&"manager"!==e?l=!0:"member"!==i||"owner"!==e&&"manager"!==e||(l=!0),l||"all"===o||n===o||(l=!0),t.toggleClass("is-hidden",l),l||r++});var l=e.find("[data-group-empty]");l.length&&(0===r?l.removeClass("is-hidden"):l.addClass("is-hidden"))}function x(a){if(null==a)return 0;var t=a.toString().trim();if(!t)return 0;if(!(t=t.replace(/[^0-9,\.\-]/g,""))||"-"===t)return 0;-1!==t.indexOf(",")&&-1!==t.indexOf(".")?t=t.replace(/\./g,"").replace(",","."):-1!==t.indexOf(",")&&(t=t.replace(",","."));var e=parseFloat(t);return isNaN(e)?0:e}function C(a){if(!isFinite(a)||a<=0)return"";try{return a.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}catch(t){return a.toFixed(2)}}function S(t){if(t.length){var e=t.find("[data-group-share]");if(e.length){var n=function(t){var e=t.find('[name="jp_profile_group_category"]'),n=a.trim((e.val()||"").toString()),i=a.trim((e.find("option:selected").text()||"").toString());return{name:a.trim((t.find('[name="jp_profile_group_name"]').val()||"").toString()),service:a.trim((t.find('[name="jp_profile_group_service"]').val()||"").toString()),serviceUrl:a.trim((t.find('[name="jp_profile_group_service_url"]').val()||"").toString()),rules:a.trim((t.find('[name="jp_profile_group_rules"]').val()||"").toString()),description:a.trim((t.find('[name="jp_profile_group_description"]').val()||"").toString()),price:x(t.find('[name="jp_profile_group_price"]').val()),promoEnabled:t.find("[data-group-promo-toggle]").is(":checked"),promo:x(t.find('[name="jp_profile_group_price_promo"]').val()),slotsTotal:parseInt((t.find('[name="jp_profile_group_slots_total"]').val()||"0").toString(),10)||0,slotsReserved:parseInt((t.find('[name="jp_profile_group_slots_reserved"]').val()||"0").toString(),10)||0,memberPrice:x(t.find('[name="jp_profile_group_member_price"]').val()),support:a.trim((t.find('[name="jp_profile_group_support"]').val()||"").toString()),delivery:a.trim((t.find('[name="jp_profile_group_delivery"]').val()||"").toString()),access:a.trim((t.find('[name="jp_profile_group_access"]').val()||"").toString()),category:n,categoryLabel:i,instantAccess:t.find('[name="jp_profile_group_instant"]').is(":checked")}}(t),i=((e.data("domain")||"").toString(),(e.find('[data-group-share-field="promo"]').data("fallback")||"").toString()),r=(e.find('[data-group-share-field="category"]').data("empty")||"").toString(),l=(e.find('[data-group-share-field="instant_access"]').data("fallback")||"").toString(),d=n.price>0?o(n.price,"BRL","pt-BR"):"",s=n.promoEnabled&&n.promo>0?o(n.promo,"BRL","pt-BR"):"",p=n.memberPrice>0?o(n.memberPrice,"BRL","pt-BR"):"",u=n.slotsReserved>0?n.slotsReserved.toString():"",c=s||i||"Não",f=n.promoEnabled&&n.promo>0?"Sim":"Não",g=n.categoryLabel||r,h=n.instantAccess?"Ativado":l||"Desativado",m={service:n.service,name:n.name,category:g,service_url:n.serviceUrl,rules:n.rules,description:n.description,price:d,promo_flag:f,promo:c,slots_total:n.slotsTotal>0?n.slotsTotal.toString():"",slots_reserved:u||"0",member_price:p,support:n.support,delivery:n.delivery,access:n.access,instant_access:h};a.each(m,function(a,t){var n=e.find('[data-group-share-field="'+a+'"]');if(n.length){var i=(n.data("empty")||n.data("fallback")||"").toString(),o=t;"string"==typeof o&&(o=o.trim()),o?n.text(o):i?n.text(i):n.text("—")}});var v=[];n.service&&v.push("Serviço: "+n.service),n.name&&v.push("Nome do grupo: "+n.name),v.push("Tipo: Público"),g&&v.push("Categoria: "+g),n.serviceUrl&&v.push("Site: "+n.serviceUrl),n.rules&&v.push("Regras: "+n.rules),n.description&&v.push("Descrição: "+n.description),d&&v.push("Valor do serviço: "+d),v.push("É valor promocional?: "+f),v.push("Valor promocional: "+c),n.slotsTotal>0&&v.push("Vagas totais: "+n.slotsTotal),n.slotsReserved>0&&v.push("Reservadas para você: "+n.slotsReserved),p&&v.push("Os membros vão pagar: "+p),n.support&&v.push("Suporte a membros: "+n.support),n.delivery&&v.push("Envio de acesso: "+n.delivery),n.access&&v.push("Forma de acesso: "+n.access),v.push("Acesso instantâneo: "+h);var y=v.join("\n");y||(y=(e.data("empty")||"").toString());var j=e.find("[data-group-share-snippet]");j.length&&j.text(y);var _=e.find("[data-group-share-text]");_.length&&_.val(y)}}}function k(a){if(a.length){var t=x(a.find('[name="jp_profile_group_price"]').val()),e=a.find("[data-group-promo-toggle]").is(":checked")?x(a.find('[name="jp_profile_group_price_promo"]').val()):0,n=parseInt(a.find('[name="jp_profile_group_slots_total"]').val(),10)||0,i=parseInt(a.find('[name="jp_profile_group_slots_reserved"]').val(),10)||0,r=Math.max(1,n-i),l=e>0?e:t,d=l>0?l/r:0,s=a.find("[data-group-member-input]"),p=a.find("[data-group-price-preview]"),u=!0===s.data("jpDirty"),c="yes"===s.data("group-member-generated");if(s.length)if(!u&&d>0){var f=C(d);f&&(s.val(f),s.data("group-member-generated","yes"))}else!u&&d<=0&&c&&s.val("");if(p.length){var g=x(s.val());if(g<=0&&d>0&&(g=d),g>0){var h=(p.data("suffix")||"").toString().trim(),m=o(g,"BRL","pt-BR");h&&(m+=" "+h),p.text(m).removeClass("is-hidden")}else{var v=(p.data("empty")||"").toString();v?p.text(v).removeClass("is-hidden"):p.addClass("is-hidden")}}S(a)}}function P(a){var t=a.closest("form"),e=t.find("[data-group-promo-field]");a.is(":checked")?e.removeClass("is-hidden"):(e.addClass("is-hidden"),e.find("input").val("")),k(t)}function I(t,e){e&&(t.attr("data-active-view",e),t.find(".juntaplay-auth__switch-btn").each(function(){var t=a(this),n=t.data("target")===e;t.toggleClass("is-active",n),t.attr("aria-selected",n?"true":"false")}),t.find(".juntaplay-auth__pane").each(function(){var t=a(this),n=t.data("pane")===e;t.toggleClass("is-active",n),t.attr("aria-hidden",n?"false":"true")}))}function D(a){if(a&&a.length){a.removeClass("is-open");var t=a.find("[data-guest-menu-toggle]").first();t.length&&t.attr("aria-expanded","false");var e=a.find("[data-guest-menu-panel]").first();e.length&&e.attr("aria-hidden","true")}}function A(){return window.matchMedia?window.matchMedia("(max-width: 768px)").matches:!!window.innerWidth&&window.innerWidth<=768}function N(a){if(a&&a.length){a.removeClass("is-menu-open");var t=a.find("[data-profile-menu-toggle]").first(),e=t.length>0;e&&t.attr("aria-expanded","false");var n=a.find("[data-profile-menu]").first();n.length&&(e?n.attr("aria-hidden",A()?"true":"false"):n.attr("aria-hidden","false"));var i=a.find("[data-profile-menu-overlay]").first();i.length&&i.attr("aria-hidden","true")}}function J(t,e,n){if(t&&e){var i=t.find("[data-profile-category-toggle]"),o=t.find("[data-profile-category-panel]");i.each(function(){var t=a(this),n=t.data("profileCategoryToggle")===e||t.attr("data-profile-category-toggle")===e;t.toggleClass("is-active",n),t.attr("aria-pressed",n?"true":"false")}),o.each(function(){var t=a(this),n=t.data("profileCategoryPanel")===e;t.toggleClass("is-active",n),t.attr("aria-hidden",n?"false":"true")});var r=o.filter('[data-profile-category-panel="'+e+'"]');if(r.length){if(!n){var l=r.find("[data-profile-tab-toggle].is-active").first();l.length&&(n=l.data("profileTabToggle")||"")}if(!n){var d=r.find("[data-profile-tab-panel]").first();d.length&&(n=d.data("profileTabPanel")||"")}!function(t,e,n){if(t&&e){var i=t.find('[data-profile-category-panel="'+e+'"]');if(i.length){var o=i.find("[data-profile-tab-panel]"),r=i.find("[data-profile-tab-toggle]");!n&&o.length&&(n=o.first().data("profileTabPanel")||""),r.each(function(){var t=a(this),e=t.data("profileTabToggle")===n;t.toggleClass("is-active",e),t.attr("aria-selected",e?"true":"false")}),o.each(function(){var t=a(this),e=t.data("profileTabPanel")===n;t.toggleClass("is-active",e),t.attr("aria-hidden",e?"false":"true")})}}}(t,e,n)}}}a(document).on("change","[data-support-type]",function(){var t=a(this).closest("[data-support-channel]");t.length&&m(t)}),a(document).on("change","[data-support-country]",function(){var t=a(this).closest("[data-support-channel]");t.length&&(h(t),g(t))}),a(document).on("input","[data-support-phone-input]",function(){var t=a(this).closest("[data-support-channel]");t.length&&(h(t),g(t))}),a(document).on("input","[data-support-email-input]",function(){var t=a(this).closest("[data-support-channel]");t.length&&g(t)}),s||(s="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2IDUiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIHNsaWNlIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImpwQ292ZXIiIHgxPSIwIiB4Mj0iMSIgeTE9IjAiIHkyPSIxIj48c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjRERFM0VBIiAvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI0YxRjNGNiIgLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNiIgaGVpZ2h0PSI1IiBmaWxsPSJ1cmwoI2pwQ292ZXIpIiAvPjxnIGZpbGw9IiM5MEE0QjgiIG9wYWNpdHk9IjAuOCI+PHBhdGggZD0iTTEgMy4yIDIuNCAxLjZsLjguOS44LS43TDUgMy40di44SDF6IiAvPjxjaXJjbGUgY3g9IjEuNCIgY3k9IjEuMyIgcj0iMC41IiAvPjwvZz48L3N2Zz4="),a(document).on("click",".juntaplay-grid__item",function(){var t=a(this),e=t.closest(".juntaplay-quota-selector");!function(a){a.hasClass("is-disabled")||a.toggleClass("is-selected")}(t),e.data("selectedNumbers",i(e)),y(e)}),a(document).on("submit",".juntaplay-quota-form",function(t){var e=a(this),n=i(e.closest(".juntaplay-quota-selector"));return n.length?(e.find('input[name="jp_numbers[]"]').remove(),n.forEach(function(t){a("<input />",{type:"hidden",name:"jp_numbers[]",value:t}).appendTo(e)}),!0):(t.preventDefault(),alert(e.data("message-empty")),!1)}),a(function(){a(".juntaplay-quota-selector").each(function(){!function(t){var n={poolId:parseInt(t.data("pool"),10)||0,perPage:parseInt(t.data("perPage"),10)||120,page:1,status:(t.data("status")||"available").toString(),search:"",sort:(t.data("sort")||"ASC").toString(),loading:!1,hasMore:!0},o=t.find(".juntaplay-grid"),r=t.find("[data-quota-load]"),l=t.find("[data-quota-feedback]"),d=t.find(".juntaplay-quota-filter");function s(a){n.loading=a,t.toggleClass("is-loading",a),a?r.prop("disabled",!0).text(e("Carregando...","juntaplay")):r.prop("disabled",!1).text(n.hasMore?e("Ver mais números","juntaplay"):e("Todos os números carregados","juntaplay"))}function p(i){!n.loading&&n.poolId&&(s(!0),i&&(n.page=1,n.hasMore=!0),a.ajax({url:JuntaPlay.ajax,dataType:"json",method:"GET",data:{action:"juntaplay_pool_numbers",nonce:JuntaPlay.nonce,pool_id:n.poolId,page:n.page,per_page:n.perPage,status:n.status,search:n.search,sort:n.sort}}).done(function(a){if(a&&a.success){var d=a.data||{},s=d.items||[];i&&o.empty(),!s.length&&i?l.text(e("Nenhum número encontrado para os filtros selecionados.","juntaplay")).addClass("is-visible"):l.removeClass("is-visible").text("");var p=t.data("selectedNumbers")||[];if(s.length){var u=s.map(function(a){return j(a,-1!==p.indexOf(a.number))});o.append(u.join(""))}n.page=(d.page||1)+1,n.hasMore=(d.page||1)<(d.pages||1),n.hasMore?r.attr("disabled",!1).text(e("Ver mais números","juntaplay")):r.attr("disabled",!0).text(e("Todos os números carregados","juntaplay")),y(t)}else l.text(a&&a.data&&a.data.message?a.data.message:e("Não foi possível carregar as cotas agora.","juntaplay")).addClass("is-visible")}).fail(function(){l.text(e("Não foi possível carregar as cotas agora.","juntaplay")).addClass("is-visible")}).always(function(){s(!1)}))}t.data("selectedNumbers",i(t)),d.on("submit",function(a){a.preventDefault(),n.status=(d.find('[name="status"]').val()||"available").toString(),n.search=(d.find('[name="search"]').val()||"").toString(),n.sort=(d.find('[name="sort"]').val()||"ASC").toString(),p(!0)}),r.on("click",function(a){a.preventDefault(),n.hasMore&&!n.loading&&p(!1)}),p(!0)}(a(this))}),a(".juntaplay-pool-catalog").each(function(){w(a(this))}),a("[data-jp-two-factor]").each(function(){!function(a){if(!a.length)return;var t,n=parseInt(a.data("remaining"),10)||0,i=parseInt(a.data("cooldown"),10)||45,o=a.find("[data-jp-two-factor-timer]"),r=a.find("[data-jp-two-factor-resend-button]"),l=a.find("[data-jp-two-factor-input]");l.length&&setTimeout(function(){l.trigger("focus")},150);if(o.length&&n>0)var d=setInterval(function(){if((n-=1)<=0)return clearInterval(d),void o.attr("hidden","hidden");var a=Math.floor(n/60),t=n%60,i=String(a).padStart(2,"0")+":"+String(t).padStart(2,"0");o.removeAttr("hidden").text(e("O código expira em %s.","juntaplay").replace("%s",i))},1e3);r.length&&i>0&&a.on("submit","[data-jp-two-factor-resend]",function(){if(!r.prop("disabled")){r.prop("disabled",!0).text(e("Enviando...","juntaplay")),t&&clearInterval(t);var a=i;t=setInterval(function(){(a-=1)<=0?(clearInterval(t),r.prop("disabled",!1).text(e("Enviar novo código","juntaplay"))):r.text(e("Tente novamente em %s s","juntaplay").replace("%s",a))},1e3)}})}(a(this))}),a(".juntaplay-groups[data-jp-groups]").each(function(){!function(t){if(!t.length||void 0===window.JuntaPlay)return;var i={page:1,currentPage:1,totalPages:1,perPage:parseInt(t.data("perPage"),10)||16,loading:!1,orderby:"created",order:"desc",category:"",search:"",instant:""},o=t.data("defaultSearch"),r=t.data("defaultCategory"),l=t.data("defaultOrderby"),d=t.data("defaultOrder"),s=t.data("defaultInstant");"string"==typeof o&&o.length&&(i.search=o);"string"==typeof r&&r.length&&(i.category=r);"string"==typeof l&&l.length&&(i.orderby=l);"string"==typeof d&&d.length&&(i.order=d);"string"==typeof s&&s.length&&(i.instant=s);var p=(t.data("cardVariant")||"spotlight").toString();"compact"!==p&&(p="spotlight");var u=t.find("[data-jp-groups-list]"),c=t.find("[data-jp-groups-empty]"),f=t.find("[data-jp-groups-total]"),g=t.find("[data-jp-groups-filters]"),h=t.find("[data-jp-groups-pagination]");function m(a){i.loading=a,t.toggleClass("is-loading",a)}function v(a){f.length&&(a=parseInt(a,10)||0,f.text(a?n("%d grupo encontrado","%d grupos encontrados",a,"juntaplay").replace("%d",a):e("Nenhum grupo encontrado","juntaplay")))}function y(a){if(u.empty(),a&&a.length){var t=a.map(function(a){return F(a,p)}).join("");u.html(t),c.attr("hidden","hidden")}else c.removeAttr("hidden")}function j(a,t){var e=[],n=Math.max(1,a-2),i=Math.min(t,a+2);n>1&&(e.push(1),n>2&&e.push("ellipsis"));for(var o=n;o<=i;o+=1)e.push(o);return i<t&&(i<t-1&&e.push("ellipsis"),e.push(t)),e}function _(){if(h.length){var a=i.totalPages,t=i.currentPage;if(a<=1)h.empty().attr("hidden","hidden");else{var n=j(t,a),o=t<=1,r=t>=a,l=[];l.push('<button type="button" class="juntaplay-pagination__nav'+(o?" is-disabled":"")+'" data-page="'+(t-1)+'"'+(o?' aria-disabled="true" disabled':"")+">"+e("Anterior","juntaplay")+"</button>"),n.forEach(function(a){if("ellipsis"!==a){var e=a===t;l.push('<button type="button" class="juntaplay-pagination__page'+(e?" is-active":"")+'" data-page="'+a+'"'+(e?' aria-current="page"':"")+">"+a+"</button>")}else l.push('<span class="juntaplay-pagination__ellipsis" aria-hidden="true">…</span>')}),l.push('<button type="button" class="juntaplay-pagination__nav'+(r?" is-disabled":"")+'" data-page="'+(t+1)+'"'+(r?' aria-disabled="true" disabled':"")+">"+e("Próxima","juntaplay")+"</button>"),h.html(l.join("")).removeAttr("hidden")}}}function w(t){i.loading||("number"!=typeof t||Number.isNaN(t)||(i.page=Math.max(1,t)),m(!0),a.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_groups_directory",nonce:window.JuntaPlay.nonce,page:i.page,per_page:i.perPage,search:i.search,category:i.category,orderby:i.orderby,order:i.order,instant_access:i.instant}).done(function(a){if(a&&a.success&&a.data){var t=a.data,e=parseInt(t.page,10)||i.page,n=parseInt(t.pages,10)||1;i.currentPage=e,i.totalPages=n,y(t.items||[]),v(t.total||0),_()}}).fail(function(){u.empty(),c.removeAttr("hidden").text(e("Não foi possível carregar os grupos agora.","juntaplay")),i.totalPages=1,_()}).always(function(){m(!1)}))}if(g.length){if(i.search&&g.find('input[name="search"]').val(i.search),i.category&&g.find('select[name="category"]').val(i.category),"1"===i.instant&&g.find('input[name="instant"]').prop("checked",!0),i.orderby){var b=g.find('select[name="orderby"]');if(b.length){var x=b.find("option").filter(function(){var t=a(this),e=(t.val()||"").toString(),n=(t.data("order")||"").toString();return e===i.orderby&&(!i.order||n===i.order)}).first();if(x.length)b.val(x.val()),b.find("option").prop("selected",!1),x.prop("selected",!0),i.order=(x.data("order")||i.order||"desc").toString();else{b.val(i.orderby);var C=b.find(":selected");C.length&&(i.order=(C.data("order")||i.order||"desc").toString())}}}g.on("submit",function(a){a.preventDefault(),i.search=g.find('input[name="search"]').val()||"",w(1)}),g.on("change",'select[name="category"]',function(){i.category=a(this).val()||"",w(1)}),g.on("change",'select[name="orderby"]',function(){var t=a(this).find(":selected");i.orderby=a(this).val()||"created",i.order=(t.data("order")||"desc").toString(),w(1)}),g.on("change",'input[name="instant"]',function(){i.instant=a(this).is(":checked")?"1":"",w(1)}),g.on("click","[data-jp-groups-clear]",function(){g.find('input[name="search"]').val(""),g.find('select[name="category"]').prop("selectedIndex",0);var a=g.find('select[name="orderby"]');a.prop("selectedIndex",0),i.orderby=a.val()||"created",i.order=(a.find(":selected").data("order")||"desc").toString(),g.find('input[name="instant"]').prop("checked",!1),i.search="",i.category="",i.instant="",w(1)})}h.length&&h.on("click","[data-page]",function(e){e.preventDefault();var n=parseInt(a(this).attr("data-page"),10);Number.isNaN(n)||n<1||n>i.totalPages||n===i.currentPage||(w(n),window.requestAnimationFrame(function(){var e=t.offset();e&&a("html, body").animate({scrollTop:Math.max(0,e.top-120)},240)}))});w(1)}(a(this))}),a("[data-group-cover]").each(function(){B(a(this))}),a(".juntaplay-group-rotator").each(function(){!function(t){if(!t.length||void 0===window.JuntaPlay)return;var e=parseInt(t.data("limit"),10)||12,n={category:(t.data("defaultCategory")||"").toString(),loading:!1},i=t.find("[data-rotator-grid]"),o=t.find("[data-rotator-track]"),r=t.find("[data-rotator-empty]"),l=t.find('[data-rotator-nav="prev"]'),d=t.find('[data-rotator-nav="next"]');function s(a){n.loading=a,t.toggleClass("is-loading",a)}function p(){if(o.length){var a=o.get(0);if(a){var t=Math.max(0,a.scrollWidth-a.clientWidth),e=a.scrollLeft,n=4,i=e<=n,r=e>=t-n;l.length&&l.toggleClass("is-disabled",i).prop("disabled",i).attr("aria-disabled",i?"true":"false"),d.length&&d.toggleClass("is-disabled",r).prop("disabled",r).attr("aria-disabled",r?"true":"false")}}}function u(a){if(i.empty(),a&&a.length){var t=a.map(function(a){return F(a,"spotlight")}).join("");i.html(t),r.length&&r.attr("hidden","hidden")}else r.length&&r.removeAttr("hidden")}function c(){n.loading||(s(!0),a.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_groups_directory",nonce:window.JuntaPlay.nonce,page:1,per_page:e,orderby:"updated",order:"desc",category:n.category}).done(function(a){a&&a.success&&a.data?u(a.data.items||[]):u([])}).fail(function(){u([])}).always(function(){s(!1)}))}o.length&&(o.on("click","[data-rotator-filter]",function(t){t.preventDefault();var e=a(this),i=(e.data("rotatorFilter")||"").toString();if(i!==n.category){n.category=i,e.addClass("is-active").attr("aria-selected","true"),e.siblings("[data-rotator-filter]").removeClass("is-active").attr("aria-selected","false");var o=e.get(0);if(o&&"function"==typeof o.scrollIntoView)try{o.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}catch(a){}c()}}),o.on("scroll",function(){p()}));if(l.length||d.length){var f=function(a){if(o.length){var t=o.get(0);if(t){var e=.6*t.clientWidth,n=Math.max(0,Math.min(t.scrollLeft+a*e,t.scrollWidth-t.clientWidth));o.stop().animate({scrollLeft:n},260,"swing",p)}}};l.length&&l.on("click",function(t){t.preventDefault(),a(this).hasClass("is-disabled")||f(-1)}),d.length&&d.on("click",function(t){t.preventDefault(),a(this).hasClass("is-disabled")||f(1)}),a(window).on("resize",function(){p()})}c(),p()}(a(this))}),a(".juntaplay-dashboard[data-dashboard]").each(function(){!function(t){if(t&&t.length){var e=t.find("[data-dashboard-tab]"),n=t.find("[data-dashboard-panel]");if(e.length&&n.length){var i=null;e.on("click",function(t){t.preventDefault();var e=(a(this).data("dashboardTab")||"").toString();e&&e!==i&&s(e)});var o=(e.filter(".is-active").first().data("dashboardTab")||"").toString();try{var r=(new URL(window.location.href).searchParams.get("jp_tab")||"").toString();r&&e.filter('[data-dashboard-tab="'+r+'"]').length&&(o=r)}catch(a){}if(!o&&window.location.hash){var l=window.location.hash.replace("#","");if(0===l.indexOf("jp_tab=")){var d=l.split("=")[1]||"";d&&e.filter('[data-dashboard-tab="'+d+'"]').length&&(o=d)}}!o&&e.length&&(o=(e.first().data("dashboardTab")||"").toString()),s(o)}}function s(t){if(t&&(i=t,e.each(function(){var e=a(this),n=(e.data("dashboardTab")||"").toString()===t;e.toggleClass("is-active",n),e.attr("aria-selected",n?"true":"false")}),n.each(function(){var e=a(this),n=(e.data("dashboardPanel")||"").toString()===t;e.toggleClass("is-active",n),e.attr("aria-hidden",n?"false":"true")}),window.history&&window.history.replaceState))try{var o=new URL(window.location.href);o.searchParams.set("jp_tab",t),window.history.replaceState({},document.title,o.toString())}catch(a){}}}(a(this))});var t=a("#jp-group-create-template");t.length&&parseInt(t.data("autoOpen"),10)&&z()}),a(document).on("click","[data-group-filter]",function(t){t.preventDefault();var e=a(this),n=(e.data("group-filter")||"all").toString(),i=e.closest("[data-groups]");i.length&&(e.addClass("is-active").attr("aria-selected","true"),e.siblings("[data-group-filter]").removeClass("is-active").attr("aria-selected","false"),i.data("role-filter",n),b(i))}),a(document).on("change","[data-group-status-filter]",function(){var t=a(this),e=(t.val()||"all").toString(),n=t.closest("[data-groups]");n.length&&(n.data("status-filter",e),b(n))}),a(document).on("click","[data-group-card-toggle]",function(t){t.preventDefault();var e=a(this),n="true"===e.attr("aria-expanded");n=!n,e.attr("aria-expanded",n?"true":"false");var i=e.data("labelExpand")||e.data("label-expand")||"",o=e.data("labelCollapse")||e.data("label-collapse")||"",r=e.find(".juntaplay-group-card__toggle-label");r.length&&(n&&o?r.text(o):!n&&i&&r.text(i));var l=e.closest(".juntaplay-group-card"),d=l.find("[data-group-card-details]").first();d.length&&(n?d.removeAttr("hidden"):d.attr("hidden","hidden")),l.length&&l.toggleClass("is-expanded",n)}),a(document).on("click","[data-group-detail-trigger]",function(t){t.preventDefault();var e=(a(this).data("detailTarget")||a(this).data("target")||"").toString();e&&("#"!==e.charAt(0)&&(e="#"+e),function(t){if(!t)return;var e=a("[data-group-modal]");if(!e.length)return;var n=G(t);if(!n||!n.length)return;U(e,n)}(e))}),a(document).on("click","[data-jp-group-open]",function(t){if(!(t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||2===t.which)){var e=a(this),n=parseInt(e.data("groupId"),10);if(!n){var i=e.closest("[data-group-id]");i.length&&(n=parseInt(i.data("groupId"),10)||0)}n&&(t.preventDefault(),t.stopPropagation(),void 0!==V&&V&&"function"==typeof V.loadDetail&&V.loadDetail(n))}}),a(document).on("click","[data-group-create-trigger]",function(a){a.preventDefault(),z()}),a(document).on("click","[data-modal-close]",function(t){t.preventDefault(),Q(a(this).closest(".juntaplay-modal"))}),a(document).on("click",".juntaplay-modal__overlay",function(t){t.preventDefault(),Q(a(this).closest(".juntaplay-modal"))}),a(document).on("keyup",function(t){"Escape"===t.key&&a(".juntaplay-modal.is-open").each(function(){Q(a(this))})}),a(document).on("click","[data-jp-share-network]",function(t){t.preventDefault();var e=a(this),n=function(a,t,e){var n=(t||"").toString();if(!n)return"";var i=encodeURIComponent(n),o=encodeURIComponent((e||"").toString());switch((a||"").toString().toLowerCase()){case"whatsapp":return"https://wa.me/?text="+o+(o?"%20":"")+i;case"telegram":return"https://t.me/share/url?url="+i+"&text="+o;case"facebook":return"https://www.facebook.com/sharer/sharer.php?u="+i;case"twitter":case"x":return"https://twitter.com/intent/tweet?url="+i+"&text="+o;default:return""}}((e.data("jpShareNetwork")||"").toString(),(e.data("jpShareUrl")||"").toString(),(e.data("jpShareText")||document.title||"").toString());n&&function(a){if(!a)return;var t=640,e=520,n=window.screenX+Math.max(0,(window.outerWidth-t)/2),i=window.screenY+Math.max(0,(window.outerHeight-e)/2);window.open(a,"_blank","noopener,noreferrer,width="+t+",height="+e+",left="+n+",top="+i)}(n)}),a(document).on("click","[data-jp-share-copy]",function(t){t.preventDefault();var n=a(this),i=(n.data("jpShareUrl")||"").toString();if(i){var o=(n.data("jpShareLabel")||n.text()).toString(),r=(n.data("jpShareCopied")||e("Link copiado!","juntaplay")).toString();(function(a){var t=(a||"").toString();if(!t)return Promise.reject();if(navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)return navigator.clipboard.writeText(t);return new Promise(function(a,e){try{var n=document.createElement("textarea");n.value=t,n.setAttribute("readonly","readonly"),n.style.position="fixed",n.style.opacity="0",document.body.appendChild(n),n.select();var i=document.execCommand("copy");document.body.removeChild(n),i?a():e()}catch(a){e(a)}})})(i).then(function(){n.addClass("is-success").text(r),window.setTimeout(function(){n.removeClass("is-success").text(o)},2200)}).catch(function(){n.addClass("is-error"),window.setTimeout(function(){n.removeClass("is-error").text(o)},1800)})}}),a(document).on("change","[data-group-promo-toggle]",function(){P(a(this))}),a(document).on("input change","[data-group-price-input], [data-group-slot-input]",function(){k(a(this).closest("form"))}),a(document).on("change","#jp-group-instant",function(){var t=a(this),e=t.closest(".juntaplay-toggle").find(".juntaplay-toggle__caption");if(e.length){var n=(e.data("toggle-caption-active")||"Ativado").toString(),i=(e.data("toggle-caption-inactive")||"Desativado").toString();e.text(t.is(":checked")?n:i)}S(t.closest("form"))}),a(document).on("input","[data-group-member-input]",function(){var t=a(this);t.data("jpDirty",!0),t.data("group-member-generated","no"),k(t.closest("form"))}),a(document).on("blur","[data-group-member-input]",function(){var t=a(this),e=x(t.val());e>0&&t.val(C(e))}),a(document).on("input change","[data-group-share-watch]",function(){S(a(this).closest("form"))}),a(document).on("click","[data-group-share-copy]",function(t){t.preventDefault();var e=a(this),n=e.closest("[data-group-share]").find("[data-group-share-text]");if(!n.length){var i=e.closest("form");i.length&&(n=i.find("[data-group-share-text]"))}if(n.length){var o=(n.val()||"").toString();if(o){var r=(e.data("default-label")||e.text()||"").toString(),l=(e.data("success-label")||r).toString(),d=function(){e.text(l).addClass("is-success"),setTimeout(function(){e.text(r).removeClass("is-success")},2e3)},s=function(){alert(e.data("error-label")||"Não foi possível copiar agora. Copie manualmente.")};if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(o).then(d).catch(s);else{var p=n[0],u=p.hasAttribute("hidden");try{p.removeAttribute("hidden"),p.select(),document.execCommand("copy")?d():s()}catch(a){s()}finally{if(u&&p.setAttribute("hidden","hidden"),window.getSelection)try{window.getSelection().removeAllRanges()}catch(a){}}}}}}),a(document).on("click","[data-group-suggestion-apply]",function(t){t.preventDefault();var e=a(this),n=e.closest("[data-group-suggestion]"),i=e.closest(".juntaplay-groups__create-modal, .juntaplay-groups__create-card").find("form").first();if(n.length&&i.length){var o=(n.data("title")||"").toString(),r=parseFloat((n.data("amount")||"").toString().replace(",",".")),l=(n.data("category")||"").toString(),d=(n.data("description")||"").toString();o&&i.find('[name="jp_profile_group_service"]').val(o).trigger("input");var s=i.find('[name="jp_profile_group_name"]');if(s.length&&!a.trim((s.val()||"").toString())&&s.val("Grupo "+o).trigger("input"),d){var p=i.find('[name="jp_profile_group_description"]');p.length&&!a.trim((p.val()||"").toString())&&p.val(d).trigger("input")}Number.isFinite(r)&&r>0&&i.find('[name="jp_profile_group_price"]').val(C(r)).trigger("input"),l&&i.find('[name="jp_profile_group_category"]').val(l).trigger("change");var u=i.find("[data-group-promo-toggle]");u.length&&(u.prop("checked",!1),P(u));var c=i.find('[name="jp_profile_group_price_promo"]');c.length&&c.val("");var f=i.find('[name="jp_profile_group_member_price"]');f.length&&f.val("").data("group-member-generated","yes"),k(i),S(i)}}),a(document.body).on("updated_wc_div updated_cart_totals wc_fragments_refreshed",function(){a(".juntaplay-quota-selector").each(function(){y(a(this))})}),a(function(){a("[data-groups]").each(function(){b(a(this))}),a("[data-group-member-input]").each(function(){var t=a(this);"yes"===t.data("group-member-generated")?t.removeData("jpDirty"):t.val()&&t.data("jpDirty",!0),k(t.closest("form"))}),a("[data-group-promo-toggle]").each(function(){var t=a(this);t.is(":checked")&&t.closest("form").find("[data-group-promo-field]").removeClass("is-hidden")}),a("[data-group-share]").each(function(){S(a(this).closest("form"))})}),a(document).on("click",".juntaplay-auth__switch-btn",function(t){t.preventDefault();var e=a(this);if(!e.is(":disabled")){var n=e.data("target");I(e.closest(".juntaplay-auth"),n)}}),a(function(){a(".juntaplay-auth").each(function(){var t=a(this);I(t,t.data("active-view"))})}),a(document).on("click","[data-jp-auth-open]",function(t){var e=a(this),n=a("#jp-auth-modal-template"),i=a("[data-auth-modal]");if(t.preventDefault(),n.length&&i.length){var o=(e.data("jpAuthOpen")||"login").toString(),r=G("#jp-auth-modal-template");if(r&&r.length){U(i,r);var l=i.find(".juntaplay-auth").first();l.length&&o&&I(l,o)}}else{var d=e.attr("href");d&&(window.location.href=d)}}),a(document).on("click","[data-guest-menu-toggle]",function(t){t.preventDefault();var e=a(this),n=e.closest("[data-guest-menu]");if(n.length){var i=n.hasClass("is-open");if(a("[data-guest-menu].is-open").each(function(){D(a(this))}),!i){n.addClass("is-open"),e.attr("aria-expanded","true");var o=n.find("[data-guest-menu-panel]").first();o.length&&o.attr("aria-hidden","false")}}}),a(document).on("click","[data-guest-menu-panel] a, [data-guest-menu-panel] button",function(){D(a(this).closest("[data-guest-menu]"))}),a(document).on("click",function(t){a(t.target).closest("[data-guest-menu]").length||a("[data-guest-menu].is-open").each(function(){D(a(this))})}),a(function(){var t=a("#jp-auth-modal-template");if(t.length){var e=(t.data("autoOpen")||"").toString();e&&window.requestAnimationFrame(function(){var t=a('[data-jp-auth-open="'+e+'"]').first();if(t.length)t.trigger("click");else{var n=a("[data-auth-modal]");if(n.length){var i=G("#jp-auth-modal-template");if(i&&i.length){U(n,i);var o=n.find(".juntaplay-auth").first();o.length&&I(o,e)}}}})}}),a(function(){a("[data-guest-menu-panel]").attr("aria-hidden","true")}),a(document).on("click","[data-profile-category-toggle]",function(t){t.preventDefault();var e=a(this),n=e.attr("data-profile-category-toggle")||"",i=e.closest("[data-profile]");J(i,n),N(i)}),a(document).on("click","[data-profile-quick]",function(t){t.preventDefault();var e=a(this),n=e.attr("data-profile-quick-category")||"",i=e.attr("data-profile-quick-tab")||"",o=e.closest("[data-profile]");n&&(J(o,n,i),N(o))}),a(document).on("click","[data-profile-tab-toggle]",function(t){t.preventDefault();var e=a(this),n=e.attr("data-profile-tab-toggle")||"",i=e.attr("data-profile-tab-category")||"",o=e.closest("[data-profile]");i||(i=o.find("[data-profile-category-toggle].is-active").first().attr("data-profile-category-toggle")||"");J(o,i,n),N(o)}),a(document).on("click","[data-profile-menu-toggle]",function(t){t.preventDefault();var e=a(this),n=e.closest("[data-profile]");if(n.length){var i=n.hasClass("is-menu-open");n.toggleClass("is-menu-open",!i),e.attr("aria-expanded",i?"false":"true");var o=n.find("[data-profile-menu]").first();if(o.length){var r=A();!i&&r?o.attr("aria-hidden","false"):r?o.attr("aria-hidden","true"):o.attr("aria-hidden","false")}var l=n.find("[data-profile-menu-overlay]").first();l.length&&(!i&&A()?l.attr("aria-hidden","false"):l.attr("aria-hidden","true"))}}),a(document).on("click","[data-profile-menu-close]",function(t){t.preventDefault(),N(a(this).closest("[data-profile]"))}),a(document).on("click","[data-profile-menu-overlay]",function(t){t.preventDefault(),N(a(this).closest("[data-profile]"))}),a(document).on("click","[data-profile-menu-link]",function(){N(a(this).closest("[data-profile]"))}),a(document).on("keydown",function(t){if(t.key&&"escape"===t.key.toLowerCase()||27===t.keyCode){var e=a("[data-guest-menu].is-open").first();if(e.length)return void D(e);var n=a("[data-profile].is-menu-open").first();n.length&&N(n)}}),a(function(){if(a("[data-profile-menu-overlay]").attr("aria-hidden","true"),a("[data-profile]").each(function(){var t=a(this),e=t.find("[data-profile-menu]").first();e.length&&(t.find("[data-profile-menu-toggle]").length>0?e.attr("aria-hidden",A()?"true":"false"):e.attr("aria-hidden","false"));var n=t.find("[data-profile-category-toggle].is-active").first().attr("data-profile-category-toggle")||"";if(!n&&t.find("[data-profile-category-toggle]").length&&(n=t.find("[data-profile-category-toggle]").first().attr("data-profile-category-toggle")||""),n){var i=t.find('[data-profile-category-panel="'+n+'"] [data-profile-tab-toggle].is-active').first();J(t,n,i.attr("data-profile-tab-toggle")||"")}}),window.matchMedia){var t=window.matchMedia("(max-width: 768px)"),e=function(e){var n=e;n&&"boolean"==typeof n.matches||(n=t);var i=!(!n||"boolean"!=typeof n.matches||!n.matches);a("[data-profile]").each(function(){var t=a(this),e=t.find("[data-profile-menu]").first(),n=t.find("[data-profile-menu-toggle]").length>0;if(e.length)if(n){var o=i&&!t.hasClass("is-menu-open");e.attr("aria-hidden",o?"true":"false")}else e.attr("aria-hidden","false");var r=t.find("[data-profile-menu-overlay]").first();if(r.length)if(n){var l=!t.hasClass("is-menu-open")||!i;r.attr("aria-hidden",l?"true":"false")}else r.attr("aria-hidden","true")})};"function"==typeof t.addEventListener?t.addEventListener("change",e):"function"==typeof t.addListener&&t.addListener(e),e(t)}}),a(document).on("click",".juntaplay-profile__edit",function(t){t.preventDefault();var e=a(this),n=e.closest(".juntaplay-profile__row"),i=e.closest(".juntaplay-profile"),o=n.hasClass("is-editing");if(o||(i.find(".juntaplay-profile__row").removeClass("is-editing"),i.find(".juntaplay-profile__form").attr("aria-hidden","true"),i.find(".juntaplay-profile__edit").attr("aria-expanded","false")),n.toggleClass("is-editing",!o),n.find(".juntaplay-profile__form").attr("aria-hidden",o?"true":"false"),e.attr("aria-expanded",o?"false":"true"),!o){var r=n.find(".juntaplay-form__input").first();r.length&&setTimeout(function(){r.trigger("focus")},20)}}),a(document).on("click",".juntaplay-profile__cancel",function(t){t.preventDefault();var e=a(this).closest(".juntaplay-profile__row");e.removeClass("is-editing"),e.find(".juntaplay-profile__form").attr("aria-hidden","true"),e.find(".juntaplay-profile__edit").attr("aria-expanded","false")});var T={};function L(a){return(a||"").toString().replace(/\D+/g,"").slice(0,8)}function E(a){var t=L(a);return 8===t.length?t.replace(/(\d{5})(\d{3})/,"$1-$2"):a||""}function M(a){a.length&&a[0].setCustomValidity&&a[0].setCustomValidity(""),a.removeAttr("data-jp-cep-error")}function R(a,t){a.length&&a[0].setCustomValidity&&(a[0].setCustomValidity(t),"function"==typeof a[0].reportValidity&&a[0].reportValidity()),a.attr("data-jp-cep-error","1")}function q(t,e){var n=t.closest("form");if(n.length){var i=[];e.logradouro&&i.push(e.logradouro),e.complemento&&i.push(e.complemento),e.bairro&&i.push(e.bairro);var o=i.join(" - ");o&&n.find('[data-jp-cep-target="address"]').each(function(){a(this).val(o).trigger("change")}),e.localidade&&n.find('[data-jp-cep-target="city"]').val(e.localidade).trigger("change"),e.uf&&n.find('[data-jp-cep-target="state"]').val(e.uf.toUpperCase()).trigger("change");var r=n.find('[data-jp-cep-target="country"]').first();if(r.length){var l=(r.val()||"").toString();l&&!/^(br|brasil|brazil)$/i.test(l)||r.val("Brasil").trigger("change")}e.cep&&t.val(E(e.cep)).trigger("change")}}function O(a,t){var e=a.data("defaultLabel"),n=a.data("openLabel");e||(e=a.text(),a.data("defaultLabel",e)),n||(n=e),t?a.addClass("is-active").text(n):a.removeClass("is-active").text(e)}function F(a,t){var n=(t||"spotlight").toString(),i=["juntaplay-group-card"];"spotlight"===n?i.push("juntaplay-group-card--spotlight"):"compact"===n&&i.push("juntaplay-group-card--compact");var l,d,p=parseInt(a.id,10)||0,u=a.coverUrl||s||"",c=r(a.coverAlt||a.title||a.service||e("Capa do grupo","juntaplay")),f=a.title||a.service||e("Grupo disponível","juntaplay"),g=(l="compact"===n?28:32,(d=String(f||"")).length<=l?d:d.slice(0,Math.max(0,l-1))+"…"),h=f?' title="'+r(f)+'"':"",m='<h3 class="juntaplay-group-card__title"'+h+">"+r(g)+"</h3>",v="number"==typeof a.memberPrice?a.memberPrice:"number"==typeof a.price?a.price:null,y=null!==v?o(v,"BRL","pt-BR"):a.memberPriceLabel||a.priceLabel||"",j=y?'<span class="juntaplay-group-card__price">'+r(y)+"</span>":"",_=(a.slotsBadgeVariant||"").toString(),w="juntaplay-group-card__slots-badge";if(_&&"default"!==_){var b=_.replace(/[^a-z0-9_-]/gi,"");b&&(w+=" is-"+b)}var x=a.slotsBadge?'<span class="'+w+'">'+r(a.slotsBadge)+"</span>":"",C=(a.availabilityState||"").toString(),S=a.buttonLabel||e("full"===C?"Aguardando membros":"Confira","juntaplay"),k=a.permalink?r(a.permalink):"#",P=" data-jp-group-open",I=" data-group-card";p&&(P+=' data-group-id="'+p+'"',I+=' data-group-id="'+p+'"');var D=a.ctaUrl||a.permalink||a.poolLink||"",A=!!a.ctaDisabled;if(D||(D=k),"compact"===n){var N=a.categoryLabel||"",J=N?'<span class="juntaplay-group-card__category">'+r(N)+"</span>":"",T=a.service||"",L="";T&&T!==N&&(L='<span class="juntaplay-group-card__service">'+r(T)+"</span>");var E=[];x&&E.push(x),j&&E.push(j);var M=E.length?'<div class="juntaplay-group-card__meta">'+E.join("")+"</div>":"",R='<span class="juntaplay-group-card__cta-text">'+r(S||e("Ver detalhes","juntaplay"))+'<span class="juntaplay-group-card__cta-icon" aria-hidden="true"><svg viewBox="0 0 24 24" focusable="false" aria-hidden="true"><path d="M5 12h14M13 6l6 6-6 6" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg></span></span>';return'<article class="'+i.join(" ")+'"'+I+'><a class="juntaplay-group-card__link" href="'+k+'"'+P+'><figure class="juntaplay-group-card__cover"><img src="'+r(u)+'" alt="'+c+'" loading="lazy" width="320" height="220" /></figure><div class="juntaplay-group-card__body">'+J+m+L+M+R+"</div></a></article>"}var q="juntaplay-group-card__cta";"full"===C&&(q+=" is-disabled"),A&&-1===q.indexOf("is-disabled")&&(q+=" is-disabled");M="";(x||j)&&(M='<div class="juntaplay-group-card__meta">'+x+j+"</div>");var O=' class="'+q+'"';return O+=A?' aria-disabled="true"':P,'<article class="'+i.join(" ")+'"'+I+'><figure class="juntaplay-group-card__cover"><a class="juntaplay-group-card__media" href="'+k+'"'+P+'><img src="'+r(u)+'" alt="'+c+'" loading="lazy" width="495" height="370" /></a></figure><div class="juntaplay-group-card__body"><div class="juntaplay-group-card__heading"><h3 class="juntaplay-group-card__title"'+h+'><a href="'+k+'"'+P+">"+r(g)+"</a></h3></div>"+M+"<a"+O+' href="'+r(D)+'">'+r(S)+"</a></div></article>"}function B(t){if(t.length&&!t.data("jpCoverPickerReady")){var n;t.data("jpCoverPickerReady",!0),t.attr("data-group-cover-ready","1");var i=(t.data("placeholder")||"").toString(),o=parseInt(t.data("mediaAuthor"),10)||0;!o&&window.JuntaPlay&&window.JuntaPlay.currentUser&&window.JuntaPlay.currentUser.id&&(o=parseInt(window.JuntaPlay.currentUser.id,10)||0);var r=(t.data("uploadContext")||"").toString();r||(r="profile-group-cover");var l=null,d=null,p=t.find("[data-group-cover-input]"),u=t.find("[data-group-cover-preview]"),c=t.find("[data-group-cover-remove]");t.on("click","[data-group-cover-select]",function(a){a.preventDefault();var t=v();t?(g(t),t.open()):window.alert(e("Não foi possível carregar a biblioteca de mídia agora.","juntaplay"))}),t.on("click","[data-group-cover-remove]",function(a){a.preventDefault(),y("","")})}function f(a){if(a&&o&&"function"==typeof a.state){var t=a.state();if(t&&"function"==typeof t.get){var e=t.get("library");e&&e.props&&"function"==typeof e.props.set&&(e.props.set("author",o),e.props.set("author__in",[o]),"function"==typeof e.props.unset&&e.props.unset("author__not_in"),e.props.set("uploadedTo",null),e.props.set("juntaplay_group_cover",r))}}}function g(t){if(t&&t.uploader){var e=t.uploader;if("undefined"!=typeof wp&&wp.Uploader&&wp.Uploader.defaults&&(null===l&&(l=a.extend({},wp.Uploader.defaults.multipart_params||{})),wp.Uploader.defaults.multipart_params=a.extend({},wp.Uploader.defaults.multipart_params||{},{juntaplay_group_cover:r}),o&&(wp.Uploader.defaults.multipart_params.author=o)),"undefined"!=typeof wp&&wp.media&&wp.media.model&&wp.media.model.settings){var n=wp.media.model.settings.post||{};null===d&&(d=a.extend({},n)),wp.media.model.settings.post=a.extend({},n,{juntaplay_group_cover:r}),o&&(wp.media.model.settings.post.author=o)}if(e.options&&e.options.uploader&&(e.options.uploader.params=e.options.uploader.params||{},e.options.uploader.params.juntaplay_group_cover=r,o&&(e.options.uploader.params.author=o)),e.uploader&&"function"==typeof e.uploader.param&&(e.uploader.param("juntaplay_group_cover",r),o&&e.uploader.param("author",o)),"function"==typeof t.state){var i=t.state();if(i&&"function"==typeof i.get){var s=i.get("library");s&&s.props&&"function"==typeof s.props.set&&(s.props.set("juntaplay_group_cover",r),o&&(s.props.set("author",o),s.props.set("author__in",[o]),"function"==typeof s.props.unset&&s.props.unset("author__not_in")))}}}}function h(a){if(a&&a.toolbar&&"function"==typeof a.toolbar.get){var t=a.toolbar.get("select");t&&(t.model&&"function"==typeof t.model.set&&t.model.set("disabled",!1),t.$el&&t.$el.find(".media-button-select").prop("disabled",!1))}}function m(a,t){if(a){var e="function"==typeof a.state?a.state():null;if(e&&"function"==typeof e.get){var n=e.get("library"),i=e.get("selection"),o=a.content&&"function"==typeof a.content.get?a.content.get():null,l=o&&o.collection?o.collection:null,d=null,s=null;t&&("function"==typeof t.get?(d=t,s=t.get("id")||t.id||null):"object"==typeof t&&null!==t?s=void 0!==t.id?t.id:null:"number"!=typeof t&&"string"!=typeof t||(s=t)),p(n),l&&l!==n&&p(l),d||null===s||(n&&"function"==typeof n.get&&(d=n.get(s)||d),d&&d.get&&d.get("id")||!l||"function"!=typeof l.get||(d=l.get(s)||d)),d||(n&&"function"==typeof n.last&&(d=n.last()),d&&d.get&&d.get("id")||!l||"function"!=typeof l.last||(d=l.last()),!d&&n&&"function"==typeof n.at&&(d=n.at(0)),!d&&l&&"function"==typeof l.at&&(d=l.at(0))),d&&i&&"function"==typeof i.reset&&i.reset([d]),h(a)}}function p(a){a&&(a.props&&"function"==typeof a.props.set&&(a.props.set("ignore",Date.now()),r&&a.props.set("juntaplay_group_cover",r)),"function"==typeof a.fetch?a.fetch():"function"==typeof a.more?a.more({reset:!0}):"function"==typeof a._requery&&a._requery(!0))}}function v(){if("undefined"==typeof wp||!wp.media||"function"!=typeof wp.media)return null;if(n&&"function"==typeof n.open)return n;var a,t={title:e("Escolher capa do grupo","juntaplay"),button:{text:e("Usar esta imagem","juntaplay")},multiple:!1,library:{type:"image"},uploader:{params:{juntaplay_group_cover:r}}};o&&(t.library.author=o,t.uploader.params.author=o),n=wp.media(t),(a=n)&&"undefined"!=typeof wp&&wp.media&&wp.media.events&&(a.jpUploaderCompleteHandler&&"function"==typeof wp.media.events.off&&wp.media.events.off("uploader:complete",a.jpUploaderCompleteHandler),a.jpUploaderCompleteHandler=function(){for(var t=Array.prototype.slice.call(arguments||[]),e=null,n=0;n<t.length;n+=1){var i=t[n];if(i){if("function"==typeof i.get){e=i;break}if("object"==typeof i&&void 0!==i.id){e=i;break}}}m(a,e)},"function"==typeof wp.media.events.on&&wp.media.events.on("uploader:complete",a.jpUploaderCompleteHandler));var p=function(){g(n),o&&f(n)};return n.on("ready",p),n.on("open",p),o&&(n.on("library:rendered",function(){f(n)}),n.on("content:render:browse",function(){f(n)})),n.on("content:render:upload",function(){g(n)}),n.on("upload:complete",function(a){window.setTimeout(function(){if(n&&"function"==typeof n.state){var t=n.state();if(t&&"function"==typeof t.get){var e=t.get("selection"),o=t.get("library");!function(a,t){if("function"==typeof t){var e=null,n=null;if(a&&"function"==typeof a.get?(e=a.get("id")||a.id||null,n=a):a&&"object"==typeof a&&null!==a&&(e=void 0!==a.id?a.id:null),null!==e&&"undefined"!=typeof wp&&wp.media&&wp.media.model&&wp.media.model.Attachment&&"function"==typeof wp.media.model.Attachment.get&&(n=wp.media.model.Attachment.get(e)),n&&"function"==typeof n.once&&(!n.get||!n.get("url")))return n.once("sync",function(){t(n,e)}),void("function"==typeof n.fetch&&n.fetch());t(n||null,e)}}(a,function(a,t){if(!a&&null!==t&&o&&"function"==typeof o.get&&(a=o.get(t)||a),a&&o&&"function"==typeof o.add){var r=!1;"function"==typeof o.get&&(r=!!(o.get(a)||null!==t&&o.get(t))),r||o.add(a)}if(e&&a&&"function"==typeof e.reset&&e.reset([a]),a&&"function"==typeof a.toJSON){var l=a.toJSON();if(l&&void 0!==l.id){var d=l.url||l.sizes&&l.sizes.full&&l.sizes.full.url||i||s||"";y(l.id,d)}}m(n,a||t)})}}},120)}),n.on("upload:success",function(){h(n)}),n.on("close",function(){"undefined"!=typeof wp&&wp.Uploader&&wp.Uploader.defaults&&l&&(wp.Uploader.defaults.multipart_params=l),l=null,"undefined"!=typeof wp&&wp.media&&wp.media.model&&wp.media.model.settings&&null!==d&&(wp.media.model.settings.post=d),d=null,"undefined"!=typeof wp&&wp.media&&wp.media.events&&"function"==typeof wp.media.events.off&&n.jpUploaderCompleteHandler&&wp.media.events.off("uploader:complete",n.jpUploaderCompleteHandler)}),n.on("select",function(){var a=n.state().get("selection").first();a&&y((a=a.toJSON()).id||"",a.url||i||s||"")}),p(),n}function y(a,t){var e=a?a.toString():"",n=t||i||s;if(p.val(e),u.length){u.css("background-image",n?"url("+n+")":"none");var o=u.find("img");o.length&&o.attr("src",n||s||"")}c.length&&c.prop("disabled",!e)}}function G(t){if(!t)return null;var e=document.querySelector(t);if(!e)return null;if("template"===(e.tagName?e.tagName.toLowerCase():"")){var n=e.content?e.content.cloneNode(!0):null;if(!n)return null;var i=document.createElement("div");return i.appendChild(n),a(i).children()}return a(e).clone(!0)}function U(t,e){if(t.length&&e&&e.length){var n=t.find("[data-modal-content]");n.empty().append(e),t.removeAttr("hidden").addClass("is-open").attr("aria-hidden","false"),a("body").addClass("juntaplay-modal-open"),setTimeout(function(){var a=n.find("input, select, textarea, button, a[href]").filter(":visible").first();a.length&&a.trigger("focus")},30)}}function Q(t){t.length&&(t.removeClass("is-open").attr("aria-hidden","true").attr("hidden","hidden"),t.find("[data-modal-content]").empty(),a(".juntaplay-modal.is-open").length||a("body").removeClass("juntaplay-modal-open"))}function z(){var t="#jp-group-create-template",e=a(t);if(e.length){var n=a("[data-group-create-modal]");if(n.length){var i=e.data("loadingText");"string"==typeof i&&i.length||(i="Carregando formulário...");var o=a('<div class="juntaplay-modal__loading" role="status" aria-live="polite"></div>');o.append('<span class="juntaplay-spinner" aria-hidden="true"></span>'),o.append(a("<p></p>").text(i)),U(n,o);var r=n.find("[data-modal-content]");window.requestAnimationFrame(function(){var a=G(t);a&&a.length&&(r.empty().append(a),B(n.find("[data-group-cover]")),e.attr("data-auto-open","0"),setTimeout(function(){var a=n.find("input, select, textarea").filter(":visible").first();a.length&&a.trigger("focus")},40))})}}}a(document).on("input",'[data-jp-cep-field="postcode"]',function(){M(a(this))}),a(document).on("blur",'[data-jp-cep-field="postcode"]',function(){var t=a(this),n=L(t.val());8===n.length&&function(a,t){if(t&&8===t.length){if(T[t])return M(a),void q(a,T[t]);a.data("jpCepLoading")!==t&&(a.data("jpCepLoading",t),a.attr("aria-busy","true"),fetch("https://viacep.com.br/ws/"+t+"/json/").then(function(a){if(!a.ok)throw new Error("network");return a.json()}).then(function(n){a.removeAttr("aria-busy"),a.removeData("jpCepLoading"),n&&!n.erro?(T[t]=n,M(a),q(a,n)):R(a,e("CEP não encontrado. Confira os números digitados.","juntaplay"))}).catch(function(){a.removeAttr("aria-busy"),a.removeData("jpCepLoading"),R(a,e("Não foi possível validar o CEP informado.","juntaplay"))}))}}(t,n),t.val(E(n)).trigger("change")}),a(document).on("click","[data-network-detail]",function(t){t.preventDefault();var e=a(this),n=e.closest(".juntaplay-network-card");if(n.length){var i=n.hasClass("is-expanded"),o=n.find("[data-network-groups]").first();n.toggleClass("is-expanded",!i),o.length&&(i?o.attr("hidden","hidden"):o.removeAttr("hidden"));var r=e.data("defaultLabel")||e.attr("data-default-label")||e.text(),l=e.data("openLabel")||e.attr("data-open-label")||r;e.text(i?r:l)}}),a(document).on("click","[data-group-complaint-toggle]",function(t){t.preventDefault();var e=a(this),n=e.attr("data-target")||"",i=n?a("#"+n):e.closest("[data-group-complaint]").find("[data-group-complaint-form]");if(i.length){var o=i.hasClass("is-hidden");i.toggleClass("is-hidden",!o).toggleClass("is-open",o),e.attr("aria-expanded",o?"true":"false"),O(e,o)}}),a(document).on("click","[data-group-complaint-close]",function(t){t.preventDefault();var e=a(this).closest("[data-group-complaint-form]");if(e.length){e.removeClass("is-open").addClass("is-hidden");var n=e.attr("id");if(n){var i=a('[data-group-complaint-toggle][data-target="'+n+'"]');i.length&&(i.attr("aria-expanded","false"),O(i,!1))}}}),a(document).on("change","[data-group-complaint-files]",function(){var t=a(this),e=this.files,n=t.closest("[data-group-complaint]").find("[data-group-complaint-preview]");n.length&&(n.empty(),e&&e.length&&Array.prototype.forEach.call(e,function(t){var e=t.size||0,i=t.name;e>0&&(i+=" ("+function(a){if(!a||a<=0)return"";var t=["B","KB","MB","GB"],e=0,n=a;for(;n>=1024&&e<t.length-1;)n/=1024,e+=1;return n.toFixed(0===e?0:1)+" "+t[e]}(e)+")"),a("<li />").text(i).appendTo(n)}))}),function(){var t=a("[data-complaint-center]");function e(){return window.matchMedia("(min-width: 1024px)").matches}function n(){t.each(function(){var t=a(this),n="true"===(t.attr("data-complaint-open")||"").toString().toLowerCase();e()?t.addClass("is-detail-open"):t.toggleClass("is-detail-open",n)})}t.length&&(n(),a(window).on("resize.juntaplayComplaints",function(){n()}),a(document).on("click","[data-complaint-drawer-toggle]",function(t){t.preventDefault();var n=a(this).closest("[data-complaint-center]");if(n.length){var i=(n.attr("data-complaint-open")||"").toString().toLowerCase();!function(a,t){a&&a.length&&(a.attr("data-complaint-open",t?"true":"false"),e()?a.addClass("is-detail-open"):a.toggleClass("is-detail-open",!!t))}(n,!("true"===i))}}),a(document).on("click","[data-complaint-submit]",function(){var t=(a(this).attr("data-complaint-submit")||"").toString();if(t){var e=a(this).closest("form");if(e.length){var n=e.find("[data-complaint-action]");n.length&&n.val(t)}}}))}(),a(function(){a(".juntaplay-profile__row").each(function(){var t=a(this),e=t.hasClass("is-editing");t.find(".juntaplay-profile__form").attr("aria-hidden",e?"false":"true"),t.find(".juntaplay-profile__edit").attr("aria-expanded",e?"true":"false")}),a("[data-jp-wallet]").each(function(){!function(t){if(!t.length||void 0===window.JuntaPlay)return;var i=!1,o=t.find("[data-jp-credit-details]"),l=o.find("[data-jp-credit-details-body]"),d=o.find("[data-jp-credit-details-title]"),s=t.find("[data-jp-credit-load-more]"),p=t.find("[data-jp-credit-countdown]"),u=t.find("[data-jp-credit-deposit]"),c=u.find("[data-jp-credit-deposit-form]"),f=c.find('[name="jp_profile_deposit_amount"]'),g=c.find("[data-jp-credit-deposit-error]"),h=1===parseInt(t.data("deposit-enabled"),10),m=parseFloat(t.data("deposit-min"))||0,v=parseFloat(t.data("deposit-max"))||0,y=!1,j=t.find("[data-jp-credit-items]"),_=t.find("[data-jp-credit-empty]"),w=t.find("[data-jp-credit-filter]"),b=t.find("[data-jp-credit-range]"),x=t.find("[data-jp-credit-search]"),C=t.find("[data-jp-credit-refresh]"),S=_.length?_.data("default-message")||_.text():"",k=e("Nenhuma movimentação corresponde aos filtros selecionados.","juntaplay"),P="all",I=w.filter(".is-active").first();if(I.length){var D=I.data("jp-credit-filter");null!=D&&""!==D&&(P=D.toString())}function A(e,n){var i=a("<div/>").addClass("juntaplay-wallet__alert juntaplay-wallet__alert--"+e).text(n||"");t.find(".juntaplay-wallet__withdraw .juntaplay-wallet__alert").remove(),t.find(".juntaplay-wallet__withdraw").prepend(i)}function N(a){var t=a.id||0,n=a.type||"",i=a.status||"",o=a.type_label||"",l=a.status_label||"",d=a.amount_formatted||a.amount||"",s=a.time||"",p=a.reference||"",u=parseInt(a.timestamp,10);isFinite(u)||(u=0);var c=a.search||"";if(!c){var f=[o,l,p,s].filter(Boolean).join(" ");c=f?f.toLowerCase():""}var g="";return p&&(g=e("Referência: %s","juntaplay").replace("%s",p)),['<li class="juntaplay-wallet__item" data-transaction="'+r(t)+'" data-type="'+r(n)+'" data-status="'+r(i)+'" data-time="'+r(u)+'" data-search="'+r(c.toString().toLowerCase())+'">','  <div class="juntaplay-wallet__item-main">','    <strong class="juntaplay-wallet__item-title">'+r(o)+"</strong>",s?'    <span class="juntaplay-wallet__item-meta">'+r(s)+"</span>":"",g?'    <span class="juntaplay-wallet__item-meta juntaplay-wallet__item-ref">'+r(g)+"</span>":"","  </div>",'  <div class="juntaplay-wallet__item-side">',l?'    <span class="juntaplay-wallet__item-status">'+r(l)+"</span>":"",d?'    <span class="juntaplay-wallet__item-amount">'+r(d)+"</span>":"","  </div>","</li>"].filter(Boolean).join("")}function J(a){var e=t.find("[data-jp-credit-total]");if(e.length){var i=parseInt(a,10);isFinite(i)||(i=0);var o=n("%d movimento","%d movimentos",i,"juntaplay");o=o.replace("%d",i).replace("%s",i),e.text(o)}}function T(){if(s.length){var a=parseInt(t.attr("data-page"),10)||1,e=parseInt(t.attr("data-pages"),10)||1;e<=1||a>=e?s.attr("hidden","hidden"):s.removeAttr("hidden")}}function L(){if(!b.length)return 0;var a=parseInt(b.val(),10);return!isFinite(a)||a<=0?0:Math.floor(Date.now()/1e3)-86400*a}function E(t){if(j.length){var e=x.length?(x.val()||"").toString().toLowerCase():"",n=L(),i=0,o=!1;if(j.children(".juntaplay-wallet__item").each(function(){var t=a(this);o=!0;var r=(t.data("type")||"").toString(),l=(t.data("search")||"").toString(),d=parseInt(t.data("time"),10)||0,s="all"===P||r===P,p=!e||-1!==l.indexOf(e);s&&p&&(!n||d>=n)?(t.removeAttr("hidden"),i++):t.attr("hidden","hidden")}),_.length){var r=S;o&&0===i&&(r=k),!o&&t&&(r=S),_.text(r),!o&&t||0===i?_.removeAttr("hidden"):_.attr("hidden","hidden")}T()}else T()}function M(e,n){if(window.JuntaPlay&&window.JuntaPlay.ajax&&!i){i=!0,t.addClass("is-loading");var o={action:"juntaplay_credit_transactions",nonce:window.JuntaPlay.nonce,page:e};P&&"all"!==P&&(o.type=P),a.getJSON(window.JuntaPlay.ajax,o).done(function(a){if(a&&a.success&&a.data){var i=a.data,o=(Array.isArray(i.items)?i.items:[]).map(N).join("");n?o&&j.append(o):j.html(o),void 0!==i.page?t.attr("data-page",i.page):n||t.attr("data-page",e),void 0!==i.pages&&t.attr("data-pages",i.pages),void 0!==i.total&&(t.attr("data-total",i.total),J(i.total)),E(!n)}}).always(function(){i=!1,t.removeClass("is-loading"),T()})}}function R(a){if(a&&o.length){var t=["<dl>"];t.push("<dt>"+(a.type_label||"")+"</dt>"),t.push("<dd>"+(a.amount_formatted||"")+"</dd>"),a.status_label&&(t.push("<dt>"+e("Status","juntaplay")+"</dt>"),t.push("<dd>"+a.status_label+"</dd>")),a.reference&&(t.push("<dt>"+e("Referência","juntaplay")+"</dt>"),t.push("<dd>"+a.reference+"</dd>")),a.time&&(t.push("<dt>"+e("Data","juntaplay")+"</dt>"),t.push("<dd>"+a.time+"</dd>")),a.balance_after&&(t.push("<dt>"+e("Saldo após","juntaplay")+"</dt>"),t.push("<dd>"+a.balance_after+"</dd>")),a.context&&Object.keys(a.context).forEach(function(e){a.context[e]&&(t.push("<dt>"+e+"</dt>"),t.push("<dd>"+a.context[e]+"</dd>"))}),t.push("</dl>"),d.text(a.type_label||e("Detalhes","juntaplay")),l.html(t.join("")),o.removeAttr("hidden")}}function q(){o.attr("hidden","hidden")}function O(){u.length&&(u.removeAttr("hidden").addClass("is-open"),f.length&&f.trigger("focus"))}function F(){u.length&&(u.attr("hidden","hidden").removeClass("is-open"),g.attr("hidden","hidden").text(""),y=!1)}function B(a){g.length?g.text(a||"").removeAttr("hidden"):window.alert(a)}t.on("click","[data-jp-credit-details-close]",function(){q()}),t.on("click",".juntaplay-wallet__item",function(){if(!i){var t=a(this).data("transaction");t&&(i=!0,a.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_credit_transaction",nonce:window.JuntaPlay.nonce,id:t}).done(function(a){a&&a.success&&a.data&&a.data.transaction&&R(a.data.transaction)}).fail(function(){window.alert(e("Não foi possível carregar os detalhes agora.","juntaplay"))}).always(function(){i=!1}))}}),t.on("click","[data-jp-credit-load-more]",function(){if(!i){var a=parseInt(t.attr("data-page"),10)||1;a>=(parseInt(t.attr("data-pages"),10)||1)?T():M(a+1,!0)}}),w.length&&w.on("click",function(e){e.preventDefault();var n=a(this).data("jp-credit-filter"),i="all";null!=n&&""!==n&&(i=n.toString()),i!==P&&(P=i,w.removeClass("is-active"),a(this).addClass("is-active"),t.attr("data-page",1),E(!1),M(1,!1))});b.length&&b.on("change",function(){E(!1)});x.length&&x.on("input",function(){E(!1)});C.length&&C.on("click",function(a){a.preventDefault(),M(1,!1)});t.on("submit",".juntaplay-wallet__form",function(t){var n=a(this);if(!window.JuntaPlay||!window.JuntaPlay.ajax)return!0;if(t.preventDefault(),i)return!1;i=!0;var o={action:"juntaplay_credit_withdraw",nonce:window.JuntaPlay.nonce,amount:n.find('[name="jp_profile_withdraw_amount"]').val(),method:n.find('[name="jp_profile_withdraw_method"]').val(),code:n.find('[name="jp_profile_withdraw_code"]').val()};return a.post(window.JuntaPlay.ajax,o,null,"json").done(function(a){if(a)return a.success?(A("success",a.data&&a.data.message?a.data.message:e("Solicitação registrada com sucesso.","juntaplay")),void window.setTimeout(function(){window.location.reload()},1500)):void(a.data&&a.data.message&&A("warning",a.data.message))}).fail(function(){A("warning",e("Não foi possível registrar a solicitação agora.","juntaplay"))}).always(function(){i=!1}),!1}),t.on("click","[data-jp-credit-send-code]",function(){if(!i){i=!0;var n=a(this);n.prop("disabled",!0),a.post(window.JuntaPlay.ajax,{action:"juntaplay_credit_send_code",nonce:window.JuntaPlay.nonce},null,"json").done(function(a){if(a&&a.success){var e=a.data||{};p.length&&e.message&&p.text(e.message),t.find("[data-jp-credit-destination]").length&&e.destination&&t.find("[data-jp-credit-destination]").text(e.destination)}else a&&a.data&&a.data.message&&window.alert(a.data.message)}).fail(function(){window.alert(e("Não foi possível enviar o código agora.","juntaplay"))}).always(function(){i=!1,n.prop("disabled",!1)})}}),t.on("click","[data-jp-credit-details]",function(t){a(t.target).is("[data-jp-credit-details]")&&q()}),t.on("click","[data-jp-credit-topup]",function(a){a.preventDefault(),h?O():window.alert(e("Recarga indisponível no momento.","juntaplay"))}),t.on("click","[data-jp-credit-deposit-close]",function(a){a.preventDefault(),F()}),t.on("click","[data-jp-credit-suggestion]",function(t){if(t.preventDefault(),f.length){var e=parseFloat(a(this).data("jp-credit-suggestion"))||0;e>0&&f.val(e.toFixed(2)).trigger("change")}}),t.on("submit","[data-jp-credit-deposit-form]",function(t){if(t.preventDefault(),!window.JuntaPlay||!window.JuntaPlay.ajax)return!1;if(y)return!1;var n=0;if(f.length&&(n=parseFloat((f.val()||"").toString().replace(",","."))||0),n<=0||m>0&&n<m)return B(e("Informe um valor de recarga acima do mínimo permitido.","juntaplay")),!1;if(v>0&&n>v)return B(e("O valor informado excede o limite máximo permitido.","juntaplay")),!1;y=!0,g.attr("hidden","hidden").text("");var i={action:"juntaplay_credit_deposit",nonce:window.JuntaPlay.nonce,amount:n};return a.post(window.JuntaPlay.ajax,i,null,"json").done(function(a){a&&(a.success&&a.data&&a.data.redirect?window.location.href=a.data.redirect:a.success?window.location.reload():a.data&&a.data.message?B(a.data.message):B(e("Não foi possível iniciar a recarga agora.","juntaplay")))}).fail(function(){B(e("Não foi possível iniciar a recarga agora.","juntaplay"))}).always(function(){y=!1}),!1}),E(!0),T()}(a(this))}),function(){if(void 0===window.JuntaPlay)return;var t=a("[data-jp-notifications]");if(!t.length)return;function n(t){a("[data-jp-notifications]").each(function(){var e=a(this);t>0?e.attr("data-count",t):e.removeAttr("data-count")})}t.each(function(){var t=a(this);if(!t.data("jpNotificationsInit")){t.data("jpNotificationsInit",!0);var i=t.siblings("[data-jp-notifications-panel]").first();if(!i.length){var o=t.closest("[data-jp-notifications-root]");o.length&&(i=o.find("[data-jp-notifications-panel]").first())}if(i.length){var r=i.find("[data-jp-notifications-list]"),l=!1,d=!1;t.attr("aria-expanded","false"),i.attr("aria-hidden","true"),i.data("jpNotificationsToggle",function(a,t){p(a,t)}),i.data("jpNotificationsBell",t),t.on("click",function(a){a.preventDefault(),p()}),i.on("click","[data-notification-id]",function(){var t=a(this).data("notification-id");if(t){c(t);var n=a(this).closest("li");n.length&&(n.remove(),r.children().length||r.html('<li class="juntaplay-notifications__empty">'+e("Nenhuma notificação por enquanto.","juntaplay")+"</li>"))}}),i.on("click","[data-jp-notifications-close]",function(a){a.preventDefault(),p(!1)}),s(!1)}}function s(a){t.attr("aria-expanded",a?"true":"false"),t.toggleClass("is-active",a),i.attr("aria-hidden",a?"false":"true"),i.toggleClass("is-open",a)}function p(t,e){("boolean"==typeof t?t:!i.hasClass("is-open"))?(e||a("[data-jp-notifications-panel].is-open").not(i).each(function(){var t=a(this),e=t.data("jpNotificationsToggle");if("function"==typeof e)e(!1,!0);else{t.removeClass("is-open").attr("aria-hidden","true");var n=t.data("jpNotificationsBell");n&&n.length&&n.removeClass("is-active").attr("aria-expanded","false")}}),s(!0),l||u()):s(!1)}function u(){d||(d=!0,l||r.html('<li class="juntaplay-notifications__empty">'+e("Carregando notificações...","juntaplay")+"</li>"),a.getJSON(window.JuntaPlay.ajax,{action:"juntaplay_notifications_feed",nonce:window.JuntaPlay.nonce}).done(function(a){if(a&&a.success){if(l=!0,a.data&&a.data.items)if(a.data.items.length){var t=a.data.items.map(function(a){var t=a.title||"",e=a.message||"",n=a.time||"",i=a.action_url||"",o=(a.status||"").toString(),r=o?' data-notification-status="'+o+'"':"",l=' class="juntaplay-notifications__item'+("unread"===o?" is-unread":"")+'" data-notification-id="'+a.id+'"',d='<span class="juntaplay-notifications__item-title">'+t+'</span><span class="juntaplay-notifications__item-message">'+e+'</span><span class="juntaplay-notifications__item-time">'+n+"</span>";return i?"<li"+r+"><a"+l+' href="'+i+'">'+d+"</a></li>":"<li"+r+"><span"+l+">"+d+"</span></li>"}).join("");r.html(t)}else r.html('<li class="juntaplay-notifications__empty">'+e("Nenhuma notificação por enquanto.","juntaplay")+"</li>");if(a.data&&void 0!==a.data.unread)n(parseInt(a.data.unread,10)||0)}}).always(function(){d=!1}))}function c(t){a.post(window.JuntaPlay.ajax,{action:"juntaplay_notifications_mark",nonce:window.JuntaPlay.nonce,ids:[t]},null,"json").done(function(a){a&&a.data&&void 0!==a.data.unread&&n(parseInt(a.data.unread,10)||0);l=!1})}}),a(document).off("click.juntaplayNotifications").on("click.juntaplayNotifications",function(t){a(t.target).closest("[data-jp-notifications]").length||a(t.target).closest("[data-jp-notifications-panel]").length||a("[data-jp-notifications-panel].is-open").each(function(){var t=a(this).data("jpNotificationsToggle");if("function"==typeof t)t(!1,!0);else{a(this).removeClass("is-open").attr("aria-hidden","true");var e=a(this).data("jpNotificationsBell");e&&e.length&&e.removeClass("is-active").attr("aria-expanded","false")}})})}(),a("[data-jp-account]").each(function(){var t=a(this),e=t.find("[data-jp-account-toggle]"),n=t.find("[data-jp-account-menu]");function i(a){e.attr("aria-expanded",a?"true":"false"),e.toggleClass("is-active",a),n.attr("aria-hidden",a?"false":"true"),n.toggleClass("is-open",a)}function o(t,e){("boolean"==typeof t?t:!n.hasClass("is-open"))?(e||a("[data-jp-account-menu].is-open").not(n).each(function(){var t=a(this),e=t.closest("[data-jp-account]").find("[data-jp-account-toggle]");t.removeClass("is-open").attr("aria-hidden","true"),e.removeClass("is-active").attr("aria-expanded","false")}),i(!0)):i(!1)}e.length&&n.length&&!t.data("jpAccountInit")&&(t.data("jpAccountInit",!0),n.data("jpAccountToggle",function(a,t){o(a,t)}),e.on("click",function(a){a.preventDefault(),o()}),n.on("click","a",function(){o(!1)}),i(!1))}),a(document).off("click.juntaplayAccount").on("click.juntaplayAccount",function(t){a(t.target).closest("[data-jp-account]").length||a("[data-jp-account-menu].is-open").each(function(){var t=a(this),e=t.data("jpAccountToggle");"function"==typeof e?e(!1,!0):(t.removeClass("is-open").attr("aria-hidden","true"),t.closest("[data-jp-account]").find("[data-jp-account-toggle]").removeClass("is-active").attr("aria-expanded","false"))})})}),a(document).on("change",'input[name="juntaplay_use_wallet"]',function(){d()}),a(document).on("input change",".juntaplay-group-quantity",function(){d()}),a(document).on("submit",".juntaplay-form[data-confirm]",function(t){var e=a(this).data("confirm");return!(e&&!window.confirm(e))||(t.preventDefault(),!1)});var V=function(){var t=window.JuntaPlay&&window.JuntaPlay.ajax?window.JuntaPlay.ajax:"",n=window.JuntaPlay&&window.JuntaPlay.nonce?window.JuntaPlay.nonce:"";function i(){return jQuery("#juntaplay-group-modal")}function o(){if(t)return t;var a=i();if(a.length){var e=a.attr("data-ajax-endpoint")||a.data("ajaxEndpoint")||a.data("ajax-endpoint");if(e)return t=e.toString()}return void 0!==window.ajaxurl&&window.ajaxurl&&(t=window.ajaxurl.toString()),t}function r(){if(n)return n;var a=i();if(a.length){var t=a.attr("data-ajax-nonce")||a.data("ajaxNonce")||a.data("ajax-nonce");t&&(n=t.toString())}return n}function l(a){var t=i();t.length&&(t.find("[data-modal-messages]").empty(),t.find(".juntaplay-modal__content").html(a),t.removeAttr("hidden").addClass("is-open").attr("aria-hidden","false"),jQuery("body").addClass("juntaplay-modal-open"),v(t),window.requestAnimationFrame(function(){var a=t.find("input, select, textarea, button, a[href]").filter(":visible").first();a.length?a.trigger("focus"):t.trigger("focus")}))}function d(){l('<div class="juntaplay-group-modal__loading" role="status" aria-live="polite"><span class="juntaplay-spinner" aria-hidden="true"></span><p>'+e("Carregando informações do grupo...","juntaplay")+'</p><div class="juntaplay-group-modal__skeleton" aria-hidden="true"><span></span><span></span><span></span><span></span><span></span></div></div>')}function s(a,t){var e=i().find("[data-modal-messages]");if(e.length){var n="warning";"success"===a?n="positive":"error"===a&&(n="warning");var o=jQuery('<div class="juntaplay-alert juntaplay-alert--'+n+'" role="alert"></div>');o.text(t),e.empty().append(o)}}function p(){var a=i();a.length&&(a.removeClass("is-open").attr("aria-hidden","true").attr("hidden","hidden"),a.find(".juntaplay-modal__content").empty(),a.find("[data-modal-messages]").empty(),jQuery(".juntaplay-modal.is-open").not(a).length||jQuery("body").removeClass("juntaplay-modal-open"))}function u(a){return a&&a.data&&a.data.message?a.data.message:e("Não foi possível carregar os dados agora. Tente novamente em instantes.","juntaplay")}function c(a,t){var e=o();if(e&&t){d();var n={action:a,group_id:t},i=r();i&&(n.nonce=i),jQuery.post(e,n).done(function(a){a&&a.success&&a.data&&a.data.html?l(a.data.html):s("error",u(a))}).fail(function(a){s("error",u(a&&a.responseJSON))})}}return{loadDetail:function(a){c("juntaplay_group_detail",a)},loadEdit:function(a){c("juntaplay_group_edit_form",a)},close:p,save:function(t){var n=o();if(n){var i,l=jQuery(t);((i=l)&&i.length?i:a(document)).find("[data-support-channel]").each(function(){g(a(this))});var d=new window.FormData(t);d.append("action","juntaplay_group_edit_save");var c=r();c&&d.append("nonce",c);var f=l.find('button[type="submit"]').first();f.prop("disabled",!0).addClass("is-loading"),jQuery.ajax({url:n,method:"POST",data:d,processData:!1,contentType:!1}).done(function(a){if(a&&a.success){var t=a.data&&a.data.message?a.data.message:e("Grupo atualizado com sucesso.","juntaplay");p(),window.alert(t),window.location.reload()}else s("error",u(a))}).fail(function(a){s("error",u(a&&a.responseJSON))}).always(function(){f.prop("disabled",!1).removeClass("is-loading")})}},render:l,showLoading:d,message:s}}();jQuery(document).on("click",".juntaplay-group-card__toggle",function(a){a.preventDefault(),a.stopPropagation();var t=jQuery(this).closest("[data-group-id]"),e=t.length?parseInt(t.data("group-id"),10):0;e&&V.loadDetail(e)}),jQuery(document).on("click",".juntaplay-group-card__edit",function(a){a.preventDefault(),a.stopPropagation();var t=parseInt(jQuery(this).data("group-id"),10);if(!t){var e=jQuery(this).closest("[data-group-id]");t=e.length?parseInt(e.data("group-id"),10):0}t&&(window.JP&&"function"==typeof window.JP.openGroupEditModal?window.JP.openGroupEditModal(t):V.loadEdit(t))}),jQuery(document).on("submit","#juntaplay-group-edit-form",function(a){a.preventDefault(),window.JP&&"function"==typeof window.JP.submitGroupEditForm?window.JP.submitGroupEditForm(this):V.save(this)}),jQuery(document).on("click",".juntaplay-modal__close, #juntaplay-group-modal [data-group-modal-close]",function(a){a.preventDefault(),V.close()}),jQuery(document).on("click","#juntaplay-group-modal",function(a){a.target===this&&V.close()}),jQuery(document).on("keydown.juntaplayGroupModal",function(a){"Escape"!==a.key&&27!==a.keyCode||jQuery("#juntaplay-group-modal").hasClass("is-open")&&(a.preventDefault(),V.close())});var W=function(){var t=jQuery("#juntaplay-group-modal"),n="",i="";if(t.length){var o=t.attr("data-rest-root")||t.data("restRoot")||"",r=t.attr("data-rest-nonce")||t.data("restNonce")||"";o&&(n=o.toString()),r&&(i=r.toString())}function l(a){var t=a?a.toString():"";return"/"===t.charAt(0)&&(t=t.slice(1)),n?n+t:""}function d(t){var e={Accept:"application/json"};return i&&(e["X-WP-Nonce"]=i),t&&(e=a.extend({},e,t)),e}return!n&&window.wpApiSettings&&window.wpApiSettings.root&&("/"!==(n=window.wpApiSettings.root.toString()).slice(-1)&&(n+="/"),-1===n.indexOf("juntaplay/v1")&&(n+="juntaplay/v1/")),{root:n=function(a){if(!a)return"";var t=a.toString();return"/"!==t.slice(-1)&&(t+="/"),t}(n),nonce:i,endpoint:l,headers:d,fetch:function(t,i){if(!window.fetch||!n)return Promise.reject(new Error("rest_unavailable"));var o=a.extend({credentials:"same-origin"},i||{});return o.headers=d(o.headers||null),window.fetch(l(t),o).then(function(a){var t=function(){return a.json().catch(function(){return{}})};return a.ok?t():t().then(function(a){if(a&&"object"==typeof a&&a.message)throw a;throw{message:e("Não foi possível concluir a solicitação.","juntaplay")}})})}}}();window.JP.rest=W,function(){var a=!1,t=0;function n(a,t){var e=(a||t||"").toString().toLowerCase();return(e=e.replace(/[^a-z0-9_-]+/g,""))||t||"info"}function i(a){if(a&&"object"==typeof a){var t=parseInt(a.id,10)||0;if(t){var i=jQuery('.juntaplay-group-card[data-group-id="'+t+'"]');if(i.length){i.attr("data-group-status",a.status||""),a.membership_role&&i.attr("data-group-role",a.membership_role);var o=a.cover_url||"";!o&&a.cover_placeholder&&(o=s||"");var l=i.find(".juntaplay-group-card__cover");if(l.length){l.toggleClass("is-placeholder",!!a.cover_placeholder);var d=l.find("img");d.length&&(o&&d.attr("src",o),a.cover_alt&&d.attr("alt",a.cover_alt))}var p=a.title||a.service_name||e("Grupo sem nome","juntaplay");i.find(".juntaplay-group-card__title").text(p).attr("title",p);var u=i.find(".juntaplay-group-card__role-badge");if(u.length)if(a.role_label){var c="juntaplay-badge--"+n(a.role_tone,"info");u.text(a.role_label).removeClass(function(a,t){return(t||"").split(" ").filter(function(a){return 0===a.indexOf("juntaplay-badge--")}).join(" ")}).addClass(c)}else u.remove();var f=i.find(".juntaplay-group-card__chips");if(f.length){var g="";a.availability_label&&(g+='<span class="juntaplay-badge juntaplay-badge--'+n(a.availability_tone,"info")+'">'+r(a.availability_label)+"</span>"),a.status_label&&(g+='<span class="juntaplay-badge juntaplay-badge--'+n(a.status_tone,"info")+'">'+r(a.status_label)+"</span>"),f.html(g)}var h=i.find(".juntaplay-group-card__quick-value");h.length&&h.text(a.slots_total_label||"");var m=i.find(".juntaplay-group-card__quick-hint");if(m.length){var v=a.slots_available_label||a.slots_total_hint||"";v?m.text(v).removeClass("is-hidden"):m.text("").addClass("is-hidden")}var y=i.find(".juntaplay-group-card__cta");if(y.length)if(a.cta_label||a.price_highlight){var j="";if(a.price_highlight&&(j+='<span class="juntaplay-group-card__cta-price">'+r(a.price_highlight)+"</span>"),a.cta_label){var _=["juntaplay-button"];_.push("primary"===a.cta_variant?"juntaplay-button--primary":"juntaplay-button--ghost"),a.cta_disabled&&_.push("is-disabled");var w=_.join(" ");!a.cta_disabled&&a.cta_url?j+='<a class="'+w+'" href="'+r(a.cta_url)+'">'+r(a.cta_label)+"</a>":j+='<button type="button" class="'+w+'"'+(a.cta_disabled?" disabled":"")+">"+r(a.cta_label)+"</button>"}y.html(j)}else y.empty();var b=i.find(".juntaplay-group-card__created");b.length&&(a.created_human?b.text(a.created_human).show():b.empty().hide());var x=i.find(".juntaplay-group-card__reviewed");x.length&&(a.reviewed_human?x.text(a.reviewed_human).show():x.empty().hide());var C=i.find(".juntaplay-group-card__details");if(C.length){var S=[];if(a.service_name){var k="<strong>"+r(e("Serviço","juntaplay"))+":</strong> ";a.service_url?S.push("<li>"+k+'<a href="'+r(a.service_url)+'" target="_blank" rel="noopener noreferrer">'+r(a.service_name)+"</a></li>"):S.push("<li>"+k+r(a.service_name)+"</li>")}a.price_regular_display&&S.push("<li><strong>"+r(e("Valor do serviço","juntaplay"))+":</strong> "+r(a.price_regular_display)+"</li>"),a.price_promotional_display&&S.push("<li><strong>"+r(e("Oferta promocional","juntaplay"))+":</strong> "+r(a.price_promotional_display)+"</li>"),a.member_price_display&&S.push("<li><strong>"+r(e("Cobrado de cada membro","juntaplay"))+":</strong> "+r(a.member_price_display)+"</li>"),S.push("<li><strong>"+r(e("Tipo","juntaplay"))+":</strong> "+r(e("Público","juntaplay"))+"</li>"),a.category_label&&S.push("<li><strong>"+r(e("Categoria","juntaplay"))+":</strong> "+r(a.category_label)+"</li>"),void 0!==a.members_count&&S.push("<li><strong>"+r(e("Participantes","juntaplay"))+":</strong> "+r(String(a.members_count))+"</li>");var P="";P=a.pool_title?r(a.pool_title):'<span class="juntaplay-profile__empty">'+r(e("Ainda não vinculada","juntaplay"))+"</span>",S.push("<li><strong>"+r(e("Grupo","juntaplay"))+":</strong> "+P+"</li>"),a.support_channel&&S.push("<li><strong>"+r(e("Suporte a Membros","juntaplay"))+":</strong> "+r(a.support_channel)+"</li>"),a.delivery_time&&S.push("<li><strong>"+r(e("Prazo para liberar acesso","juntaplay"))+":</strong> "+r(a.delivery_time)+"</li>"),a.access_method&&S.push("<li><strong>"+r(e("Forma de entrega","juntaplay"))+":</strong> "+r(a.access_method)+"</li>"),a.instant_access_label&&S.push("<li><strong>"+r(e("Acesso instantâneo","juntaplay"))+":</strong> "+r(a.instant_access_label)+"</li>"),C.html(S.join(""))}}}}}window.JP.openGroupEditModal=function(n){var i=parseInt(n,10)||0;i&&(t=i,window.fetch&&W.root?(V&&"function"==typeof V.showLoading&&V.showLoading(),W.fetch("groups/"+i,{method:"GET",headers:W.headers()}).then(function(a){if(!a||!a.form)throw a||{};V&&"function"==typeof V.render&&V.render(a.form),B(jQuery("#juntaplay-group-modal").find("[data-group-cover]"))}).catch(function(t){var n=t&&t.message?t.message:e("Não foi possível carregar os dados agora. Tente novamente em instantes.","juntaplay");V&&"function"==typeof V.message&&V.message("error",n),a||(a=!0,V.loadEdit(i))})):a||(a=!0,V.loadEdit(i)))},window.JP.submitGroupEditForm=function(a){if(a){var n=jQuery(a).find('button[type="submit"]').first();n.length&&n.prop("disabled",!0).addClass("is-loading");var o=new window.FormData(a),r=parseInt(o.get("group_id"),10)||t||0;return r?window.fetch&&W.root?void W.fetch("groups/"+r,{method:"POST",body:o,headers:W.headers()}).then(function(a){if(!a||!a.group)throw a||{};V&&V.close();var t=a.message||e("Grupo atualizado com sucesso.","juntaplay");window.alert(t),i(a.group)}).catch(function(a){var t=a&&a.message?a.message:e("Não foi possível salvar as alterações do grupo.","juntaplay");V&&"function"==typeof V.message?V.message("error",t):window.alert(t)}).finally(function(){n.length&&n.prop("disabled",!1).removeClass("is-loading")}):(n.length&&n.prop("disabled",!1).removeClass("is-loading"),void V.save(a)):(n.length&&n.prop("disabled",!1).removeClass("is-loading"),void(V&&"function"==typeof V.message&&V.message("error",e("Não foi possível identificar o grupo selecionado.","juntaplay"))))}},window.JP.updateGroupCard=i}(),function(){var a=jQuery("[data-group-diagnostics]");if(a.length){var t=a.find("[data-diagnostics-toggle]"),n=a.find("[data-diagnostics-list]"),i=a.find("[data-diagnostics-percent]"),o=a.find("[data-diagnostics-progress]"),r=a.find("[data-diagnostics-bar]");t.on("click",function(a){a.preventDefault();var e="true"===t.attr("aria-expanded");t.attr("aria-expanded",e?"false":"true"),e?n.attr("hidden","hidden"):n.removeAttr("hidden")});var l,d=function(){var a={},t=!1;document.querySelectorAll('input[name="jp_profile_nonce"]').forEach(function(e){var n=e.getAttribute("id");n&&(a[n]&&(t=!0),a[n]=!0)});var e=!0;jQuery("[data-group-cover-preview] img").each(function(){this.getAttribute("src")||(e=!1)});var n=void 0!==window.wp&&!(!window.wp||!window.wp.media),i=!0;document.querySelectorAll("[data-group-cover]").forEach(function(a){"1"!==a.getAttribute("data-group-cover-ready")&&(i=!1)});var o=n;o&&(o=!1,document.querySelectorAll("[data-group-cover]").forEach(function(a){a.getAttribute("data-upload-context")&&a.getAttribute("data-media-author")&&(o=!0)}));var r=!(window.JP&&window.JP._backboneErrorReported);return{edit_modal_opens:void 0!==window.JP&&"function"==typeof window.JP.openGroupEditModal,single_click_media:n&&i,cover_preview_ok:e,can_upload_as_subscriber:o,no_duplicate_nonce_ids:!t,no_backbone_url_error:r}}();(l=d,window.fetch&&W.root?W.fetch("diagnostics",{method:"POST",headers:W.headers({"Content-Type":"application/json"}),body:JSON.stringify({checks:l})}).catch(function(){}):Promise.resolve()).finally(function(){(window.fetch&&W.root?W.fetch("diagnostics",{method:"GET",headers:W.headers()}):Promise.reject()).then(function(t){!function(t){if(t&&t.checks){a.removeAttr("hidden");var l="number"==typeof t.percent?t.percent:0;if(i.text(l+"%"),o.length&&o.attr("aria-valuenow",l),r.length&&r.css("width",Math.max(0,Math.min(100,l))+"%"),n.length){n.empty();var d={edit_modal_opens:e("Modal de edição disponível","juntaplay"),single_click_media:e("Biblioteca abre com um clique","juntaplay"),cover_preview_ok:e("Pré-visualização da capa ativa","juntaplay"),can_upload_as_subscriber:e("Assinante pode enviar capa","juntaplay"),no_duplicate_nonce_ids:e("Sem IDs de nonce duplicados","juntaplay"),no_backbone_url_error:e("Sem erro de Backbone","juntaplay")};Object.keys(t.checks).forEach(function(a){var e=!!t.checks[a],i=d[a]||a,o=jQuery('<li class="juntaplay-diagnostics__item"></li>');o.toggleClass("is-success",e).toggleClass("is-error",!e),o.text((e?"✓ ":"✗ ")+i),n.append(o)})}}}(t)}).catch(function(){a.attr("hidden","hidden")})})}}(),window.addEventListener("error",function(a){-1!==(a&&a.message?String(a.message):"").indexOf('"url" property or function must be specified')&&(window.JP||(window.JP={}),window.JP._backboneErrorReported||(window.JP._backboneErrorReported=!0,window.fetch&&W.root&&W.fetch("diagnostics/flag",{method:"POST",headers:W.headers({"Content-Type":"application/json"}),body:JSON.stringify({type:"backbone_url_error",status:!0})}).catch(function(){})))}),document.addEventListener("DOMContentLoaded",function(){var a=document.querySelectorAll(".juntaplay-relationship__form");a.length&&a.forEach(function(a){a.addEventListener("submit",function(){var t=a.querySelector(".juntaplay-button--primary");if(t){var n=t.getAttribute("data-loading-label");n||(n=e("Redirecionando...","juntaplay"),t.setAttribute("data-loading-label",n)),t.dataset.originalLabel||(t.dataset.originalLabel=t.textContent||""),t.textContent=n,t.classList.add("is-loading"),t.disabled=!0}})}),setTimeout(function(){jQuery(document).trigger("juntaplay:group-modal-ready")},0)}),a(function(){v(a(document))})}(jQuery);