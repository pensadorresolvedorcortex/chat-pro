<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Chat Pro Bot</title>
<style>
body { font-family: sans-serif; max-width: 600px; margin: 40px auto; }
#log { border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: auto; margin-bottom: 10px; }
</style>
</head>
<body>
<h1>Chat Pro Bot</h1>
<div id="log"></div>
<input id="input" placeholder="Digite sua mensagem" />
<button id="send">Enviar</button>
<script>
const log = document.getElementById('log');
const input = document.getElementById('input');
function append(text, cls='user') {
  const div = document.createElement('div');
  div.className = cls;
  div.textContent = text;
  log.appendChild(div);
  log.scrollTop = log.scrollHeight;
}
async function send(text) {
  const res = await fetch('/api/message', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ userId: 'web', text })
  });
  const data = await res.json();
  append('Bot: ' + data.reply, 'bot');
}
window.onload = async () => {
  await send('');
};
document.getElementById('send').onclick = async () => {
  const text = input.value.trim();
  if (!text) return;
  append('VocÃª: ' + text);
  input.value = '';
  await send(text);
};
</script>
</body>
</html>
